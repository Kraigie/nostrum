<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="generator" content="ExDoc v0.37.0">
    <meta name="project" content="nostrum v0.11.0-dev">


    <title>Nostrum.Bot â€” nostrum v0.11.0-dev</title>

    <link rel="stylesheet" href="dist/html-elixir-6X3L5KMG.css" />

    <script defer src="dist/sidebar_items-EC032187.js"></script>
    <script defer src="docs_config.js"></script>
    <script defer src="dist/html-6VTPNSGQ.js"></script>

  </head>
  <body>
    <script>(()=>{var t="ex_doc:settings",e="dark";var o="dark",s="light";var E="sidebar_state",n="closed";var r="sidebar_width";var a="sidebar-open";var i=new URLSearchParams(window.location.search),S=i.get("theme")||JSON.parse(localStorage.getItem(t)||"{}").theme;(S===o||S!==s&&window.matchMedia("(prefers-color-scheme: dark)").matches)&&document.body.classList.add(e);var d=sessionStorage.getItem(E),A=d!==n&&!window.matchMedia(`screen and (max-width: ${768}px)`).matches;document.body.classList.toggle(a,A);var c=sessionStorage.getItem(r);c&&document.body.style.setProperty("--sidebarWidth",`${c}px`);var p=/(Macintosh|iPhone|iPad|iPod)/.test(window.navigator.userAgent);document.documentElement.classList.toggle("apple-os",p);})();
</script>

<div class="body-wrapper">

<button id="sidebar-menu" class="sidebar-button sidebar-toggle" aria-label="toggle sidebar" aria-controls="sidebar">
  <i class="ri-menu-line ri-lg" title="Collapse/expand sidebar"></i>
</button>

<nav id="sidebar" class="sidebar">

  <div class="sidebar-header">
    <div class="sidebar-projectInfo">

        <a href="https://github.com/Kraigie/nostrum" class="sidebar-projectImage">
          <img src="assets/logo.png" alt="nostrum" />
        </a>

      <div>
        <a href="https://github.com/Kraigie/nostrum" class="sidebar-projectName" translate="no">
nostrum
        </a>
        <div class="sidebar-projectVersion" translate="no">
          v0.11.0-dev
        </div>
      </div>
    </div>
    <ul id="sidebar-list-nav" class="sidebar-list-nav" role="tablist" data-extras=""></ul>
  </div>
</nav>

<output role="status" id="toast"></output>

<main class="content page-module" id="main" data-type="modules">
  <div id="content" class="content-inner">
    <div class="top-search">
      <div class="search-settings">
        <form class="search-bar" action="search.html">
          <label class="search-label">
            <span class="sr-only">Search documentation of nostrum</span>
            <input name="q" type="text" class="search-input" placeholder="Press / to search" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" />
          </label>
          <button type="submit" class="search-button" aria-label="Submit Search" tabindex="-1">
            <i class="ri-search-2-line ri-lg" aria-hidden="true"></i>
          </button>
          <button type="button" tabindex="-1" class="search-close-button" aria-hidden="true">
            <i class="ri-close-line ri-lg" title="Cancel search"></i>
          </button>
        </form>
        <div class="autocomplete">
        </div>
        <button class="icon-settings display-settings">
          <i class="ri-settings-3-line"></i>
          <span class="sr-only">Settings</span>
        </button>
      </div>
    </div>

<div id="top-content">
  <div class="heading-with-actions top-heading">
    <h1>
      <span translate="no">Nostrum.Bot</span> 
      <small class="app-vsn" translate="no">(nostrum v0.11.0-dev)</small>

    </h1>

      <a href="https://github.com/Kraigie/nostrum/blob/master/lib/nostrum/bot.ex#L1" title="View Source" class="icon-action" rel="help">
        <i class="ri-code-s-slash-line" aria-hidden="true"></i>
        <span class="sr-only">View Source</span>
      </a>

  </div>


    <section id="moduledoc">
<p>Supervisor for a bot along with all its associated components.</p><h2 id="module-usage" class="section-heading">
  <a href="#module-usage" class="hover-link">
    <i class="ri-link-m" aria-hidden="true"></i>
  </a>
  <span class="text">Usage</span>
</h2>
<p>In your supervisor tree, write:</p><pre><code class="makeup elixir" translate="no"><span class="n">bot_options</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p" data-group-id="3536940854-1">%{</span><span class="w">
  </span><span class="ss">consumer</span><span class="p">:</span><span class="w"> </span><span class="nc">MyBot.Consumer</span><span class="p">,</span><span class="w">
  </span><span class="c1"># This is an example and includes privileged intents, but</span><span class="w">
  </span><span class="c1"># should provide a useful set of intents for bots. Feel</span><span class="w">
  </span><span class="c1"># free to adjust this as you see fit.</span><span class="w">
  </span><span class="ss">intents</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="3536940854-2">[</span><span class="w">
    </span><span class="ss">:direct_messages</span><span class="p">,</span><span class="w">
    </span><span class="ss">:guild_bans</span><span class="p">,</span><span class="w">
    </span><span class="ss">:guild_members</span><span class="p">,</span><span class="w">
    </span><span class="ss">:guild_message_reactions</span><span class="p">,</span><span class="w">
    </span><span class="ss">:guild_messages</span><span class="p">,</span><span class="w">
    </span><span class="ss">:guilds</span><span class="p">,</span><span class="w">
    </span><span class="ss">:message_content</span><span class="w">
  </span><span class="p" data-group-id="3536940854-2">]</span><span class="p">,</span><span class="w">
  </span><span class="ss">wrapped_token</span><span class="p">:</span><span class="w"> </span><span class="k" data-group-id="3536940854-3">fn</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="nc">System</span><span class="o">.</span><span class="n">fetch_env!</span><span class="p" data-group-id="3536940854-4">(</span><span class="s">&quot;BOT_TOKEN&quot;</span><span class="p" data-group-id="3536940854-4">)</span><span class="w"> </span><span class="k" data-group-id="3536940854-3">end</span><span class="p">,</span><span class="w">
</span><span class="p" data-group-id="3536940854-1">}</span><span class="w">
</span><span class="n">children</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p" data-group-id="3536940854-5">[</span><span class="w">
  </span><span class="p" data-group-id="3536940854-6">{</span><span class="nc">Nostrum.Bot</span><span class="p">,</span><span class="w"> </span><span class="n">bot_options</span><span class="p" data-group-id="3536940854-6">}</span><span class="w">
</span><span class="p" data-group-id="3536940854-5">]</span></code></pre><p>See <a href="#t:bot_options/0"><code class="inline">bot_options/0</code></a> for which options you can configure here.
You may also configure <a href="#t:supervisor_options/0"><code class="inline">supervisor_options/0</code></a>, which allow you
to customize the options we start the <a href="https://hexdocs.pm/elixir/Supervisor.html"><code class="inline">Supervisor</code></a> with by defining
your child in the form <code class="inline">{Nostrum.Bot, {bot_options, supervisor_options}}</code>,
but the default <a href="#t:supervisor_options/0"><code class="inline">supervisor_options/0</code></a> should suit most needs.</p><h2 id="module-migration-guide" class="section-heading">
  <a href="#module-migration-guide" class="hover-link">
    <i class="ri-link-m" aria-hidden="true"></i>
  </a>
  <span class="text">Migration guide</span>
</h2>
<p>If you are still using the old way of deploying nostrum, please do the following:</p><ol><li><p>Remove the <code class="inline">:nostrum</code>, <code class="inline">:token</code> configuration option. nostrum will then
assume that you are starting it as part of your own supervision tree, and
automatic startup via the application is disabled.</p></li><li><p>Remove your consumer from your application supervisor tree.</p></li><li><p>In your supervisor tree, add the <code class="inline">bot_options</code> described above, and add
<a href="Nostrum.Bot.html"><code class="inline">Nostrum.Bot</code></a> to your supervisor tree as described above. For the <code class="inline">:intents</code>
setting, cut the value you previously had in your <code class="inline">config.exs</code> and use it
here. Do the same with <code class="inline">:num_shards</code>, renaming it to <code class="inline">:shards</code> on the
<code class="inline">bot_options</code> map. You can then remove the old config values.</p></li><li><p>In your consumer, change <code class="inline">use Nostrum.Consumer</code> to <code class="inline">@behaviour Nostrum.Consumer</code>.</p></li><li><p>In your consumer, add a default event handling clause for unmatched events
at the end of the module, such as:</p></li></ol><pre><code class="makeup elixir" translate="no"><span class="w">  </span><span class="kd">def</span><span class="w"> </span><span class="nf">handle_event</span><span class="p" data-group-id="6497107254-1">(</span><span class="bp">_</span><span class="p" data-group-id="6497107254-1">)</span><span class="p">,</span><span class="w"> </span><span class="ss">do</span><span class="p">:</span><span class="w"> </span><span class="ss">:ok</span></code></pre><h2 id="module-limitations" class="section-heading">
  <a href="#module-limitations" class="hover-link">
    <i class="ri-link-m" aria-hidden="true"></i>
  </a>
  <span class="text">Limitations</span>
</h2>
<p>This module was introduced in version <code class="inline">0.11.0</code> to provide a first step
towards migrating away from nostrum starting as an application. However, at
present, you are not able to start multiple bots with this at the same time
due to global names used internally. However, as we migrate away from the
application-based deployment, further internal changes should not require any
update from you.</p>
    </section>

</div>

  <section id="summary" class="details-list">
    <h1 class="section-heading">
      <a class="hover-link" href="#summary">
        <i class="ri-link-m" aria-hidden="true"></i>
      </a>
      <span class="text">Summary</span>
    </h1>
<div class="summary-types summary">
  <h2>
    <a href="#types">Types</a>
  </h2>

    <div class="summary-row">
      <div class="summary-signature">
        <a href="#t:bot_options/0" data-no-tooltip="" translate="no">bot_options()</a>

      </div>

        <div class="summary-synopsis"><p>Options to start a bot with.</p></div>

    </div>

    <div class="summary-row">
      <div class="summary-signature">
        <a href="#t:intents/0" data-no-tooltip="" translate="no">intents()</a>

      </div>

        <div class="summary-synopsis"><p>Which gateway intents to request.</p></div>

    </div>

    <div class="summary-row">
      <div class="summary-signature">
        <a href="#t:supervisor_options/0" data-no-tooltip="" translate="no">supervisor_options()</a>

      </div>

        <div class="summary-synopsis"><p>Options to pass to the bot's supervisor.</p></div>

    </div>

</div>
<div class="summary-functions summary">
  <h2>
    <a href="#functions">Functions</a>
  </h2>

    <div class="summary-row">
      <div class="summary-signature">
        <a href="#child_spec/1" data-no-tooltip="" translate="no">child_spec(nostrum_options)</a>

      </div>

    </div>

</div>

  </section>


  <section id="types" class="details-list">
    <h1 class="section-heading">
      <a class="hover-link" href="#types">
        <i class="ri-link-m" aria-hidden="true"></i>
      </a>
      <span class="text">Types</span>
    </h1>
    <div class="types-list">
<section class="detail" id="t:bot_options/0">

  <div class="detail-header">
    <a href="#t:bot_options/0" class="detail-link" data-no-tooltip="" aria-label="Link to this type">
      <i class="ri-link-m" aria-hidden="true"></i>
    </a>
    <div class="heading-with-actions">
      <h1 class="signature" translate="no">bot_options()</h1>

        <span class="note">(since 0.11.0)</span>


        <a href="https://github.com/Kraigie/nostrum/blob/master/lib/nostrum/bot.ex#L114" class="icon-action" rel="help" aria-label="View Source">
          <i class="ri-code-s-slash-line" aria-hidden="true"></i>
        </a>

    </div>
  </div>

  <section class="docstring">

      <div class="specs">

          <pre translate="no"><span class="attribute">@type</span> bot_options() :: %{
  :consumer =&gt; <a href="https://hexdocs.pm/elixir/typespecs.html#built-in-types">module</a>(),
  :intents =&gt; :all | :nonprivileged | [<a href="https://hexdocs.pm/elixir/typespecs.html#basic-types">atom</a>()],
  :wrapped_token =&gt; (-&gt; <a href="https://hexdocs.pm/elixir/String.html#t:t/0">String.t</a>()),
  optional(:shards) =&gt;
    :auto
    | :manual
    | (num_shards :: <a href="https://hexdocs.pm/elixir/typespecs.html#basic-types">pos_integer</a>())
    | {lowest :: <a href="https://hexdocs.pm/elixir/typespecs.html#basic-types">pos_integer</a>(), highest :: <a href="https://hexdocs.pm/elixir/typespecs.html#basic-types">pos_integer</a>(),
       total :: <a href="https://hexdocs.pm/elixir/typespecs.html#basic-types">pos_integer</a>()}
}</pre>

      </div>

<p>Options to start a bot with.</p><h2 id="t:bot_options/0-required-fields" class="section-heading">
  <a href="#t:bot_options/0-required-fields" class="hover-link">
    <i class="ri-link-m" aria-hidden="true"></i>
  </a>
  <span class="text">Required fields</span>
</h2>
<ul><li><p><code class="inline">:consumer</code>: A module implementing the <a href="Nostrum.Consumer.html"><code class="inline">Nostrum.Consumer</code></a> behaviour that
should be called for each event.</p></li><li><p><code class="inline">:intents</code>: Which gateway intents to request. See the <a href="gateway_intents.html">Gateway
Intents</a> documentation for more details.</p></li><li><p><code class="inline">:wrapped_token</code>: A function that takes no arguments and returns the bot
token to use. This is wrapped to prevent exposure of the token in
stacktraces.</p></li></ul><h2 id="t:bot_options/0-optional-fields" class="section-heading">
  <a href="#t:bot_options/0-optional-fields" class="hover-link">
    <i class="ri-link-m" aria-hidden="true"></i>
  </a>
  <span class="text">Optional fields</span>
</h2>
<ul><li><code class="inline">:shards</code>: Shards that should be started with this bot. Possible values:<ul><li><p><code class="inline">:auto</code> uses the suggested amount of shards as provided by Discord. This
value is the default.</p></li><li><p><code class="inline">:manual</code> do not automatically spawn shards. In this case, it is your
responsibility to spawn shards manually, see <a href="./manual_sharding.html">the manual sharding
documentation</a>.</p></li><li><p><code class="inline">pos_integer()</code>: A number of shards to run. nostrum will warn if this is
not the recommended amount.</p></li><li><p><code class="inline">{lowest, highest, total}</code> starts shards <code class="inline">lowest</code> to <code class="inline">highest</code>. <code class="inline">total</code>
should contain the total amount of shards that your bot is expected to
have. Useful for splitting a single bot across multiple nodes, see the
<a href="./multi_node.html">multi-node documentation</a> for further information.</p></li></ul></li></ul>
  </section>
</section>
<section class="detail" id="t:intents/0">

  <div class="detail-header">
    <a href="#t:intents/0" class="detail-link" data-no-tooltip="" aria-label="Link to this type">
      <i class="ri-link-m" aria-hidden="true"></i>
    </a>
    <div class="heading-with-actions">
      <h1 class="signature" translate="no">intents()</h1>

        <span class="note">(since 0.11.0)</span>


        <a href="https://github.com/Kraigie/nostrum/blob/master/lib/nostrum/bot.ex#L133" class="icon-action" rel="help" aria-label="View Source">
          <i class="ri-code-s-slash-line" aria-hidden="true"></i>
        </a>

    </div>
  </div>

  <section class="docstring">

      <div class="specs">

          <pre translate="no"><span class="attribute">@type</span> intents() :: :all | :nonprivileged | [<a href="https://hexdocs.pm/elixir/typespecs.html#basic-types">atom</a>()]</pre>

      </div>

<p>Which gateway intents to request.</p><p>A full reference can be found either <a href="https://discord.com/developers/docs/events/gateway#gateway-intents">on
Discord</a>
or on our <a href="gateway_intents.html">Gateway Intents</a> documentation.</p>
  </section>
</section>
<section class="detail" id="t:supervisor_options/0">

  <div class="detail-header">
    <a href="#t:supervisor_options/0" class="detail-link" data-no-tooltip="" aria-label="Link to this type">
      <i class="ri-link-m" aria-hidden="true"></i>
    </a>
    <div class="heading-with-actions">
      <h1 class="signature" translate="no">supervisor_options()</h1>

        <span class="note">(since 0.11.0)</span>


        <a href="https://github.com/Kraigie/nostrum/blob/master/lib/nostrum/bot.ex#L141" class="icon-action" rel="help" aria-label="View Source">
          <i class="ri-code-s-slash-line" aria-hidden="true"></i>
        </a>

    </div>
  </div>

  <section class="docstring">

      <div class="specs">

          <pre translate="no"><span class="attribute">@type</span> supervisor_options() :: [<a href="https://hexdocs.pm/elixir/Supervisor.html#t:init_option/0">Supervisor.init_option</a>()]</pre>

      </div>

<p>Options to pass to the bot's supervisor.</p><p>By default, we set the <code class="inline">strategy: :one_for_one</code>. No other options are set by
nostrum.</p>
  </section>
</section>

    </div>
  </section>

  <section id="functions" class="details-list">
    <h1 class="section-heading">
      <a class="hover-link" href="#functions">
        <i class="ri-link-m" aria-hidden="true"></i>
      </a>
      <span class="text">Functions</span>
    </h1>
    <div class="functions-list">
<section class="detail" id="child_spec/1">

  <div class="detail-header">
    <a href="#child_spec/1" class="detail-link" data-no-tooltip="" aria-label="Link to this function">
      <i class="ri-link-m" aria-hidden="true"></i>
    </a>
    <div class="heading-with-actions">
      <h1 class="signature" translate="no">child_spec(nostrum_options)</h1>

        <span class="note">(since 0.11.0)</span>


        <a href="https://github.com/Kraigie/nostrum/blob/master/lib/nostrum/bot.ex#L174" class="icon-action" rel="help" aria-label="View Source">
          <i class="ri-code-s-slash-line" aria-hidden="true"></i>
        </a>

    </div>
  </div>

  <section class="docstring">

      <div class="specs">

          <pre translate="no"><span class="attribute">@spec</span> child_spec(options()) :: <a href="https://hexdocs.pm/elixir/Supervisor.html#t:child_spec/0">Supervisor.child_spec</a>()</pre>

      </div>


  </section>
</section>

    </div>
  </section>

    <footer class="footer">
      <p>

          <span class="line">
            <a href="https://hex.pm/packages/nostrum/0.11.0-dev" class="footer-hex-package">Hex Package</a>

            <a href="https://preview.hex.pm/preview/nostrum/0.11.0-dev">Hex Preview</a>

          </span>

        <span class="line">
          <button class="a-main footer-button display-quick-switch" title="Search HexDocs packages">
            Search HexDocs
          </button>

            <a href="nostrum.epub" title="ePub version">
              Download ePub version
            </a>

        </span>
      </p>

      <p class="built-using">
        Built using
        <a href="https://github.com/elixir-lang/ex_doc" title="ExDoc" target="_blank" rel="help noopener" translate="no">ExDoc</a> (v0.37.0) for the

          <a href="https://elixir-lang.org" title="Elixir" target="_blank" translate="no">Elixir programming language</a>

      </p>

    </footer>
  </div>
</main>
</div>

  </body>
</html>
