<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="generator" content="ExDoc v0.32.1">
    <meta name="project" content="Nostrum v0.9.0">


    <title>Nostrum.Cache.MemberCache â€” Nostrum v0.9.0</title>
    <link rel="stylesheet" href="dist/html-elixir-2C5PUTIB.css" />


    <script src="dist/handlebars.runtime-NWIB6V2M.js"></script>
    <script src="dist/handlebars.templates-IHH6HKET.js"></script>
    <script src="dist/sidebar_items-F09595C4.js"></script>
    <script src="docs_config.js"></script>
    <script async src="dist/html-GXQ6W6IF.js"></script>


  </head>
  <body data-type="modules" class="page-behaviour">
    <script>

      try {
        var settings = JSON.parse(localStorage.getItem('ex_doc:settings') || '{}');

        if (settings.theme === 'dark' ||
           ((settings.theme === 'system' || settings.theme == null) &&
             window.matchMedia('(prefers-color-scheme: dark)').matches)
           ) {
          document.body.classList.add('dark')
        }
      } catch (error) { }
    </script>

<div class="body-wrapper">

<button id="sidebar-menu" class="sidebar-button sidebar-toggle" aria-label="toggle sidebar" aria-controls="sidebar">
  <i class="ri-menu-line ri-lg" title="Collapse/expand sidebar"></i>
</button>

<nav id="sidebar" class="sidebar">

  <div class="sidebar-header">
    <div class="sidebar-projectInfo">

        <a href="https://github.com/Kraigie/nostrum" class="sidebar-projectImage">
          <img src="assets/logo.png" alt="Nostrum" />
        </a>

      <div>
        <a href="https://github.com/Kraigie/nostrum" class="sidebar-projectName" translate="no">
Nostrum
        </a>
        <div class="sidebar-projectVersion" translate="no">
          v0.9.0
        </div>
      </div>
    </div>
    <ul id="sidebar-listNav" class="sidebar-listNav" role="tablist">
      <li>
        <button id="extras-list-tab-button" role="tab" data-type="extras" aria-controls="extras-tab-panel" aria-selected="true" tabindex="0">
Pages
        </button>
      </li>

        <li>
          <button id="modules-list-tab-button" role="tab" data-type="modules" aria-controls="modules-tab-panel" aria-selected="false" tabindex="-1">
            Modules
          </button>
        </li>


        <li>
          <button id="tasks-list-tab-button" role="tab" data-type="tasks" aria-controls="tasks-tab-panel" aria-selected="false" tabindex="-1">
            <span translate="no">Mix</span> Tasks
          </button>
        </li>

    </ul>
  </div>

  <div id="extras-tab-panel" class="sidebar-tabpanel" role="tabpanel" aria-labelledby="extras-list-tab-button">
    <ul id="extras-full-list" class="full-list"></ul>
  </div>

    <div id="modules-tab-panel" class="sidebar-tabpanel" role="tabpanel" aria-labelledby="modules-list-tab-button" hidden>
      <ul id="modules-full-list" class="full-list"></ul>
    </div>


    <div id="tasks-tab-panel" class="sidebar-tabpanel" role="tabpanel" aria-labelledby="tasks-list-tab-button" hidden>
      <ul id="tasks-full-list" class="full-list"></ul>
    </div>

</nav>

<main class="content">
  <output role="status" id="toast"></output>

  <div id="content" class="content-inner">
    <div class="top-search">
      <div class="search-settings">
        <form class="search-bar" action="search.html">
          <label class="search-label">
            <span class="sr-only">Search documentation of Nostrum</span>
            <input name="q" type="text" class="search-input" placeholder="Press / to search" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" />
          </label>
          <button type="submit" class="search-button" aria-label="Submit Search">
            <i class="ri-search-2-line ri-lg" aria-hidden="true" title="Submit search"></i>
          </button>
          <button type="button" tabindex="-1" class="search-close-button" aria-hidden="true">
            <i class="ri-close-line ri-lg" title="Cancel search"></i>
          </button>
        </form>
        <div class="autocomplete">
        </div>
        <button class="icon-settings display-settings">
          <i class="ri-settings-3-line"></i>
          <span class="sr-only">Settings</span>
        </button>
      </div>
    </div>

<div id="top-content">
  <h1>

      <a href="https://github.com/Kraigie/nostrum/blob/master/lib/nostrum/cache/member_cache.ex#L1" title="View Source" class="icon-action" rel="help">
        <i class="ri-code-s-slash-line" aria-hidden="true"></i>
        <span class="sr-only">View Source</span>
      </a>

    <span translate="no">Nostrum.Cache.MemberCache</span> <small>behaviour</small>
    <small class="app-vsn" translate="no">(Nostrum v0.9.0)</small>

  </h1>


    <section id="moduledoc">
<p>Cache behaviour &amp; dispatcher for guild members.</p><p>You can call the functions provided by this module independent of which cache
is configured, and it will dispatch to the configured cache implementation.</p><p>By default, Elixir.Nostrum.Cache.MemberCache.ETS will be used for caching
members. You can override this in the <code class="inline">:caches</code> option of the <code class="inline">:nostrum</code>
application by setting the <code class="inline">:members</code> field to a different module
implementing the behaviour defined by this module.</p><p>The user-facing functions of this module can be called with a custom cache as
the final argument. This is mainly useful if you want to test the cache: by
default, nostrum will use Elixir.Nostrum.Cache.MemberCache.ETS.</p>
    </section>

</div>

  <section id="summary" class="details-list">
    <h1 class="section-heading">
      <a class="hover-link" href="#summary">
        <i class="ri-link-m" aria-hidden="true"></i>
      </a>
      <span class="text">Summary</span>
    </h1>
<div class="summary-callbacks summary">
  <h2>
    <a href="#callbacks">Callbacks</a>
  </h2>

    <div class="summary-row">
      <div class="summary-signature">
        <a href="#c:bulk_create/2" translate="no">bulk_create(id, members)</a>

      </div>

        <div class="summary-synopsis"><p>Bulk create multiple members in the cache from upstream data.</p></div>

    </div>

    <div class="summary-row">
      <div class="summary-signature">
        <a href="#c:child_spec/1" translate="no">child_spec(term)</a>

      </div>

        <div class="summary-synopsis"><p>Retrieve the child specification for starting this mapping under a supervisor.</p></div>

    </div>

    <div class="summary-row">
      <div class="summary-signature">
        <a href="#c:create/2" translate="no">create(id, member)</a>

      </div>

        <div class="summary-synopsis"><p>Add the member for the given guild from upstream data.</p></div>

    </div>

    <div class="summary-row">
      <div class="summary-signature">
        <a href="#c:delete/2" translate="no">delete(id, user_id)</a>

      </div>

        <div class="summary-synopsis"><p>Remove the given user for the given guild.</p></div>

    </div>

    <div class="summary-row">
      <div class="summary-signature">
        <a href="#c:query_handle/0" translate="no">query_handle()</a>

      </div>

        <div class="summary-synopsis"><p>Return a QLC query handle for cache read operations.</p></div>

    </div>

    <div class="summary-row">
      <div class="summary-signature">
        <a href="#c:update/2" translate="no">update(id, member)</a>

      </div>

        <div class="summary-synopsis"><p>Update the given member for the given guild from upstream data.</p></div>

    </div>

    <div class="summary-row">
      <div class="summary-signature">
        <a href="#c:wrap_qlc/1" translate="no">wrap_qlc(function)</a>

      </div>

        <div class="summary-synopsis"><p>A function that should wrap any <code class="inline">:qlc</code> operations.</p></div>

    </div>

</div>
<div class="summary-functions summary">
  <h2>
    <a href="#functions">Functions</a>
  </h2>

    <div class="summary-row">
      <div class="summary-signature">
        <a href="#fold/4" translate="no">fold(acc, guild_id, member_reducer, cache \\ Nostrum.Cache.MemberCache.ETS)</a>

      </div>

        <div class="summary-synopsis"><p>Fold (reduce) over members for the given guild ID.</p></div>

    </div>

    <div class="summary-row">
      <div class="summary-signature">
        <a href="#fold_by_user/4" translate="no">fold_by_user(acc, user_id, member_reducer, cache \\ Nostrum.Cache.MemberCache.ETS)</a>

      </div>

        <div class="summary-synopsis"><p>Reduce over all members cached for the given user ID.</p></div>

    </div>

    <div class="summary-row">
      <div class="summary-signature">
        <a href="#fold_with_users/4" translate="no">fold_with_users(acc, guild_id, fun, cache \\ Nostrum.Cache.MemberCache.ETS)</a>

      </div>

        <div class="summary-synopsis"><p>Calls <code class="inline">fun</code> on each member and its user on the given guild ID, with the given
accumulator.</p></div>

    </div>

    <div class="summary-row">
      <div class="summary-signature">
        <a href="#get/3" translate="no">get(guild_id, user_id, cache \\ Nostrum.Cache.MemberCache.ETS)</a>

      </div>

        <div class="summary-synopsis"><p>Get a single member on the given guild ID.</p></div>

    </div>

    <div class="summary-row">
      <div class="summary-signature">
        <a href="#get_with_user/3" translate="no">get_with_user(guild_id, member_id, cache \\ Nostrum.Cache.MemberCache.ETS)</a>

      </div>

        <div class="summary-synopsis"><p>Return a member together with its user via the user cache.</p></div>

    </div>

    <div class="summary-row">
      <div class="summary-signature">
        <a href="#query_handle/0" translate="no">query_handle()</a>

      </div>

        <div class="summary-synopsis"><p>Return the QLC handle of the configured cache.</p></div>

    </div>

    <div class="summary-row">
      <div class="summary-signature">
        <a href="#wrap_qlc/2" translate="no">wrap_qlc(cache \\ Nostrum.Cache.MemberCache.ETS, fun)</a>

      </div>

        <div class="summary-synopsis"><p>Call <a href="#c:wrap_qlc/1"><code class="inline">wrap_qlc/1</code></a> on the given cache, if implemented.</p></div>

    </div>

</div>

  </section>


  <section id="callbacks" class="details-list">
    <h1 class="section-heading">
      <a class="hover-link" href="#callbacks">
        <i class="ri-link-m" aria-hidden="true"></i>
      </a>
      <span class="text">Callbacks</span>
    </h1>
    <div class="callbacks-list">
<section class="detail" id="c:bulk_create/2">

  <div class="detail-header">
    <a href="#c:bulk_create/2" class="detail-link" title="Link to this callback">
      <i class="ri-link-m" aria-hidden="true"></i>
      <span class="sr-only">Link to this callback</span>
    </a>
    <h1 class="signature" translate="no">bulk_create(id, members)</h1>

      <a href="https://github.com/Kraigie/nostrum/blob/master/lib/nostrum/cache/member_cache.ex#L67" class="icon-action" rel="help" title="View Source">
       <i class="ri-code-s-slash-line" aria-hidden="true"></i>
       <span class="sr-only">View Source</span>
     </a>


      <span class="note">(since 0.7.0)</span>

  </div>

  <section class="docstring">

      <div class="specs">

          <pre translate="no"><span class="attribute">@callback</span> bulk_create(<a href="Nostrum.Struct.Guild.html#t:id/0">Nostrum.Struct.Guild.id</a>(), members :: [member :: <a href="https://hexdocs.pm/elixir/typespecs.html#basic-types">map</a>()]) :: true</pre>

      </div>

<p>Bulk create multiple members in the cache from upstream data.</p><p>Return value is unused, as we currently do not dispatch a gateway for this.</p>
  </section>
</section>
<section class="detail" id="c:child_spec/1">

  <div class="detail-header">
    <a href="#c:child_spec/1" class="detail-link" title="Link to this callback">
      <i class="ri-link-m" aria-hidden="true"></i>
      <span class="sr-only">Link to this callback</span>
    </a>
    <h1 class="signature" translate="no">child_spec(term)</h1>

      <a href="https://github.com/Kraigie/nostrum/blob/master/lib/nostrum/cache/member_cache.ex#L95" class="icon-action" rel="help" title="View Source">
       <i class="ri-code-s-slash-line" aria-hidden="true"></i>
       <span class="sr-only">View Source</span>
     </a>


      <span class="note">(since 0.7.0)</span>

  </div>

  <section class="docstring">

      <div class="specs">

          <pre translate="no"><span class="attribute">@callback</span> child_spec(<a href="https://hexdocs.pm/elixir/typespecs.html#built-in-types">term</a>()) :: <a href="https://hexdocs.pm/elixir/Supervisor.html#t:child_spec/0">Supervisor.child_spec</a>()</pre>

      </div>

<p>Retrieve the child specification for starting this mapping under a supervisor.</p>
  </section>
</section>
<section class="detail" id="c:create/2">

  <div class="detail-header">
    <a href="#c:create/2" class="detail-link" title="Link to this callback">
      <i class="ri-link-m" aria-hidden="true"></i>
      <span class="sr-only">Link to this callback</span>
    </a>
    <h1 class="signature" translate="no">create(id, member)</h1>

      <a href="https://github.com/Kraigie/nostrum/blob/master/lib/nostrum/cache/member_cache.ex#L33" class="icon-action" rel="help" title="View Source">
       <i class="ri-code-s-slash-line" aria-hidden="true"></i>
       <span class="sr-only">View Source</span>
     </a>


      <span class="note">(since 0.7.0)</span>

  </div>

  <section class="docstring">

      <div class="specs">

          <pre translate="no"><span class="attribute">@callback</span> create(<a href="Nostrum.Struct.Guild.html#t:id/0">Nostrum.Struct.Guild.id</a>(), member :: <a href="https://hexdocs.pm/elixir/typespecs.html#basic-types">map</a>()) ::
  <a href="Nostrum.Struct.Guild.Member.html#t:t/0">Nostrum.Struct.Guild.Member.t</a>()</pre>

      </div>

<p>Add the member for the given guild from upstream data.</p><p>Return the casted member structure.</p>
  </section>
</section>
<section class="detail" id="c:delete/2">

  <div class="detail-header">
    <a href="#c:delete/2" class="detail-link" title="Link to this callback">
      <i class="ri-link-m" aria-hidden="true"></i>
      <span class="sr-only">Link to this callback</span>
    </a>
    <h1 class="signature" translate="no">delete(id, user_id)</h1>

      <a href="https://github.com/Kraigie/nostrum/blob/master/lib/nostrum/cache/member_cache.ex#L59" class="icon-action" rel="help" title="View Source">
       <i class="ri-code-s-slash-line" aria-hidden="true"></i>
       <span class="sr-only">View Source</span>
     </a>


      <span class="note">(since 0.7.0)</span>

  </div>

  <section class="docstring">

      <div class="specs">

          <pre translate="no"><span class="attribute">@callback</span> delete(<a href="Nostrum.Struct.Guild.html#t:id/0">Nostrum.Struct.Guild.id</a>(), <a href="Nostrum.Struct.Guild.Member.html#t:user_id/0">Nostrum.Struct.Guild.Member.user_id</a>()) ::
  {<a href="Nostrum.Struct.Guild.html#t:id/0">Nostrum.Struct.Guild.id</a>(), old_member :: <a href="Nostrum.Struct.Guild.Member.html#t:t/0">Nostrum.Struct.Guild.Member.t</a>()}
  | :noop</pre>

      </div>

<p>Remove the given user for the given guild.</p><p>Return the guild ID and old member if the member was cached. Otherwise,
return <code class="inline">:noop</code>.</p>
  </section>
</section>
<section class="detail" id="c:query_handle/0">

  <div class="detail-header">
    <a href="#c:query_handle/0" class="detail-link" title="Link to this callback">
      <i class="ri-link-m" aria-hidden="true"></i>
      <span class="sr-only">Link to this callback</span>
    </a>
    <h1 class="signature" translate="no">query_handle()</h1>

      <a href="https://github.com/Kraigie/nostrum/blob/master/lib/nostrum/cache/member_cache.ex#L90" class="icon-action" rel="help" title="View Source">
       <i class="ri-code-s-slash-line" aria-hidden="true"></i>
       <span class="sr-only">View Source</span>
     </a>


      <span class="note">(since 0.7.0)</span>

  </div>

  <section class="docstring">

      <div class="specs">

          <pre translate="no"><span class="attribute">@callback</span> query_handle() :: <a href="https://www.erlang.org/doc/man/qlc.html#type-query_handle">:qlc.query_handle</a>()</pre>

      </div>

<p>Return a QLC query handle for cache read operations.</p><p>This is used by nostrum to provide any read operations on the cache. Write
operations still need to be implemented separately.</p><p>The Erlang manual on <a href="https://www.erlang.org/doc/man/qlc.html#implementing_a_qlc_table">Implementing a QLC
Table</a>
contains examples for implementation. To prevent full table scans, accept
match specifications in your <code class="inline">TraverseFun</code> and implement a <code class="inline">LookupFun</code> as
documented.</p><p>The query handle must return items in the form <code class="inline">{guild_id, user_id, member}</code>, where:</p><ul><li><code class="inline">guild_id</code> is a <a href="Nostrum.Struct.Guild.html#t:id/0"><code class="inline">Nostrum.Struct.Guild.id/0</code></a>,</li><li><code class="inline">user_id</code> is a <a href="Nostrum.Struct.User.html#t:id/0"><code class="inline">Nostrum.Struct.User.id/0</code></a>, and</li><li><code class="inline">member</code> is a <a href="Nostrum.Struct.Guild.Member.html#t:t/0"><code class="inline">Nostrum.Struct.Guild.Member.t/0</code></a>.</li></ul><p>If your cache needs some form of setup or teardown for QLC queries (such as
opening connections), see <a href="#c:wrap_qlc/1"><code class="inline">wrap_qlc/1</code></a>.</p>
  </section>
</section>
<section class="detail" id="c:update/2">

  <div class="detail-header">
    <a href="#c:update/2" class="detail-link" title="Link to this callback">
      <i class="ri-link-m" aria-hidden="true"></i>
      <span class="sr-only">Link to this callback</span>
    </a>
    <h1 class="signature" translate="no">update(id, member)</h1>

      <a href="https://github.com/Kraigie/nostrum/blob/master/lib/nostrum/cache/member_cache.ex#L50" class="icon-action" rel="help" title="View Source">
       <i class="ri-code-s-slash-line" aria-hidden="true"></i>
       <span class="sr-only">View Source</span>
     </a>


      <span class="note">(since 0.7.0)</span>

  </div>

  <section class="docstring">

      <div class="specs">

          <pre translate="no"><span class="attribute">@callback</span> update(<a href="Nostrum.Struct.Guild.html#t:id/0">Nostrum.Struct.Guild.id</a>(), member :: <a href="https://hexdocs.pm/elixir/typespecs.html#basic-types">map</a>()) ::
  {<a href="Nostrum.Struct.Guild.html#t:id/0">Nostrum.Struct.Guild.id</a>(),
   old_member :: <a href="Nostrum.Struct.Guild.Member.html#t:t/0">Nostrum.Struct.Guild.Member.t</a>() | nil,
   updated_member :: <a href="Nostrum.Struct.Guild.Member.html#t:t/0">Nostrum.Struct.Guild.Member.t</a>()}</pre>

      </div>

<p>Update the given member for the given guild from upstream data.</p><p>Return the guild ID that was updated, the old cached member (if the member
was known to the cache), and the updated member.</p><h2 id="c:update/2-note-regarding-intents" class="section-heading">
  <a href="#c:update/2-note-regarding-intents" class="hover-link">
    <i class="ri-link-m" aria-hidden="true"></i>
  </a>
  <span class="text">Note regarding intents</span>
</h2>
<p>Even if the required intents to receive <code class="inline">GUILD_MEMBER_UPDATE</code> events are
disabled to a point where we do not receive guild creation events, it is
still possible to receive the event for our own user. An example of this can
be found in <a href="https://github.com/Kraigie/nostrum/issues/293">issue
#293</a>. Note that the issue
predates the modern nostrum caching infrastructure.</p>
  </section>
</section>
<section class="detail" id="c:wrap_qlc/1">

  <div class="detail-header">
    <a href="#c:wrap_qlc/1" class="detail-link" title="Link to this callback">
      <i class="ri-link-m" aria-hidden="true"></i>
      <span class="sr-only">Link to this callback</span>
    </a>
    <h1 class="signature" translate="no">wrap_qlc(function)</h1>

      <a href="https://github.com/Kraigie/nostrum/blob/master/lib/nostrum/cache/member_cache.ex#L108" class="icon-action" rel="help" title="View Source">
       <i class="ri-code-s-slash-line" aria-hidden="true"></i>
       <span class="sr-only">View Source</span>
     </a>


      <span class="note">(optional)</span>

      <span class="note">(since 0.8.0)</span>

  </div>

  <section class="docstring">

      <div class="specs">

          <pre translate="no"><span class="attribute">@callback</span> wrap_qlc((-&gt; result)) :: result when result: <a href="https://hexdocs.pm/elixir/typespecs.html#built-in-types">term</a>()</pre>

      </div>

<p>A function that should wrap any <code class="inline">:qlc</code> operations.</p><p>If you implement a cache that is backed by a database and want to perform
cleanup and teardown actions such as opening and closing connections,
managing transactions and so on, you want to implement this function. nostrum
will then effectively call <code class="inline">wrap_qlc(fn -&gt; :qlc.e(...) end)</code>.</p><p>If your cache does not need any wrapping, you can omit this.</p>
  </section>
</section>

    </div>
  </section>

  <section id="functions" class="details-list">
    <h1 class="section-heading">
      <a class="hover-link" href="#functions">
        <i class="ri-link-m" aria-hidden="true"></i>
      </a>
      <span class="text">Functions</span>
    </h1>
    <div class="functions-list">
<section class="detail" id="fold/4">

    <span id="fold/3"></span>

  <div class="detail-header">
    <a href="#fold/4" class="detail-link" title="Link to this function">
      <i class="ri-link-m" aria-hidden="true"></i>
      <span class="sr-only">Link to this function</span>
    </a>
    <h1 class="signature" translate="no">fold(acc, guild_id, member_reducer, cache \\ Nostrum.Cache.MemberCache.ETS)</h1>

      <a href="https://github.com/Kraigie/nostrum/blob/master/lib/nostrum/cache/member_cache.ex#L189" class="icon-action" rel="help" title="View Source">
       <i class="ri-code-s-slash-line" aria-hidden="true"></i>
       <span class="sr-only">View Source</span>
     </a>


      <span class="note">(since 0.8.0)</span>

  </div>

  <section class="docstring">

      <div class="specs">

          <pre translate="no"><span class="attribute">@spec</span> fold(
  acc,
  <a href="Nostrum.Struct.Guild.html#t:id/0">Nostrum.Struct.Guild.id</a>(),
  (<a href="Nostrum.Struct.Guild.Member.html#t:t/0">Nostrum.Struct.Guild.Member.t</a>(), acc -&gt; acc),
  <a href="https://hexdocs.pm/elixir/typespecs.html#built-in-types">module</a>()
) ::
  acc
when acc: <a href="https://hexdocs.pm/elixir/typespecs.html#built-in-types">term</a>()</pre>

      </div>

<p>Fold (reduce) over members for the given guild ID.</p><h2 id="fold/4-parameters" class="section-heading">
  <a href="#fold/4-parameters" class="hover-link">
    <i class="ri-link-m" aria-hidden="true"></i>
  </a>
  <span class="text">Parameters</span>
</h2>
<ul><li><code class="inline">acc</code>: The initial accumulator. Also returned if no guild members were found.</li><li><code class="inline">guild_id</code>: The guild for which to reduce members.</li><li><code class="inline">fun</code>: Called for every element in the result. Takes a pair
in the form <code class="inline">{member, acc)</code>, and must return the updated accumulator.</li></ul><h2 id="fold/4-return-value" class="section-heading">
  <a href="#fold/4-return-value" class="hover-link">
    <i class="ri-link-m" aria-hidden="true"></i>
  </a>
  <span class="text">Return value</span>
</h2>
<p>Returns the resulting accumulator via <code class="inline">fun</code>. Returns <code class="inline">acc</code> unchanged if no
results were found.</p>
  </section>
</section>
<section class="detail" id="fold_by_user/4">

    <span id="fold_by_user/3"></span>

  <div class="detail-header">
    <a href="#fold_by_user/4" class="detail-link" title="Link to this function">
      <i class="ri-link-m" aria-hidden="true"></i>
      <span class="sr-only">Link to this function</span>
    </a>
    <h1 class="signature" translate="no">fold_by_user(acc, user_id, member_reducer, cache \\ Nostrum.Cache.MemberCache.ETS)</h1>

      <a href="https://github.com/Kraigie/nostrum/blob/master/lib/nostrum/cache/member_cache.ex#L147" class="icon-action" rel="help" title="View Source">
       <i class="ri-code-s-slash-line" aria-hidden="true"></i>
       <span class="sr-only">View Source</span>
     </a>


      <span class="note">(since 0.8.0)</span>

  </div>

  <section class="docstring">

      <div class="specs">

          <pre translate="no"><span class="attribute">@spec</span> fold_by_user(
  acc,
  <a href="Nostrum.Struct.Guild.Member.html#t:user_id/0">Nostrum.Struct.Guild.Member.user_id</a>(),
  ({<a href="Nostrum.Struct.Guild.html#t:id/0">Nostrum.Struct.Guild.id</a>(), <a href="Nostrum.Struct.Guild.Member.html#t:t/0">Nostrum.Struct.Guild.Member.t</a>()}, acc -&gt; acc),
  <a href="https://hexdocs.pm/elixir/typespecs.html#built-in-types">module</a>()
) :: acc
when acc: <a href="https://hexdocs.pm/elixir/typespecs.html#built-in-types">term</a>()</pre>

      </div>

<p>Reduce over all members cached for the given user ID.</p><p>The members will be returned alongside their guild ID as a pair in the
format <code class="inline">{guild_id, member}</code>.</p>
  </section>
</section>
<section class="detail" id="fold_with_users/4">

    <span id="fold_with_users/3"></span>

  <div class="detail-header">
    <a href="#fold_with_users/4" class="detail-link" title="Link to this function">
      <i class="ri-link-m" aria-hidden="true"></i>
      <span class="sr-only">Link to this function</span>
    </a>
    <h1 class="signature" translate="no">fold_with_users(acc, guild_id, fun, cache \\ Nostrum.Cache.MemberCache.ETS)</h1>

      <a href="https://github.com/Kraigie/nostrum/blob/master/lib/nostrum/cache/member_cache.ex#L221" class="icon-action" rel="help" title="View Source">
       <i class="ri-code-s-slash-line" aria-hidden="true"></i>
       <span class="sr-only">View Source</span>
     </a>


      <span class="note">(since 0.8.0)</span>

  </div>

  <section class="docstring">

      <div class="specs">

          <pre translate="no"><span class="attribute">@spec</span> fold_with_users(
  acc,
  <a href="Nostrum.Struct.Guild.html#t:id/0">Nostrum.Struct.Guild.id</a>(),
  ({<a href="Nostrum.Struct.Guild.Member.html#t:t/0">Nostrum.Struct.Guild.Member.t</a>(), <a href="Nostrum.Struct.User.html#t:t/0">Nostrum.Struct.User.t</a>()}, acc -&gt; acc),
  <a href="https://hexdocs.pm/elixir/typespecs.html#built-in-types">module</a>()
) :: acc
when acc: <a href="https://hexdocs.pm/elixir/typespecs.html#built-in-types">term</a>()</pre>

      </div>

<p>Calls <code class="inline">fun</code> on each member and its user on the given guild ID, with the given
accumulator.</p><h2 id="fold_with_users/4-parameters" class="section-heading">
  <a href="#fold_with_users/4-parameters" class="hover-link">
    <i class="ri-link-m" aria-hidden="true"></i>
  </a>
  <span class="text">Parameters</span>
</h2>
<ul><li><code class="inline">acc</code> (<code class="inline">term()</code>): The initial accumulator. Also returned if no guild
members were found.</li><li><code class="inline">guild_id</code> (<a href="Nostrum.Struct.Guild.html#t:id/0"><code class="inline">Nostrum.Struct.Guild.id/0</code></a>): The guild for which to reduce members.</li><li><code class="inline">fun</code> (<code class="inline">function()</code>): Called for every element in the result. Takes a pair
in the form <code class="inline">{{member, user}, acc)</code>, and must return the updated accumulator.</li></ul><h2 id="fold_with_users/4-return-value" class="section-heading">
  <a href="#fold_with_users/4-return-value" class="hover-link">
    <i class="ri-link-m" aria-hidden="true"></i>
  </a>
  <span class="text">Return value</span>
</h2>
<p>Returns the resulting accumulator via <code class="inline">fun</code>. Returns <code class="inline">acc</code> unchanged if no
results were found.</p><p>If the user for a guild member is not found, the member <em>and</em> user won't be
present in the result. Barring a bug in nostrum's caching, this should never
happen in practice.</p>
  </section>
</section>
<section class="detail" id="get/3">

    <span id="get/2"></span>

  <div class="detail-header">
    <a href="#get/3" class="detail-link" title="Link to this function">
      <i class="ri-link-m" aria-hidden="true"></i>
      <span class="sr-only">Link to this function</span>
    </a>
    <h1 class="signature" translate="no">get(guild_id, user_id, cache \\ Nostrum.Cache.MemberCache.ETS)</h1>

      <a href="https://github.com/Kraigie/nostrum/blob/master/lib/nostrum/cache/member_cache.ex#L157" class="icon-action" rel="help" title="View Source">
       <i class="ri-code-s-slash-line" aria-hidden="true"></i>
       <span class="sr-only">View Source</span>
     </a>


      <span class="note">(since 0.7.0)</span>

  </div>

  <section class="docstring">

      <div class="specs">

          <pre translate="no"><span class="attribute">@spec</span> get(<a href="Nostrum.Struct.Guild.html#t:id/0">Nostrum.Struct.Guild.id</a>(), <a href="Nostrum.Struct.Guild.Member.html#t:user_id/0">Nostrum.Struct.Guild.Member.user_id</a>(), <a href="https://hexdocs.pm/elixir/typespecs.html#built-in-types">module</a>()) ::
  {:ok, <a href="Nostrum.Struct.Guild.Member.html#t:t/0">Nostrum.Struct.Guild.Member.t</a>()} | {:error, <a href="https://hexdocs.pm/elixir/typespecs.html#basic-types">atom</a>()}</pre>

      </div>

<p>Get a single member on the given guild ID.</p>
  </section>
</section>
<section class="detail" id="get_with_user/3">

    <span id="get_with_user/2"></span>

  <div class="detail-header">
    <a href="#get_with_user/3" class="detail-link" title="Link to this function">
      <i class="ri-link-m" aria-hidden="true"></i>
      <span class="sr-only">Link to this function</span>
    </a>
    <h1 class="signature" translate="no">get_with_user(guild_id, member_id, cache \\ Nostrum.Cache.MemberCache.ETS)</h1>

      <a href="https://github.com/Kraigie/nostrum/blob/master/lib/nostrum/cache/member_cache.ex#L119" class="icon-action" rel="help" title="View Source">
       <i class="ri-code-s-slash-line" aria-hidden="true"></i>
       <span class="sr-only">View Source</span>
     </a>


      <span class="note">(since 0.7.0)</span>

  </div>

  <section class="docstring">

      <div class="specs">

          <pre translate="no"><span class="attribute">@spec</span> get_with_user(
  <a href="Nostrum.Struct.Guild.html#t:id/0">Nostrum.Struct.Guild.id</a>(),
  <a href="Nostrum.Struct.Guild.Member.html#t:user_id/0">Nostrum.Struct.Guild.Member.user_id</a>(),
  <a href="https://hexdocs.pm/elixir/typespecs.html#built-in-types">module</a>()
) ::
  {<a href="Nostrum.Struct.Guild.Member.html#t:t/0">Nostrum.Struct.Guild.Member.t</a>(), <a href="Nostrum.Struct.User.html#t:t/0">Nostrum.Struct.User.t</a>() | nil} | nil</pre>

      </div>

<p>Return a member together with its user via the user cache.</p>
  </section>
</section>
<section class="detail" id="query_handle/0">

  <div class="detail-header">
    <a href="#query_handle/0" class="detail-link" title="Link to this function">
      <i class="ri-link-m" aria-hidden="true"></i>
      <span class="sr-only">Link to this function</span>
    </a>
    <h1 class="signature" translate="no">query_handle()</h1>

      <a href="https://github.com/Kraigie/nostrum/blob/master/lib/nostrum/cache/member_cache.ex#L265" class="icon-action" rel="help" title="View Source">
       <i class="ri-code-s-slash-line" aria-hidden="true"></i>
       <span class="sr-only">View Source</span>
     </a>


      <span class="note">(since 0.8.0)</span>

  </div>

  <section class="docstring">

<p>Return the QLC handle of the configured cache.</p>
  </section>
</section>
<section class="detail" id="wrap_qlc/2">

    <span id="wrap_qlc/1"></span>

  <div class="detail-header">
    <a href="#wrap_qlc/2" class="detail-link" title="Link to this function">
      <i class="ri-link-m" aria-hidden="true"></i>
      <span class="sr-only">Link to this function</span>
    </a>
    <h1 class="signature" translate="no">wrap_qlc(cache \\ Nostrum.Cache.MemberCache.ETS, fun)</h1>

      <a href="https://github.com/Kraigie/nostrum/blob/master/lib/nostrum/cache/member_cache.ex#L243" class="icon-action" rel="help" title="View Source">
       <i class="ri-code-s-slash-line" aria-hidden="true"></i>
       <span class="sr-only">View Source</span>
     </a>


      <span class="note">(since 0.8.0)</span>

  </div>

  <section class="docstring">

      <div class="specs">

          <pre translate="no"><span class="attribute">@spec</span> wrap_qlc(<a href="https://hexdocs.pm/elixir/typespecs.html#built-in-types">module</a>(), (-&gt; result)) :: result when result: <a href="https://hexdocs.pm/elixir/typespecs.html#built-in-types">term</a>()</pre>

      </div>

<p>Call <a href="#c:wrap_qlc/1"><code class="inline">wrap_qlc/1</code></a> on the given cache, if implemented.</p><p>If no cache is given, calls out to the default cache.</p>
  </section>
</section>

    </div>
  </section>

    <footer class="footer">
      <p>

          <span class="line">
            <a href="https://hex.pm/packages/nostrum/0.9.0" class="footer-hex-package">Hex Package</a>

            <a href="https://preview.hex.pm/preview/nostrum/0.9.0">Hex Preview</a>

          </span>

        <span class="line">
          <button class="a-main footer-button display-quick-switch" title="Search HexDocs packages">
            Search HexDocs
          </button>

            <a href="Nostrum.epub" title="ePub version">
              Download ePub version
            </a>

        </span>
      </p>

      <p class="built-using">
        Built using
        <a href="https://github.com/elixir-lang/ex_doc" title="ExDoc" target="_blank" rel="help noopener" translate="no">ExDoc</a> (v0.32.1) for the

          <a href="https://elixir-lang.org" title="Elixir" target="_blank" translate="no">Elixir programming language</a>

      </p>

    </footer>
  </div>
</main>
</div>


  </body>
</html>
