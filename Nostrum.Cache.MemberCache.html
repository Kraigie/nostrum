<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="generator" content="ExDoc v0.37.0">
    <meta name="project" content="nostrum v0.11.0-dev">


    <title>Nostrum.Cache.MemberCache â€” nostrum v0.11.0-dev</title>

    <link rel="stylesheet" href="dist/html-elixir-6X3L5KMG.css" />

    <script defer src="dist/sidebar_items-35D5AD02.js"></script>
    <script defer src="docs_config.js"></script>
    <script defer src="dist/html-6VTPNSGQ.js"></script>

  </head>
  <body>
    <script>(()=>{var t="ex_doc:settings",e="dark";var o="dark",s="light";var E="sidebar_state",n="closed";var r="sidebar_width";var a="sidebar-open";var i=new URLSearchParams(window.location.search),S=i.get("theme")||JSON.parse(localStorage.getItem(t)||"{}").theme;(S===o||S!==s&&window.matchMedia("(prefers-color-scheme: dark)").matches)&&document.body.classList.add(e);var d=sessionStorage.getItem(E),A=d!==n&&!window.matchMedia(`screen and (max-width: ${768}px)`).matches;document.body.classList.toggle(a,A);var c=sessionStorage.getItem(r);c&&document.body.style.setProperty("--sidebarWidth",`${c}px`);var p=/(Macintosh|iPhone|iPad|iPod)/.test(window.navigator.userAgent);document.documentElement.classList.toggle("apple-os",p);})();
</script>

<div class="body-wrapper">

<button id="sidebar-menu" class="sidebar-button sidebar-toggle" aria-label="toggle sidebar" aria-controls="sidebar">
  <i class="ri-menu-line ri-lg" title="Collapse/expand sidebar"></i>
</button>

<nav id="sidebar" class="sidebar">

  <div class="sidebar-header">
    <div class="sidebar-projectInfo">

        <a href="https://github.com/Kraigie/nostrum" class="sidebar-projectImage">
          <img src="assets/logo.png" alt="nostrum" />
        </a>

      <div>
        <a href="https://github.com/Kraigie/nostrum" class="sidebar-projectName" translate="no">
nostrum
        </a>
        <div class="sidebar-projectVersion" translate="no">
          v0.11.0-dev
        </div>
      </div>
    </div>
    <ul id="sidebar-list-nav" class="sidebar-list-nav" role="tablist" data-extras=""></ul>
  </div>
</nav>

<output role="status" id="toast"></output>

<main class="content page-behaviour" id="main" data-type="modules">
  <div id="content" class="content-inner">
    <div class="top-search">
      <div class="search-settings">
        <form class="search-bar" action="search.html">
          <label class="search-label">
            <span class="sr-only">Search documentation of nostrum</span>
            <input name="q" type="text" class="search-input" placeholder="Press / to search" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" />
          </label>
          <button type="submit" class="search-button" aria-label="Submit Search" tabindex="-1">
            <i class="ri-search-2-line ri-lg" aria-hidden="true"></i>
          </button>
          <button type="button" tabindex="-1" class="search-close-button" aria-hidden="true">
            <i class="ri-close-line ri-lg" title="Cancel search"></i>
          </button>
        </form>
        <div class="autocomplete">
        </div>
        <button class="icon-settings display-settings">
          <i class="ri-settings-3-line"></i>
          <span class="sr-only">Settings</span>
        </button>
      </div>
    </div>

<div id="top-content">
  <div class="heading-with-actions top-heading">
    <h1>
      <span translate="no">Nostrum.Cache.MemberCache</span> <small>behaviour</small>
      <small class="app-vsn" translate="no">(nostrum v0.11.0-dev)</small>

    </h1>

      <a href="https://github.com/Kraigie/nostrum/blob/master/lib/nostrum/cache/member_cache.ex#L1" title="View Source" class="icon-action" rel="help">
        <i class="ri-code-s-slash-line" aria-hidden="true"></i>
        <span class="sr-only">View Source</span>
      </a>

  </div>


    <section id="moduledoc">
<p>Cache behaviour &amp; dispatcher for guild members.</p><p>You can call the functions provided by this module independent of which cache
is configured, and it will dispatch to the configured cache implementation.</p><p>By default, Elixir.Nostrum.Cache.MemberCache.ETS will be used for caching
members. You can override this in the <code class="inline">:caches</code> option of the <code class="inline">:nostrum</code>
application by setting the <code class="inline">:members</code> field to a different module
implementing the behaviour defined by this module.</p><p>The user-facing functions of this module can be called with a custom cache as
the final argument. This is mainly useful if you want to test the cache: by
default, nostrum will use Elixir.Nostrum.Cache.MemberCache.ETS.</p><p>In order to use this cache, you must enable the <code class="inline">:guild_members</code> intent, and you must also enable the <code class="inline">request_guild_members: true</code> configuration option.</p>
    </section>

</div>

  <section id="summary" class="details-list">
    <h1 class="section-heading">
      <a class="hover-link" href="#summary">
        <i class="ri-link-m" aria-hidden="true"></i>
      </a>
      <span class="text">Summary</span>
    </h1>
<div class="summary-callbacks summary">
  <h2>
    <a href="#callbacks">Callbacks</a>
  </h2>

    <div class="summary-row">
      <div class="summary-signature">
        <a href="#c:bulk_create/2" data-no-tooltip="" translate="no">bulk_create(id, members)</a>

      </div>

        <div class="summary-synopsis"><p>Bulk create multiple members in the cache from upstream data.</p></div>

    </div>

    <div class="summary-row">
      <div class="summary-signature">
        <a href="#c:by_guild/1" data-no-tooltip="" translate="no">by_guild(id)</a>

      </div>

        <div class="summary-synopsis"><p>Yield an enumerable of members associated with the given guild ID.</p></div>

    </div>

    <div class="summary-row">
      <div class="summary-signature">
        <a href="#c:by_user/1" data-no-tooltip="" translate="no">by_user(id)</a>

      </div>

        <div class="summary-synopsis"><p>Yield an enumerable of <code class="inline">{guild_id, member}</code> pairs associated with the given user ID.</p></div>

    </div>

    <div class="summary-row">
      <div class="summary-signature">
        <a href="#c:child_spec/1" data-no-tooltip="" translate="no">child_spec(term)</a>

      </div>

        <div class="summary-synopsis"><p>Retrieve the child specification for starting this mapping under a supervisor.</p></div>

    </div>

    <div class="summary-row">
      <div class="summary-signature">
        <a href="#c:create/2" data-no-tooltip="" translate="no">create(id, member)</a>

      </div>

        <div class="summary-synopsis"><p>Add the member for the given guild from upstream data.</p></div>

    </div>

    <div class="summary-row">
      <div class="summary-signature">
        <a href="#c:delete/2" data-no-tooltip="" translate="no">delete(id, user_id)</a>

      </div>

        <div class="summary-synopsis"><p>Remove the given user for the given guild.</p></div>

    </div>

    <div class="summary-row">
      <div class="summary-signature">
        <a href="#c:get/2" data-no-tooltip="" translate="no">get(id, user_id)</a>

      </div>

        <div class="summary-synopsis"><p>Retrieve a member from the cache by guild and user ID.</p></div>

    </div>

    <div class="summary-row">
      <div class="summary-signature">
        <a href="#c:update/2" data-no-tooltip="" translate="no">update(id, member)</a>

      </div>

        <div class="summary-synopsis"><p>Update the given member for the given guild from upstream data.</p></div>

    </div>

    <div class="summary-row">
      <div class="summary-signature">
        <a href="#c:wrap_query/1" data-no-tooltip="" translate="no">wrap_query(function)</a>

      </div>

        <div class="summary-synopsis"><p>A function that should wrap any long-running query operations.</p></div>

    </div>

</div>
<div class="summary-functions summary">
  <h2>
    <a href="#functions">Functions</a>
  </h2>

    <div class="summary-row">
      <div class="summary-signature">
        <a href="#by_guild/1" data-no-tooltip="" translate="no">by_guild(guild_id)</a>

      </div>

        <div class="summary-synopsis"><p>See <a href="Nostrum.Cache.MemberCache.ETS.html#by_guild/1"><code class="inline">Nostrum.Cache.MemberCache.ETS.by_guild/1</code></a>.</p></div>

    </div>

    <div class="summary-row">
      <div class="summary-signature">
        <a href="#by_user/1" data-no-tooltip="" translate="no">by_user(user_id)</a>

      </div>

        <div class="summary-synopsis"><p>See <a href="Nostrum.Cache.MemberCache.ETS.html#by_user/1"><code class="inline">Nostrum.Cache.MemberCache.ETS.by_user/1</code></a>.</p></div>

    </div>

    <div class="summary-row">
      <div class="summary-signature">
        <a href="#fold/4" data-no-tooltip="" translate="no">fold(acc, guild_id, member_reducer, cache \\ Nostrum.Cache.MemberCache.ETS)</a>

      </div>

        <div class="summary-synopsis"><p>Fold (reduce) over members for the given guild ID.</p></div>

    </div>

    <div class="summary-row">
      <div class="summary-signature">
        <a href="#fold_by_user/4" data-no-tooltip="" translate="no">fold_by_user(acc, user_id, member_reducer, cache \\ Nostrum.Cache.MemberCache.ETS)</a>

      </div>

        <div class="summary-synopsis"><p>Reduce over all members cached for the given user ID.</p></div>

    </div>

    <div class="summary-row">
      <div class="summary-signature">
        <a href="#fold_with_users/4" data-no-tooltip="" translate="no">fold_with_users(acc, guild_id, fun, cache \\ Nostrum.Cache.MemberCache.ETS)</a>

      </div>

        <div class="summary-synopsis"><p>Calls <code class="inline">fun</code> on each member and its user on the given guild ID, with the given
accumulator.</p></div>

    </div>

    <div class="summary-row">
      <div class="summary-signature">
        <a href="#get/2" data-no-tooltip="" translate="no">get(guild_id, member_id)</a>

      </div>

        <div class="summary-synopsis"><p>Get a single member on the given guild ID.</p></div>

    </div>

    <div class="summary-row">
      <div class="summary-signature">
        <a href="#get_with_user/3" data-no-tooltip="" translate="no">get_with_user(guild_id, member_id, cache \\ Nostrum.Cache.MemberCache.ETS)</a>

      </div>

        <div class="summary-synopsis"><p>Return a member together with its user via the user cache.</p></div>

    </div>

    <div class="summary-row">
      <div class="summary-signature">
        <a href="#wrap_query/2" data-no-tooltip="" translate="no">wrap_query(cache \\ Nostrum.Cache.MemberCache.ETS, fun)</a>

      </div>

        <div class="summary-synopsis"><p>Call <a href="#c:wrap_query/1"><code class="inline">wrap_query/1</code></a> on the given cache, if implemented.</p></div>

    </div>

</div>

  </section>


  <section id="callbacks" class="details-list">
    <h1 class="section-heading">
      <a class="hover-link" href="#callbacks">
        <i class="ri-link-m" aria-hidden="true"></i>
      </a>
      <span class="text">Callbacks</span>
    </h1>
    <div class="callbacks-list">
<section class="detail" id="c:bulk_create/2">

  <div class="detail-header">
    <a href="#c:bulk_create/2" class="detail-link" data-no-tooltip="" aria-label="Link to this callback">
      <i class="ri-link-m" aria-hidden="true"></i>
    </a>
    <div class="heading-with-actions">
      <h1 class="signature" translate="no">bulk_create(id, members)</h1>

        <span class="note">(since 0.7.0)</span>


        <a href="https://github.com/Kraigie/nostrum/blob/master/lib/nostrum/cache/member_cache.ex#L89" class="icon-action" rel="help" aria-label="View Source">
          <i class="ri-code-s-slash-line" aria-hidden="true"></i>
        </a>

    </div>
  </div>

  <section class="docstring">

      <div class="specs">

          <pre translate="no"><span class="attribute">@callback</span> bulk_create(<a href="Nostrum.Struct.Guild.html#t:id/0">Nostrum.Struct.Guild.id</a>(), members :: [member :: <a href="https://hexdocs.pm/elixir/typespecs.html#basic-types">map</a>()]) :: true</pre>

      </div>

<p>Bulk create multiple members in the cache from upstream data.</p><p>Return value is unused, as we currently do not dispatch a gateway for this.</p>
  </section>
</section>
<section class="detail" id="c:by_guild/1">

  <div class="detail-header">
    <a href="#c:by_guild/1" class="detail-link" data-no-tooltip="" aria-label="Link to this callback">
      <i class="ri-link-m" aria-hidden="true"></i>
    </a>
    <div class="heading-with-actions">
      <h1 class="signature" translate="no">by_guild(id)</h1>

        <span class="note">(since 0.10.0)</span>


        <a href="https://github.com/Kraigie/nostrum/blob/master/lib/nostrum/cache/member_cache.ex#L48" class="icon-action" rel="help" aria-label="View Source">
          <i class="ri-code-s-slash-line" aria-hidden="true"></i>
        </a>

    </div>
  </div>

  <section class="docstring">

      <div class="specs">

          <pre translate="no"><span class="attribute">@callback</span> by_guild(<a href="Nostrum.Struct.Guild.html#t:id/0">Nostrum.Struct.Guild.id</a>()) ::
  <a href="https://hexdocs.pm/elixir/Enumerable.html#t:t/1">Enumerable.t</a>(<a href="Nostrum.Struct.Guild.Member.html#t:t/0">Nostrum.Struct.Guild.Member.t</a>())</pre>

      </div>

<p>Yield an enumerable of members associated with the given guild ID.</p>
  </section>
</section>
<section class="detail" id="c:by_user/1">

  <div class="detail-header">
    <a href="#c:by_user/1" class="detail-link" data-no-tooltip="" aria-label="Link to this callback">
      <i class="ri-link-m" aria-hidden="true"></i>
    </a>
    <div class="heading-with-actions">
      <h1 class="signature" translate="no">by_user(id)</h1>

        <span class="note">(since 0.10.0)</span>


        <a href="https://github.com/Kraigie/nostrum/blob/master/lib/nostrum/cache/member_cache.ex#L42" class="icon-action" rel="help" aria-label="View Source">
          <i class="ri-code-s-slash-line" aria-hidden="true"></i>
        </a>

    </div>
  </div>

  <section class="docstring">

      <div class="specs">

          <pre translate="no"><span class="attribute">@callback</span> by_user(<a href="Nostrum.Struct.User.html#t:id/0">Nostrum.Struct.User.id</a>()) ::
  <a href="https://hexdocs.pm/elixir/Enumerable.html#t:t/1">Enumerable.t</a>({<a href="Nostrum.Struct.Guild.html#t:id/0">Nostrum.Struct.Guild.id</a>(), <a href="Nostrum.Struct.Guild.Member.html#t:t/0">Nostrum.Struct.Guild.Member.t</a>()})</pre>

      </div>

<p>Yield an enumerable of <code class="inline">{guild_id, member}</code> pairs associated with the given user ID.</p><p>Since nostrum does not know when it can stop streaming you results, you have
to wrap calls to this function in <a href="#wrap_query/1"><code class="inline">wrap_query/1</code></a>.</p>
  </section>
</section>
<section class="detail" id="c:child_spec/1">

  <div class="detail-header">
    <a href="#c:child_spec/1" class="detail-link" data-no-tooltip="" aria-label="Link to this callback">
      <i class="ri-link-m" aria-hidden="true"></i>
    </a>
    <div class="heading-with-actions">
      <h1 class="signature" translate="no">child_spec(term)</h1>

        <span class="note">(since 0.7.0)</span>


        <a href="https://github.com/Kraigie/nostrum/blob/master/lib/nostrum/cache/member_cache.ex#L94" class="icon-action" rel="help" aria-label="View Source">
          <i class="ri-code-s-slash-line" aria-hidden="true"></i>
        </a>

    </div>
  </div>

  <section class="docstring">

      <div class="specs">

          <pre translate="no"><span class="attribute">@callback</span> child_spec(<a href="https://hexdocs.pm/elixir/typespecs.html#built-in-types">term</a>()) :: <a href="https://hexdocs.pm/elixir/Supervisor.html#t:child_spec/0">Supervisor.child_spec</a>()</pre>

      </div>

<p>Retrieve the child specification for starting this mapping under a supervisor.</p>
  </section>
</section>
<section class="detail" id="c:create/2">

  <div class="detail-header">
    <a href="#c:create/2" class="detail-link" data-no-tooltip="" aria-label="Link to this callback">
      <i class="ri-link-m" aria-hidden="true"></i>
    </a>
    <div class="heading-with-actions">
      <h1 class="signature" translate="no">create(id, member)</h1>

        <span class="note">(since 0.7.0)</span>


        <a href="https://github.com/Kraigie/nostrum/blob/master/lib/nostrum/cache/member_cache.ex#L55" class="icon-action" rel="help" aria-label="View Source">
          <i class="ri-code-s-slash-line" aria-hidden="true"></i>
        </a>

    </div>
  </div>

  <section class="docstring">

      <div class="specs">

          <pre translate="no"><span class="attribute">@callback</span> create(<a href="Nostrum.Struct.Guild.html#t:id/0">Nostrum.Struct.Guild.id</a>(), member :: <a href="https://hexdocs.pm/elixir/typespecs.html#basic-types">map</a>()) ::
  <a href="Nostrum.Struct.Guild.Member.html#t:t/0">Nostrum.Struct.Guild.Member.t</a>()</pre>

      </div>

<p>Add the member for the given guild from upstream data.</p><p>Return the casted member structure.</p>
  </section>
</section>
<section class="detail" id="c:delete/2">

  <div class="detail-header">
    <a href="#c:delete/2" class="detail-link" data-no-tooltip="" aria-label="Link to this callback">
      <i class="ri-link-m" aria-hidden="true"></i>
    </a>
    <div class="heading-with-actions">
      <h1 class="signature" translate="no">delete(id, user_id)</h1>

        <span class="note">(since 0.7.0)</span>


        <a href="https://github.com/Kraigie/nostrum/blob/master/lib/nostrum/cache/member_cache.ex#L81" class="icon-action" rel="help" aria-label="View Source">
          <i class="ri-code-s-slash-line" aria-hidden="true"></i>
        </a>

    </div>
  </div>

  <section class="docstring">

      <div class="specs">

          <pre translate="no"><span class="attribute">@callback</span> delete(<a href="Nostrum.Struct.Guild.html#t:id/0">Nostrum.Struct.Guild.id</a>(), <a href="Nostrum.Struct.Guild.Member.html#t:user_id/0">Nostrum.Struct.Guild.Member.user_id</a>()) ::
  {<a href="Nostrum.Struct.Guild.html#t:id/0">Nostrum.Struct.Guild.id</a>(), old_member :: <a href="Nostrum.Struct.Guild.Member.html#t:t/0">Nostrum.Struct.Guild.Member.t</a>()}
  | :noop</pre>

      </div>

<p>Remove the given user for the given guild.</p><p>Return the guild ID and old member if the member was cached. Otherwise,
return <code class="inline">:noop</code>.</p>
  </section>
</section>
<section class="detail" id="c:get/2">

  <div class="detail-header">
    <a href="#c:get/2" class="detail-link" data-no-tooltip="" aria-label="Link to this callback">
      <i class="ri-link-m" aria-hidden="true"></i>
    </a>
    <div class="heading-with-actions">
      <h1 class="signature" translate="no">get(id, user_id)</h1>

        <span class="note">(since 0.10.0)</span>


        <a href="https://github.com/Kraigie/nostrum/blob/master/lib/nostrum/cache/member_cache.ex#L33" class="icon-action" rel="help" aria-label="View Source">
          <i class="ri-code-s-slash-line" aria-hidden="true"></i>
        </a>

    </div>
  </div>

  <section class="docstring">

      <div class="specs">

          <pre translate="no"><span class="attribute">@callback</span> get(<a href="Nostrum.Struct.Guild.html#t:id/0">Nostrum.Struct.Guild.id</a>(), <a href="Nostrum.Struct.Guild.Member.html#t:user_id/0">Nostrum.Struct.Guild.Member.user_id</a>()) ::
  {:ok, <a href="Nostrum.Struct.Guild.Member.html#t:t/0">Nostrum.Struct.Guild.Member.t</a>()} | {:error, <a href="https://hexdocs.pm/elixir/typespecs.html#basic-types">atom</a>()}</pre>

      </div>

<p>Retrieve a member from the cache by guild and user ID.</p>
  </section>
</section>
<section class="detail" id="c:update/2">

  <div class="detail-header">
    <a href="#c:update/2" class="detail-link" data-no-tooltip="" aria-label="Link to this callback">
      <i class="ri-link-m" aria-hidden="true"></i>
    </a>
    <div class="heading-with-actions">
      <h1 class="signature" translate="no">update(id, member)</h1>

        <span class="note">(since 0.7.0)</span>


        <a href="https://github.com/Kraigie/nostrum/blob/master/lib/nostrum/cache/member_cache.ex#L72" class="icon-action" rel="help" aria-label="View Source">
          <i class="ri-code-s-slash-line" aria-hidden="true"></i>
        </a>

    </div>
  </div>

  <section class="docstring">

      <div class="specs">

          <pre translate="no"><span class="attribute">@callback</span> update(<a href="Nostrum.Struct.Guild.html#t:id/0">Nostrum.Struct.Guild.id</a>(), member :: <a href="https://hexdocs.pm/elixir/typespecs.html#basic-types">map</a>()) ::
  {<a href="Nostrum.Struct.Guild.html#t:id/0">Nostrum.Struct.Guild.id</a>(),
   old_member :: <a href="Nostrum.Struct.Guild.Member.html#t:t/0">Nostrum.Struct.Guild.Member.t</a>() | nil,
   updated_member :: <a href="Nostrum.Struct.Guild.Member.html#t:t/0">Nostrum.Struct.Guild.Member.t</a>()}</pre>

      </div>

<p>Update the given member for the given guild from upstream data.</p><p>Return the guild ID that was updated, the old cached member (if the member
was known to the cache), and the updated member.</p><h2 id="c:update/2-note-regarding-intents" class="section-heading">
  <a href="#c:update/2-note-regarding-intents" class="hover-link">
    <i class="ri-link-m" aria-hidden="true"></i>
  </a>
  <span class="text">Note regarding intents</span>
</h2>
<p>Even if the required intents to receive <code class="inline">GUILD_MEMBER_UPDATE</code> events are
disabled to a point where we do not receive guild creation events, it is
still possible to receive the event for our own user. An example of this can
be found in <a href="https://github.com/Kraigie/nostrum/issues/293">issue
#293</a>. Note that the issue
predates the modern nostrum caching infrastructure.</p>
  </section>
</section>
<section class="detail" id="c:wrap_query/1">

  <div class="detail-header">
    <a href="#c:wrap_query/1" class="detail-link" data-no-tooltip="" aria-label="Link to this callback">
      <i class="ri-link-m" aria-hidden="true"></i>
    </a>
    <div class="heading-with-actions">
      <h1 class="signature" translate="no">wrap_query(function)</h1>

        <span class="note">(since 0.10.0)</span>

        <span class="note">(optional)</span>


        <a href="https://github.com/Kraigie/nostrum/blob/master/lib/nostrum/cache/member_cache.ex#L107" class="icon-action" rel="help" aria-label="View Source">
          <i class="ri-code-s-slash-line" aria-hidden="true"></i>
        </a>

    </div>
  </div>

  <section class="docstring">

      <div class="specs">

          <pre translate="no"><span class="attribute">@callback</span> wrap_query((-&gt; result)) :: result when result: <a href="https://hexdocs.pm/elixir/typespecs.html#built-in-types">term</a>()</pre>

      </div>

<p>A function that should wrap any long-running query operations.</p><p>If you implement a cache that is backed by a database and want to perform
cleanup and teardown actions such as opening and closing connections,
managing transactions and so on, you want to implement this function. nostrum
will then effectively call <code class="inline">wrap_query(fn -&gt; ... end)</code>.</p><p>If your cache does not need any wrapping, you can omit this.</p>
  </section>
</section>

    </div>
  </section>

  <section id="functions" class="details-list">
    <h1 class="section-heading">
      <a class="hover-link" href="#functions">
        <i class="ri-link-m" aria-hidden="true"></i>
      </a>
      <span class="text">Functions</span>
    </h1>
    <div class="functions-list">
<section class="detail" id="by_guild/1">

  <div class="detail-header">
    <a href="#by_guild/1" class="detail-link" data-no-tooltip="" aria-label="Link to this function">
      <i class="ri-link-m" aria-hidden="true"></i>
    </a>
    <div class="heading-with-actions">
      <h1 class="signature" translate="no">by_guild(guild_id)</h1>

        <span class="note">(since 0.7.0)</span>


        <a href="https://github.com/Kraigie/nostrum/blob/master/lib/nostrum/cache/member_cache.ex#L253" class="icon-action" rel="help" aria-label="View Source">
          <i class="ri-code-s-slash-line" aria-hidden="true"></i>
        </a>

    </div>
  </div>

  <section class="docstring">

<p>See <a href="Nostrum.Cache.MemberCache.ETS.html#by_guild/1"><code class="inline">Nostrum.Cache.MemberCache.ETS.by_guild/1</code></a>.</p>
  </section>
</section>
<section class="detail" id="by_user/1">

  <div class="detail-header">
    <a href="#by_user/1" class="detail-link" data-no-tooltip="" aria-label="Link to this function">
      <i class="ri-link-m" aria-hidden="true"></i>
    </a>
    <div class="heading-with-actions">
      <h1 class="signature" translate="no">by_user(user_id)</h1>

        <span class="note">(since 0.7.0)</span>


        <a href="https://github.com/Kraigie/nostrum/blob/master/lib/nostrum/cache/member_cache.ex#L254" class="icon-action" rel="help" aria-label="View Source">
          <i class="ri-code-s-slash-line" aria-hidden="true"></i>
        </a>

    </div>
  </div>

  <section class="docstring">

<p>See <a href="Nostrum.Cache.MemberCache.ETS.html#by_user/1"><code class="inline">Nostrum.Cache.MemberCache.ETS.by_user/1</code></a>.</p>
  </section>
</section>
<section class="detail" id="fold/4">

    <span id="fold/3"></span>

  <div class="detail-header">
    <a href="#fold/4" class="detail-link" data-no-tooltip="" aria-label="Link to this function">
      <i class="ri-link-m" aria-hidden="true"></i>
    </a>
    <div class="heading-with-actions">
      <h1 class="signature" translate="no">fold(acc, guild_id, member_reducer, cache \\ Nostrum.Cache.MemberCache.ETS)</h1>

        <span class="note">(since 0.8.0)</span>


        <a href="https://github.com/Kraigie/nostrum/blob/master/lib/nostrum/cache/member_cache.ex#L183" class="icon-action" rel="help" aria-label="View Source">
          <i class="ri-code-s-slash-line" aria-hidden="true"></i>
        </a>

    </div>
  </div>

  <section class="docstring">

      <div class="specs">

          <pre translate="no"><span class="attribute">@spec</span> fold(
  acc,
  <a href="Nostrum.Struct.Guild.html#t:id/0">Nostrum.Struct.Guild.id</a>(),
  (<a href="Nostrum.Struct.Guild.Member.html#t:t/0">Nostrum.Struct.Guild.Member.t</a>(), acc -&gt; acc),
  <a href="https://hexdocs.pm/elixir/typespecs.html#built-in-types">module</a>()
) ::
  acc
when acc: <a href="https://hexdocs.pm/elixir/typespecs.html#built-in-types">term</a>()</pre>

      </div>

<p>Fold (reduce) over members for the given guild ID.</p><h2 id="fold/4-parameters" class="section-heading">
  <a href="#fold/4-parameters" class="hover-link">
    <i class="ri-link-m" aria-hidden="true"></i>
  </a>
  <span class="text">Parameters</span>
</h2>
<ul><li><code class="inline">acc</code>: The initial accumulator. Also returned if no guild members were found.</li><li><code class="inline">guild_id</code>: The guild for which to reduce members.</li><li><code class="inline">member_reducer</code>: Called for every element in the result. Takes a pair
in the form <code class="inline">(member, acc)</code>, and must return the updated accumulator.</li></ul><h2 id="fold/4-return-value" class="section-heading">
  <a href="#fold/4-return-value" class="hover-link">
    <i class="ri-link-m" aria-hidden="true"></i>
  </a>
  <span class="text">Return value</span>
</h2>
<p>Returns the resulting accumulator via <code class="inline">fun</code>. Returns <code class="inline">acc</code> unchanged if no
results were found.</p><h2 id="fold/4-raises" class="section-heading">
  <a href="#fold/4-raises" class="hover-link">
    <i class="ri-link-m" aria-hidden="true"></i>
  </a>
  <span class="text">Raises</span>
</h2>
<p>Fails when <a href="#c:by_guild/1"><code class="inline">by_guild/1</code></a> of the selected cache returns an error.</p>
  </section>
</section>
<section class="detail" id="fold_by_user/4">

    <span id="fold_by_user/3"></span>

  <div class="detail-header">
    <a href="#fold_by_user/4" class="detail-link" data-no-tooltip="" aria-label="Link to this function">
      <i class="ri-link-m" aria-hidden="true"></i>
    </a>
    <div class="heading-with-actions">
      <h1 class="signature" translate="no">fold_by_user(acc, user_id, member_reducer, cache \\ Nostrum.Cache.MemberCache.ETS)</h1>

        <span class="note">(since 0.8.0)</span>


        <a href="https://github.com/Kraigie/nostrum/blob/master/lib/nostrum/cache/member_cache.ex#L150" class="icon-action" rel="help" aria-label="View Source">
          <i class="ri-code-s-slash-line" aria-hidden="true"></i>
        </a>

    </div>
  </div>

  <section class="docstring">

      <div class="specs">

          <pre translate="no"><span class="attribute">@spec</span> fold_by_user(
  acc,
  <a href="Nostrum.Struct.Guild.Member.html#t:user_id/0">Nostrum.Struct.Guild.Member.user_id</a>(),
  ({<a href="Nostrum.Struct.Guild.html#t:id/0">Nostrum.Struct.Guild.id</a>(), <a href="Nostrum.Struct.Guild.Member.html#t:t/0">Nostrum.Struct.Guild.Member.t</a>()}, acc -&gt; acc),
  <a href="https://hexdocs.pm/elixir/typespecs.html#built-in-types">module</a>()
) :: acc
when acc: <a href="https://hexdocs.pm/elixir/typespecs.html#built-in-types">term</a>()</pre>

      </div>

<p>Reduce over all members cached for the given user ID.</p><p>The members will be returned alongside their guild ID as a pair in the
format <code class="inline">{guild_id, member}</code>.</p><h2 id="fold_by_user/4-raises" class="section-heading">
  <a href="#fold_by_user/4-raises" class="hover-link">
    <i class="ri-link-m" aria-hidden="true"></i>
  </a>
  <span class="text">Raises</span>
</h2>
<p>Fails when <a href="#c:by_user/1"><code class="inline">by_user/1</code></a> of the selected cache returns an error.</p>
  </section>
</section>
<section class="detail" id="fold_with_users/4">

    <span id="fold_with_users/3"></span>

  <div class="detail-header">
    <a href="#fold_with_users/4" class="detail-link" data-no-tooltip="" aria-label="Link to this function">
      <i class="ri-link-m" aria-hidden="true"></i>
    </a>
    <div class="heading-with-actions">
      <h1 class="signature" translate="no">fold_with_users(acc, guild_id, fun, cache \\ Nostrum.Cache.MemberCache.ETS)</h1>

        <span class="note">(since 0.8.0)</span>


        <a href="https://github.com/Kraigie/nostrum/blob/master/lib/nostrum/cache/member_cache.ex#L219" class="icon-action" rel="help" aria-label="View Source">
          <i class="ri-code-s-slash-line" aria-hidden="true"></i>
        </a>

    </div>
  </div>

  <section class="docstring">

      <div class="specs">

          <pre translate="no"><span class="attribute">@spec</span> fold_with_users(
  acc,
  <a href="Nostrum.Struct.Guild.html#t:id/0">Nostrum.Struct.Guild.id</a>(),
  ({<a href="Nostrum.Struct.Guild.Member.html#t:t/0">Nostrum.Struct.Guild.Member.t</a>(), <a href="Nostrum.Struct.User.html#t:t/0">Nostrum.Struct.User.t</a>()}, acc -&gt; acc),
  <a href="https://hexdocs.pm/elixir/typespecs.html#built-in-types">module</a>()
) :: acc
when acc: <a href="https://hexdocs.pm/elixir/typespecs.html#built-in-types">term</a>()</pre>

      </div>

<p>Calls <code class="inline">fun</code> on each member and its user on the given guild ID, with the given
accumulator.</p><h2 id="fold_with_users/4-parameters" class="section-heading">
  <a href="#fold_with_users/4-parameters" class="hover-link">
    <i class="ri-link-m" aria-hidden="true"></i>
  </a>
  <span class="text">Parameters</span>
</h2>
<ul><li><code class="inline">acc</code> (<code class="inline">term()</code>): The initial accumulator. Also returned if no guild
members were found.</li><li><code class="inline">guild_id</code> (<a href="Nostrum.Struct.Guild.html#t:id/0"><code class="inline">Nostrum.Struct.Guild.id/0</code></a>): The guild for which to reduce members.</li><li><code class="inline">fun</code> (<code class="inline">function()</code>): Called for every element in the result. Takes a pair
in the form <code class="inline">({member, user}, acc)</code>, and must return the updated accumulator.</li></ul><h2 id="fold_with_users/4-return-value" class="section-heading">
  <a href="#fold_with_users/4-return-value" class="hover-link">
    <i class="ri-link-m" aria-hidden="true"></i>
  </a>
  <span class="text">Return value</span>
</h2>
<p>Returns the resulting accumulator via <code class="inline">fun</code>. Returns <code class="inline">acc</code> unchanged if no
results were found.</p><p>If the user for a guild member is not found, the member <em>and</em> user won't be
present in the result. Barring a bug in nostrum's caching, this should never
happen in practice.</p><h2 id="fold_with_users/4-raises" class="section-heading">
  <a href="#fold_with_users/4-raises" class="hover-link">
    <i class="ri-link-m" aria-hidden="true"></i>
  </a>
  <span class="text">Raises</span>
</h2>
<p>Fails when <a href="#by_guild/1"><code class="inline">by_guild/1</code></a> of the selected cache returns an error.</p>
  </section>
</section>
<section class="detail" id="get/2">

  <div class="detail-header">
    <a href="#get/2" class="detail-link" data-no-tooltip="" aria-label="Link to this function">
      <i class="ri-link-m" aria-hidden="true"></i>
    </a>
    <div class="heading-with-actions">
      <h1 class="signature" translate="no">get(guild_id, member_id)</h1>

        <span class="note">(since 0.7.0)</span>


        <a href="https://github.com/Kraigie/nostrum/blob/master/lib/nostrum/cache/member_cache.ex#L159" class="icon-action" rel="help" aria-label="View Source">
          <i class="ri-code-s-slash-line" aria-hidden="true"></i>
        </a>

    </div>
  </div>

  <section class="docstring">

      <div class="specs">

          <pre translate="no"><span class="attribute">@spec</span> get(<a href="Nostrum.Struct.Guild.html#t:id/0">Nostrum.Struct.Guild.id</a>(), <a href="Nostrum.Struct.Guild.Member.html#t:user_id/0">Nostrum.Struct.Guild.Member.user_id</a>()) ::
  {:ok, <a href="Nostrum.Struct.Guild.Member.html#t:t/0">Nostrum.Struct.Guild.Member.t</a>()} | {:error, <a href="https://hexdocs.pm/elixir/typespecs.html#basic-types">atom</a>()}</pre>

      </div>

<p>Get a single member on the given guild ID.</p>
  </section>
</section>
<section class="detail" id="get_with_user/3">

    <span id="get_with_user/2"></span>

  <div class="detail-header">
    <a href="#get_with_user/3" class="detail-link" data-no-tooltip="" aria-label="Link to this function">
      <i class="ri-link-m" aria-hidden="true"></i>
    </a>
    <div class="heading-with-actions">
      <h1 class="signature" translate="no">get_with_user(guild_id, member_id, cache \\ Nostrum.Cache.MemberCache.ETS)</h1>

        <span class="note">(since 0.7.0)</span>


        <a href="https://github.com/Kraigie/nostrum/blob/master/lib/nostrum/cache/member_cache.ex#L118" class="icon-action" rel="help" aria-label="View Source">
          <i class="ri-code-s-slash-line" aria-hidden="true"></i>
        </a>

    </div>
  </div>

  <section class="docstring">

      <div class="specs">

          <pre translate="no"><span class="attribute">@spec</span> get_with_user(
  <a href="Nostrum.Struct.Guild.html#t:id/0">Nostrum.Struct.Guild.id</a>(),
  <a href="Nostrum.Struct.Guild.Member.html#t:user_id/0">Nostrum.Struct.Guild.Member.user_id</a>(),
  <a href="https://hexdocs.pm/elixir/typespecs.html#built-in-types">module</a>()
) ::
  {<a href="Nostrum.Struct.Guild.Member.html#t:t/0">Nostrum.Struct.Guild.Member.t</a>(), <a href="Nostrum.Struct.User.html#t:t/0">Nostrum.Struct.User.t</a>() | nil} | nil</pre>

      </div>

<p>Return a member together with its user via the user cache.</p>
  </section>
</section>
<section class="detail" id="wrap_query/2">

  <div class="detail-header">
    <a href="#wrap_query/2" class="detail-link" data-no-tooltip="" aria-label="Link to this function">
      <i class="ri-link-m" aria-hidden="true"></i>
    </a>
    <div class="heading-with-actions">
      <h1 class="signature" translate="no">wrap_query(cache \\ Nostrum.Cache.MemberCache.ETS, fun)</h1>

        <span class="note">(since 0.10.0)</span>


        <a href="https://github.com/Kraigie/nostrum/blob/master/lib/nostrum/cache/member_cache.ex#L245" class="icon-action" rel="help" aria-label="View Source">
          <i class="ri-code-s-slash-line" aria-hidden="true"></i>
        </a>

    </div>
  </div>

  <section class="docstring">

      <div class="specs">

          <pre translate="no"><span class="attribute">@spec</span> wrap_query(<a href="https://hexdocs.pm/elixir/typespecs.html#built-in-types">module</a>(), (-&gt; result)) :: result when result: <a href="https://hexdocs.pm/elixir/typespecs.html#built-in-types">term</a>()</pre>

      </div>

<p>Call <a href="#c:wrap_query/1"><code class="inline">wrap_query/1</code></a> on the given cache, if implemented.</p><p>If no cache is given, calls out to the default cache.</p>
  </section>
</section>

    </div>
  </section>

    <footer class="footer">
      <p>

          <span class="line">
            <a href="https://hex.pm/packages/nostrum/0.11.0-dev" class="footer-hex-package">Hex Package</a>

            <a href="https://preview.hex.pm/preview/nostrum/0.11.0-dev">Hex Preview</a>

          </span>

        <span class="line">
          <button class="a-main footer-button display-quick-switch" title="Search HexDocs packages">
            Search HexDocs
          </button>

            <a href="nostrum.epub" title="ePub version">
              Download ePub version
            </a>

        </span>
      </p>

      <p class="built-using">
        Built using
        <a href="https://github.com/elixir-lang/ex_doc" title="ExDoc" target="_blank" rel="help noopener" translate="no">ExDoc</a> (v0.37.0) for the

          <a href="https://elixir-lang.org" title="Elixir" target="_blank" translate="no">Elixir programming language</a>

      </p>

    </footer>
  </div>
</main>
</div>

  </body>
</html>
