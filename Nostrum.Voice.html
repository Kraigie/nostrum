<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="generator" content="ExDoc v0.37.0">
    <meta name="project" content="nostrum v0.11.0-dev">


    <title>Nostrum.Voice â€” nostrum v0.11.0-dev</title>

    <link rel="stylesheet" href="dist/html-elixir-6X3L5KMG.css" />

    <script defer src="dist/sidebar_items-35D5AD02.js"></script>
    <script defer src="docs_config.js"></script>
    <script defer src="dist/html-6VTPNSGQ.js"></script>

  </head>
  <body>
    <script>(()=>{var t="ex_doc:settings",e="dark";var o="dark",s="light";var E="sidebar_state",n="closed";var r="sidebar_width";var a="sidebar-open";var i=new URLSearchParams(window.location.search),S=i.get("theme")||JSON.parse(localStorage.getItem(t)||"{}").theme;(S===o||S!==s&&window.matchMedia("(prefers-color-scheme: dark)").matches)&&document.body.classList.add(e);var d=sessionStorage.getItem(E),A=d!==n&&!window.matchMedia(`screen and (max-width: ${768}px)`).matches;document.body.classList.toggle(a,A);var c=sessionStorage.getItem(r);c&&document.body.style.setProperty("--sidebarWidth",`${c}px`);var p=/(Macintosh|iPhone|iPad|iPod)/.test(window.navigator.userAgent);document.documentElement.classList.toggle("apple-os",p);})();
</script>

<div class="body-wrapper">

<button id="sidebar-menu" class="sidebar-button sidebar-toggle" aria-label="toggle sidebar" aria-controls="sidebar">
  <i class="ri-menu-line ri-lg" title="Collapse/expand sidebar"></i>
</button>

<nav id="sidebar" class="sidebar">

  <div class="sidebar-header">
    <div class="sidebar-projectInfo">

        <a href="https://github.com/Kraigie/nostrum" class="sidebar-projectImage">
          <img src="assets/logo.png" alt="nostrum" />
        </a>

      <div>
        <a href="https://github.com/Kraigie/nostrum" class="sidebar-projectName" translate="no">
nostrum
        </a>
        <div class="sidebar-projectVersion" translate="no">
          v0.11.0-dev
        </div>
      </div>
    </div>
    <ul id="sidebar-list-nav" class="sidebar-list-nav" role="tablist" data-extras=""></ul>
  </div>
</nav>

<output role="status" id="toast"></output>

<main class="content page-module" id="main" data-type="modules">
  <div id="content" class="content-inner">
    <div class="top-search">
      <div class="search-settings">
        <form class="search-bar" action="search.html">
          <label class="search-label">
            <span class="sr-only">Search documentation of nostrum</span>
            <input name="q" type="text" class="search-input" placeholder="Press / to search" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" />
          </label>
          <button type="submit" class="search-button" aria-label="Submit Search" tabindex="-1">
            <i class="ri-search-2-line ri-lg" aria-hidden="true"></i>
          </button>
          <button type="button" tabindex="-1" class="search-close-button" aria-hidden="true">
            <i class="ri-close-line ri-lg" title="Cancel search"></i>
          </button>
        </form>
        <div class="autocomplete">
        </div>
        <button class="icon-settings display-settings">
          <i class="ri-settings-3-line"></i>
          <span class="sr-only">Settings</span>
        </button>
      </div>
    </div>

<div id="top-content">
  <div class="heading-with-actions top-heading">
    <h1>
      <span translate="no">Nostrum.Voice</span> 
      <small class="app-vsn" translate="no">(nostrum v0.11.0-dev)</small>

    </h1>

      <a href="https://github.com/Kraigie/nostrum/blob/master/lib/nostrum/voice.ex#L1" title="View Source" class="icon-action" rel="help">
        <i class="ri-code-s-slash-line" aria-hidden="true"></i>
        <span class="sr-only">View Source</span>
      </a>

  </div>


    <section id="moduledoc">
<p>Interface for playing and listening to audio through Discord's voice channels.</p><h1>Using Discord Voice Channels</h1><p>To play sound in Discord with Nostrum, you'll need <code class="inline">ffmpeg</code> to be installed.
If you don't have the executable <code class="inline">ffmpeg</code> in the path, the absolute path may
be configured through config keys <code class="inline">:nostrum, :ffmpeg</code>. If you don't want to use
ffmpeg, read on to the next section.</p><p>A bot may be connected to at most one voice channel per guild. For this reason,
most of the functions in this module take a guild id, and the resulting action
will be performed in the given guild's voice channel that the bot is connected to.</p><p>The primary Discord gateway responsible for all text based communication relies on
one websocket connection per shard, where small bots typically only have one shard.
The Discord voice gateways work by establishing a websocket connection per guild/channel.
After some handshaking on this connection, audio data can be sent over UDP/RTP. Behind
the scenes the voice websocket connections are implemented nearly the same way the main
shard websocket connections are, and require no developer intervention.</p><p>In addition to playing audio, listening to incoming audio is supported through the
functions <a href="#listen/3"><code class="inline">listen/3</code></a> and <a href="#start_listen_async/1"><code class="inline">start_listen_async/1</code></a>.</p><h2 id="module-voice-without-ffmpeg" class="section-heading">
  <a href="#module-voice-without-ffmpeg" class="hover-link">
    <i class="ri-link-m" aria-hidden="true"></i>
  </a>
  <span class="text">Voice Without FFmpeg</span>
</h2>
<p>If you wish to BYOE (Bring Your Own Encoder), there are a few options.</p><ul><li>Use <code class="inline">:raw</code> as <code class="inline">type</code> for <a href="#play/4"><code class="inline">play/4</code></a><ul><li>Provide the complete list of opus frames as the input</li></ul></li><li>Use <code class="inline">:raw_s</code> as <code class="inline">type</code> for <a href="#play/4"><code class="inline">play/4</code></a><ul><li>Provide a stateful enumerable of opus frames as input (think GenServer wrapped in <a href="https://hexdocs.pm/elixir/Stream.html#unfold/2"><code class="inline">Stream.unfold/2</code></a>)</li></ul></li><li>Use lower level functions to send opus frames at your leisure<ul><li>Send packets on your own time using <a href="#send_frames/2"><code class="inline">send_frames/2</code></a></li></ul></li></ul><h1>Voice example</h1><p>The following example bot plays audio through voice channels:</p><pre><code class="makeup elixir" translate="no"><span class="c1"># Sourced from examples/audio_player_example.ex</span><span class="w">
</span><span class="c1"># This file can be placed somewhere in ./lib, and it can be started</span><span class="w">
</span><span class="c1"># by running iex -S mix then calling AudioPlayerSupervisor.start_link([]).</span><span class="w">
</span><span class="kd">defmodule</span><span class="w"> </span><span class="nc">AudioPlayerSupervisor</span><span class="w"> </span><span class="k" data-group-id="3236272755-1">do</span><span class="w">
  </span><span class="kn">use</span><span class="w"> </span><span class="nc">Supervisor</span><span class="w">

  </span><span class="kd">def</span><span class="w"> </span><span class="nf">start_link</span><span class="p" data-group-id="3236272755-2">(</span><span class="n">args</span><span class="p" data-group-id="3236272755-2">)</span><span class="w"> </span><span class="k" data-group-id="3236272755-3">do</span><span class="w">
    </span><span class="nc">Supervisor</span><span class="o">.</span><span class="n">start_link</span><span class="p" data-group-id="3236272755-4">(</span><span class="bp">__MODULE__</span><span class="p">,</span><span class="w"> </span><span class="n">args</span><span class="p">,</span><span class="w"> </span><span class="ss">name</span><span class="p">:</span><span class="w"> </span><span class="bp">__MODULE__</span><span class="p" data-group-id="3236272755-4">)</span><span class="w">
  </span><span class="k" data-group-id="3236272755-3">end</span><span class="w">

  </span><span class="na">@impl</span><span class="w"> </span><span class="no">true</span><span class="w">
  </span><span class="kd">def</span><span class="w"> </span><span class="nf">init</span><span class="p" data-group-id="3236272755-5">(</span><span class="c">_init_arg</span><span class="p" data-group-id="3236272755-5">)</span><span class="w"> </span><span class="k" data-group-id="3236272755-6">do</span><span class="w">
    </span><span class="n">bot_options</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p" data-group-id="3236272755-7">%{</span><span class="w">
      </span><span class="ss">consumer</span><span class="p">:</span><span class="w"> </span><span class="nc">AudioPlayerConsumer</span><span class="p">,</span><span class="w">
      </span><span class="ss">intents</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="3236272755-8">[</span><span class="ss">:direct_messages</span><span class="p">,</span><span class="w"> </span><span class="ss">:guild_messages</span><span class="p">,</span><span class="w"> </span><span class="ss">:guild_voice_states</span><span class="p">,</span><span class="w"> </span><span class="ss">:message_content</span><span class="p" data-group-id="3236272755-8">]</span><span class="p">,</span><span class="w">
      </span><span class="ss">wrapped_token</span><span class="p">:</span><span class="w"> </span><span class="k" data-group-id="3236272755-9">fn</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="nc">System</span><span class="o">.</span><span class="n">fetch_env!</span><span class="p" data-group-id="3236272755-10">(</span><span class="s">&quot;BOT_TOKEN&quot;</span><span class="p" data-group-id="3236272755-10">)</span><span class="w"> </span><span class="k" data-group-id="3236272755-9">end</span><span class="w">
    </span><span class="p" data-group-id="3236272755-7">}</span><span class="w">

    </span><span class="n">children</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p" data-group-id="3236272755-11">[</span><span class="w">
      </span><span class="p" data-group-id="3236272755-12">{</span><span class="nc">Nostrum.Bot</span><span class="p">,</span><span class="w"> </span><span class="n">bot_options</span><span class="p" data-group-id="3236272755-12">}</span><span class="w">
    </span><span class="p" data-group-id="3236272755-11">]</span><span class="w">

    </span><span class="nc">Supervisor</span><span class="o">.</span><span class="n">init</span><span class="p" data-group-id="3236272755-13">(</span><span class="n">children</span><span class="p">,</span><span class="w"> </span><span class="ss">strategy</span><span class="p">:</span><span class="w"> </span><span class="ss">:one_for_one</span><span class="p" data-group-id="3236272755-13">)</span><span class="w">
  </span><span class="k" data-group-id="3236272755-6">end</span><span class="w">
</span><span class="k" data-group-id="3236272755-1">end</span><span class="w">

</span><span class="kd">defmodule</span><span class="w"> </span><span class="nc">AudioPlayerConsumer</span><span class="w"> </span><span class="k" data-group-id="3236272755-14">do</span><span class="w">
  </span><span class="na">@behaviour</span><span class="w"> </span><span class="nc">Nostrum.Consumer</span><span class="w">

  </span><span class="kn">alias</span><span class="w"> </span><span class="nc">Nostrum.Api.ApplicationCommand</span><span class="w">
  </span><span class="kn">alias</span><span class="w"> </span><span class="nc">Nostrum.Api.Interaction</span><span class="w">
  </span><span class="kn">alias</span><span class="w"> </span><span class="nc">Nostrum.Cache.GuildCache</span><span class="w">
  </span><span class="kn">alias</span><span class="w"> </span><span class="nc">Nostrum.Voice</span><span class="w">

  </span><span class="kn">require</span><span class="w"> </span><span class="nc">Logger</span><span class="w">

  </span><span class="c1"># Soundcloud link will be fed through youtube-dl</span><span class="w">
  </span><span class="na">@soundcloud_url</span><span class="w"> </span><span class="s">&quot;https://soundcloud.com/fyre-brand/level-up&quot;</span><span class="w">
  </span><span class="c1"># Audio file will be fed directly to ffmpeg</span><span class="w">
  </span><span class="na">@nut_file_url</span><span class="w"> </span><span class="s">&quot;https://brandthill.com/files/nut.wav&quot;</span><span class="w">

  </span><span class="c1"># Compile-time helper for defining Discord Application Command options</span><span class="w">
  </span><span class="n">opt</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k" data-group-id="3236272755-15">fn</span><span class="w"> </span><span class="n">type</span><span class="p">,</span><span class="w"> </span><span class="n">name</span><span class="p">,</span><span class="w"> </span><span class="n">desc</span><span class="p">,</span><span class="w"> </span><span class="n">opts</span><span class="w"> </span><span class="o">-&gt;</span><span class="w">
    </span><span class="p" data-group-id="3236272755-16">%{</span><span class="ss">type</span><span class="p">:</span><span class="w"> </span><span class="n">type</span><span class="p">,</span><span class="w"> </span><span class="ss">name</span><span class="p">:</span><span class="w"> </span><span class="n">name</span><span class="p">,</span><span class="w"> </span><span class="ss">description</span><span class="p">:</span><span class="w"> </span><span class="n">desc</span><span class="p" data-group-id="3236272755-16">}</span><span class="w">
    </span><span class="o">|&gt;</span><span class="w"> </span><span class="nc">Map</span><span class="o">.</span><span class="n">merge</span><span class="p" data-group-id="3236272755-17">(</span><span class="nc">Enum</span><span class="o">.</span><span class="n">into</span><span class="p" data-group-id="3236272755-18">(</span><span class="n">opts</span><span class="p">,</span><span class="w"> </span><span class="p" data-group-id="3236272755-19">%{</span><span class="p" data-group-id="3236272755-19">}</span><span class="p" data-group-id="3236272755-18">)</span><span class="p" data-group-id="3236272755-17">)</span><span class="w">
  </span><span class="k" data-group-id="3236272755-15">end</span><span class="w">

  </span><span class="na">@play_opts</span><span class="w"> </span><span class="p" data-group-id="3236272755-20">[</span><span class="w">
    </span><span class="n">opt</span><span class="o">.</span><span class="p" data-group-id="3236272755-21">(</span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;song&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;Play a song&quot;</span><span class="p">,</span><span class="w"> </span><span class="p" data-group-id="3236272755-22">[</span><span class="p" data-group-id="3236272755-22">]</span><span class="p" data-group-id="3236272755-21">)</span><span class="p">,</span><span class="w">
    </span><span class="n">opt</span><span class="o">.</span><span class="p" data-group-id="3236272755-23">(</span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;nut&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;Play a nut sound&quot;</span><span class="p">,</span><span class="w"> </span><span class="p" data-group-id="3236272755-24">[</span><span class="p" data-group-id="3236272755-24">]</span><span class="p" data-group-id="3236272755-23">)</span><span class="p">,</span><span class="w">
    </span><span class="n">opt</span><span class="o">.</span><span class="p" data-group-id="3236272755-25">(</span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;file&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;Play a file&quot;</span><span class="p">,</span><span class="w"> </span><span class="ss">options</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="3236272755-26">[</span><span class="n">opt</span><span class="o">.</span><span class="p" data-group-id="3236272755-27">(</span><span class="mi">3</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;url&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;File URL to play&quot;</span><span class="p">,</span><span class="w"> </span><span class="ss">required</span><span class="p">:</span><span class="w"> </span><span class="no">true</span><span class="p" data-group-id="3236272755-27">)</span><span class="p" data-group-id="3236272755-26">]</span><span class="p" data-group-id="3236272755-25">)</span><span class="p">,</span><span class="w">
    </span><span class="n">opt</span><span class="o">.</span><span class="p" data-group-id="3236272755-28">(</span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;url&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;Play a URL from a common service&quot;</span><span class="p">,</span><span class="w">
      </span><span class="ss">options</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="3236272755-29">[</span><span class="n">opt</span><span class="o">.</span><span class="p" data-group-id="3236272755-30">(</span><span class="mi">3</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;url&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;URL to play&quot;</span><span class="p">,</span><span class="w"> </span><span class="ss">required</span><span class="p">:</span><span class="w"> </span><span class="no">true</span><span class="p" data-group-id="3236272755-30">)</span><span class="p" data-group-id="3236272755-29">]</span><span class="w">
    </span><span class="p" data-group-id="3236272755-28">)</span><span class="w">
  </span><span class="p" data-group-id="3236272755-20">]</span><span class="w">

  </span><span class="na">@commands</span><span class="w"> </span><span class="p" data-group-id="3236272755-31">[</span><span class="w">
    </span><span class="p" data-group-id="3236272755-32">{</span><span class="s">&quot;summon&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;Summon bot to your voice channel&quot;</span><span class="p">,</span><span class="w"> </span><span class="p" data-group-id="3236272755-33">[</span><span class="p" data-group-id="3236272755-33">]</span><span class="p" data-group-id="3236272755-32">}</span><span class="p">,</span><span class="w">
    </span><span class="p" data-group-id="3236272755-34">{</span><span class="s">&quot;leave&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;Tell bot to leave your voice channel&quot;</span><span class="p">,</span><span class="w"> </span><span class="p" data-group-id="3236272755-35">[</span><span class="p" data-group-id="3236272755-35">]</span><span class="p" data-group-id="3236272755-34">}</span><span class="p">,</span><span class="w">
    </span><span class="p" data-group-id="3236272755-36">{</span><span class="s">&quot;play&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;Play a sound&quot;</span><span class="p">,</span><span class="w"> </span><span class="na">@play_opts</span><span class="p" data-group-id="3236272755-36">}</span><span class="p">,</span><span class="w">
    </span><span class="p" data-group-id="3236272755-37">{</span><span class="s">&quot;stop&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;Stop the playing sound&quot;</span><span class="p">,</span><span class="w"> </span><span class="p" data-group-id="3236272755-38">[</span><span class="p" data-group-id="3236272755-38">]</span><span class="p" data-group-id="3236272755-37">}</span><span class="p">,</span><span class="w">
    </span><span class="p" data-group-id="3236272755-39">{</span><span class="s">&quot;pause&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;Pause the playing sound&quot;</span><span class="p">,</span><span class="w"> </span><span class="p" data-group-id="3236272755-40">[</span><span class="p" data-group-id="3236272755-40">]</span><span class="p" data-group-id="3236272755-39">}</span><span class="p">,</span><span class="w">
    </span><span class="p" data-group-id="3236272755-41">{</span><span class="s">&quot;resume&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;Resume the paused sound&quot;</span><span class="p">,</span><span class="w"> </span><span class="p" data-group-id="3236272755-42">[</span><span class="p" data-group-id="3236272755-42">]</span><span class="p" data-group-id="3236272755-41">}</span><span class="w">
  </span><span class="p" data-group-id="3236272755-31">]</span><span class="w">

  </span><span class="kd">def</span><span class="w"> </span><span class="nf">get_voice_channel_of_interaction</span><span class="p" data-group-id="3236272755-43">(</span><span class="p" data-group-id="3236272755-44">%{</span><span class="ss">guild_id</span><span class="p">:</span><span class="w"> </span><span class="n">guild_id</span><span class="p">,</span><span class="w"> </span><span class="ss">user</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="3236272755-45">%{</span><span class="ss">id</span><span class="p">:</span><span class="w"> </span><span class="n">user_id</span><span class="p" data-group-id="3236272755-45">}</span><span class="p" data-group-id="3236272755-44">}</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="c">_interaction</span><span class="p" data-group-id="3236272755-43">)</span><span class="w"> </span><span class="k" data-group-id="3236272755-46">do</span><span class="w">
    </span><span class="n">guild_id</span><span class="w">
    </span><span class="o">|&gt;</span><span class="w"> </span><span class="nc">GuildCache</span><span class="o">.</span><span class="n">get!</span><span class="p" data-group-id="3236272755-47">(</span><span class="p" data-group-id="3236272755-47">)</span><span class="w">
    </span><span class="o">|&gt;</span><span class="w"> </span><span class="nc">Map</span><span class="o">.</span><span class="n">get</span><span class="p" data-group-id="3236272755-48">(</span><span class="ss">:voice_states</span><span class="p" data-group-id="3236272755-48">)</span><span class="w">
    </span><span class="o">|&gt;</span><span class="w"> </span><span class="nc">Enum</span><span class="o">.</span><span class="n">find</span><span class="p" data-group-id="3236272755-49">(</span><span class="p" data-group-id="3236272755-50">%{</span><span class="p" data-group-id="3236272755-50">}</span><span class="p">,</span><span class="w"> </span><span class="k" data-group-id="3236272755-51">fn</span><span class="w"> </span><span class="n">v</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="n">v</span><span class="o">.</span><span class="n">user_id</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="n">user_id</span><span class="w"> </span><span class="k" data-group-id="3236272755-51">end</span><span class="p" data-group-id="3236272755-49">)</span><span class="w">
    </span><span class="o">|&gt;</span><span class="w"> </span><span class="nc">Map</span><span class="o">.</span><span class="n">get</span><span class="p" data-group-id="3236272755-52">(</span><span class="ss">:channel_id</span><span class="p" data-group-id="3236272755-52">)</span><span class="w">
  </span><span class="k" data-group-id="3236272755-46">end</span><span class="w">

  </span><span class="c1"># If you are running this example in an iex session where you manually call</span><span class="w">
  </span><span class="c1"># AudioPlayerSupervisor.start_link, you will have to call this function</span><span class="w">
  </span><span class="c1"># with your guild_id as the argument</span><span class="w">
  </span><span class="kd">def</span><span class="w"> </span><span class="nf">create_guild_commands</span><span class="p" data-group-id="3236272755-53">(</span><span class="n">guild_id</span><span class="p" data-group-id="3236272755-53">)</span><span class="w"> </span><span class="k" data-group-id="3236272755-54">do</span><span class="w">
    </span><span class="nc">Enum</span><span class="o">.</span><span class="n">each</span><span class="p" data-group-id="3236272755-55">(</span><span class="na">@commands</span><span class="p">,</span><span class="w"> </span><span class="k" data-group-id="3236272755-56">fn</span><span class="w"> </span><span class="p" data-group-id="3236272755-57">{</span><span class="n">name</span><span class="p">,</span><span class="w"> </span><span class="n">description</span><span class="p">,</span><span class="w"> </span><span class="n">options</span><span class="p" data-group-id="3236272755-57">}</span><span class="w"> </span><span class="o">-&gt;</span><span class="w">
      </span><span class="nc">ApplicationCommand</span><span class="o">.</span><span class="n">create_guild_command</span><span class="p" data-group-id="3236272755-58">(</span><span class="n">guild_id</span><span class="p">,</span><span class="w"> </span><span class="p" data-group-id="3236272755-59">%{</span><span class="w">
        </span><span class="ss">name</span><span class="p">:</span><span class="w"> </span><span class="n">name</span><span class="p">,</span><span class="w">
        </span><span class="ss">description</span><span class="p">:</span><span class="w"> </span><span class="n">description</span><span class="p">,</span><span class="w">
        </span><span class="ss">options</span><span class="p">:</span><span class="w"> </span><span class="n">options</span><span class="w">
      </span><span class="p" data-group-id="3236272755-59">}</span><span class="p" data-group-id="3236272755-58">)</span><span class="w">
    </span><span class="k" data-group-id="3236272755-56">end</span><span class="p" data-group-id="3236272755-55">)</span><span class="w">
  </span><span class="k" data-group-id="3236272755-54">end</span><span class="w">

  </span><span class="kd">def</span><span class="w"> </span><span class="nf">handle_event</span><span class="p" data-group-id="3236272755-60">(</span><span class="p" data-group-id="3236272755-61">{</span><span class="ss">:READY</span><span class="p">,</span><span class="w"> </span><span class="p" data-group-id="3236272755-62">%{</span><span class="ss">guilds</span><span class="p">:</span><span class="w"> </span><span class="n">guilds</span><span class="p" data-group-id="3236272755-62">}</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="c">_event</span><span class="p">,</span><span class="w"> </span><span class="c">_ws_state</span><span class="p" data-group-id="3236272755-61">}</span><span class="p" data-group-id="3236272755-60">)</span><span class="w"> </span><span class="k" data-group-id="3236272755-63">do</span><span class="w">
    </span><span class="n">guilds</span><span class="w">
    </span><span class="o">|&gt;</span><span class="w"> </span><span class="nc">Enum</span><span class="o">.</span><span class="n">map</span><span class="p" data-group-id="3236272755-64">(</span><span class="k" data-group-id="3236272755-65">fn</span><span class="w"> </span><span class="n">guild</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="n">guild</span><span class="o">.</span><span class="n">id</span><span class="w"> </span><span class="k" data-group-id="3236272755-65">end</span><span class="p" data-group-id="3236272755-64">)</span><span class="w">
    </span><span class="o">|&gt;</span><span class="w"> </span><span class="nc">Enum</span><span class="o">.</span><span class="n">each</span><span class="p" data-group-id="3236272755-66">(</span><span class="o">&amp;</span><span class="n">create_guild_commands</span><span class="o">/</span><span class="mi">1</span><span class="p" data-group-id="3236272755-66">)</span><span class="w">
  </span><span class="k" data-group-id="3236272755-63">end</span><span class="w">

  </span><span class="kd">def</span><span class="w"> </span><span class="nf">handle_event</span><span class="p" data-group-id="3236272755-67">(</span><span class="p" data-group-id="3236272755-68">{</span><span class="ss">:INTERACTION_CREATE</span><span class="p">,</span><span class="w"> </span><span class="n">interaction</span><span class="p">,</span><span class="w"> </span><span class="c">_ws_state</span><span class="p" data-group-id="3236272755-68">}</span><span class="p" data-group-id="3236272755-67">)</span><span class="w"> </span><span class="k" data-group-id="3236272755-69">do</span><span class="w">
    </span><span class="c1"># Run the command, and check for a response message, or default to a checkmark emoji</span><span class="w">
    </span><span class="n">message</span><span class="w"> </span><span class="o">=</span><span class="w">
      </span><span class="k">case</span><span class="w"> </span><span class="n">do_command</span><span class="p" data-group-id="3236272755-70">(</span><span class="n">interaction</span><span class="p" data-group-id="3236272755-70">)</span><span class="w"> </span><span class="k" data-group-id="3236272755-71">do</span><span class="w">
        </span><span class="p" data-group-id="3236272755-72">{</span><span class="ss">:msg</span><span class="p">,</span><span class="w"> </span><span class="n">msg</span><span class="p" data-group-id="3236272755-72">}</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="n">msg</span><span class="w">
        </span><span class="bp">_</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="s">&quot;:white_check_mark:&quot;</span><span class="w">
      </span><span class="k" data-group-id="3236272755-71">end</span><span class="w">

    </span><span class="nc">Interaction</span><span class="o">.</span><span class="n">create_response</span><span class="p" data-group-id="3236272755-73">(</span><span class="n">interaction</span><span class="p">,</span><span class="w"> </span><span class="p" data-group-id="3236272755-74">%{</span><span class="ss">type</span><span class="p">:</span><span class="w"> </span><span class="mi">4</span><span class="p">,</span><span class="w"> </span><span class="ss">data</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="3236272755-75">%{</span><span class="ss">content</span><span class="p">:</span><span class="w"> </span><span class="n">message</span><span class="p" data-group-id="3236272755-75">}</span><span class="p" data-group-id="3236272755-74">}</span><span class="p" data-group-id="3236272755-73">)</span><span class="w">
  </span><span class="k" data-group-id="3236272755-69">end</span><span class="w">

  </span><span class="kd">def</span><span class="w"> </span><span class="nf">handle_event</span><span class="p" data-group-id="3236272755-76">(</span><span class="p" data-group-id="3236272755-77">{</span><span class="ss">:VOICE_SPEAKING_UPDATE</span><span class="p">,</span><span class="w"> </span><span class="n">payload</span><span class="p">,</span><span class="w"> </span><span class="c">_ws_state</span><span class="p" data-group-id="3236272755-77">}</span><span class="p" data-group-id="3236272755-76">)</span><span class="w"> </span><span class="k" data-group-id="3236272755-78">do</span><span class="w">
    </span><span class="nc">Logger</span><span class="o">.</span><span class="n">debug</span><span class="p" data-group-id="3236272755-79">(</span><span class="s">&quot;VOICE SPEAKING UPDATE </span><span class="si" data-group-id="3236272755-80">#{</span><span class="n">inspect</span><span class="p" data-group-id="3236272755-81">(</span><span class="n">payload</span><span class="p" data-group-id="3236272755-81">)</span><span class="si" data-group-id="3236272755-80">}</span><span class="s">&quot;</span><span class="p" data-group-id="3236272755-79">)</span><span class="w">
  </span><span class="k" data-group-id="3236272755-78">end</span><span class="w">

  </span><span class="c1"># Default event handler, if you don&#39;t include this, your consumer WILL crash if</span><span class="w">
  </span><span class="c1"># you don&#39;t have a method definition for each event type.</span><span class="w">
  </span><span class="kd">def</span><span class="w"> </span><span class="nf">handle_event</span><span class="p" data-group-id="3236272755-82">(</span><span class="c">_event</span><span class="p" data-group-id="3236272755-82">)</span><span class="w"> </span><span class="k" data-group-id="3236272755-83">do</span><span class="w">
    </span><span class="ss">:noop</span><span class="w">
  </span><span class="k" data-group-id="3236272755-83">end</span><span class="w">

  </span><span class="kd">def</span><span class="w"> </span><span class="nf">do_command</span><span class="p" data-group-id="3236272755-84">(</span><span class="p" data-group-id="3236272755-85">%{</span><span class="ss">guild_id</span><span class="p">:</span><span class="w"> </span><span class="n">guild_id</span><span class="p">,</span><span class="w"> </span><span class="ss">data</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="3236272755-86">%{</span><span class="ss">name</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;summon&quot;</span><span class="p" data-group-id="3236272755-86">}</span><span class="p" data-group-id="3236272755-85">}</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">interaction</span><span class="p" data-group-id="3236272755-84">)</span><span class="w"> </span><span class="k" data-group-id="3236272755-87">do</span><span class="w">
    </span><span class="k">case</span><span class="w"> </span><span class="n">get_voice_channel_of_interaction</span><span class="p" data-group-id="3236272755-88">(</span><span class="n">interaction</span><span class="p" data-group-id="3236272755-88">)</span><span class="w"> </span><span class="k" data-group-id="3236272755-89">do</span><span class="w">
      </span><span class="no">nil</span><span class="w"> </span><span class="o">-&gt;</span><span class="w">
        </span><span class="p" data-group-id="3236272755-90">{</span><span class="ss">:msg</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;You must be in a voice channel to summon me&quot;</span><span class="p" data-group-id="3236272755-90">}</span><span class="w">

      </span><span class="n">voice_channel_id</span><span class="w"> </span><span class="o">-&gt;</span><span class="w">
        </span><span class="nc">Voice</span><span class="o">.</span><span class="n">join_channel</span><span class="p" data-group-id="3236272755-91">(</span><span class="n">guild_id</span><span class="p">,</span><span class="w"> </span><span class="n">voice_channel_id</span><span class="p" data-group-id="3236272755-91">)</span><span class="w">
    </span><span class="k" data-group-id="3236272755-89">end</span><span class="w">
  </span><span class="k" data-group-id="3236272755-87">end</span><span class="w">

  </span><span class="kd">def</span><span class="w"> </span><span class="nf">do_command</span><span class="p" data-group-id="3236272755-92">(</span><span class="p" data-group-id="3236272755-93">%{</span><span class="ss">guild_id</span><span class="p">:</span><span class="w"> </span><span class="n">guild_id</span><span class="p">,</span><span class="w"> </span><span class="ss">data</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="3236272755-94">%{</span><span class="ss">name</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;leave&quot;</span><span class="p" data-group-id="3236272755-94">}</span><span class="p" data-group-id="3236272755-93">}</span><span class="p" data-group-id="3236272755-92">)</span><span class="w"> </span><span class="k" data-group-id="3236272755-95">do</span><span class="w">
    </span><span class="nc">Voice</span><span class="o">.</span><span class="n">leave_channel</span><span class="p" data-group-id="3236272755-96">(</span><span class="n">guild_id</span><span class="p" data-group-id="3236272755-96">)</span><span class="w">
    </span><span class="p" data-group-id="3236272755-97">{</span><span class="ss">:msg</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;See you later :wave:&quot;</span><span class="p" data-group-id="3236272755-97">}</span><span class="w">
  </span><span class="k" data-group-id="3236272755-95">end</span><span class="w">

  </span><span class="kd">def</span><span class="w"> </span><span class="nf">do_command</span><span class="p" data-group-id="3236272755-98">(</span><span class="p" data-group-id="3236272755-99">%{</span><span class="ss">guild_id</span><span class="p">:</span><span class="w"> </span><span class="n">guild_id</span><span class="p">,</span><span class="w"> </span><span class="ss">data</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="3236272755-100">%{</span><span class="ss">name</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;pause&quot;</span><span class="p" data-group-id="3236272755-100">}</span><span class="p" data-group-id="3236272755-99">}</span><span class="p" data-group-id="3236272755-98">)</span><span class="p">,</span><span class="w"> </span><span class="ss">do</span><span class="p">:</span><span class="w"> </span><span class="nc">Voice</span><span class="o">.</span><span class="n">pause</span><span class="p" data-group-id="3236272755-101">(</span><span class="n">guild_id</span><span class="p" data-group-id="3236272755-101">)</span><span class="w">

  </span><span class="kd">def</span><span class="w"> </span><span class="nf">do_command</span><span class="p" data-group-id="3236272755-102">(</span><span class="p" data-group-id="3236272755-103">%{</span><span class="ss">guild_id</span><span class="p">:</span><span class="w"> </span><span class="n">guild_id</span><span class="p">,</span><span class="w"> </span><span class="ss">data</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="3236272755-104">%{</span><span class="ss">name</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;resume&quot;</span><span class="p" data-group-id="3236272755-104">}</span><span class="p" data-group-id="3236272755-103">}</span><span class="p" data-group-id="3236272755-102">)</span><span class="p">,</span><span class="w"> </span><span class="ss">do</span><span class="p">:</span><span class="w"> </span><span class="nc">Voice</span><span class="o">.</span><span class="n">resume</span><span class="p" data-group-id="3236272755-105">(</span><span class="n">guild_id</span><span class="p" data-group-id="3236272755-105">)</span><span class="w">

  </span><span class="kd">def</span><span class="w"> </span><span class="nf">do_command</span><span class="p" data-group-id="3236272755-106">(</span><span class="p" data-group-id="3236272755-107">%{</span><span class="ss">guild_id</span><span class="p">:</span><span class="w"> </span><span class="n">guild_id</span><span class="p">,</span><span class="w"> </span><span class="ss">data</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="3236272755-108">%{</span><span class="ss">name</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;stop&quot;</span><span class="p" data-group-id="3236272755-108">}</span><span class="p" data-group-id="3236272755-107">}</span><span class="p" data-group-id="3236272755-106">)</span><span class="p">,</span><span class="w"> </span><span class="ss">do</span><span class="p">:</span><span class="w"> </span><span class="nc">Voice</span><span class="o">.</span><span class="n">stop</span><span class="p" data-group-id="3236272755-109">(</span><span class="n">guild_id</span><span class="p" data-group-id="3236272755-109">)</span><span class="w">

  </span><span class="kd">def</span><span class="w"> </span><span class="nf">do_command</span><span class="p" data-group-id="3236272755-110">(</span><span class="p" data-group-id="3236272755-111">%{</span><span class="ss">guild_id</span><span class="p">:</span><span class="w"> </span><span class="n">guild_id</span><span class="p">,</span><span class="w"> </span><span class="ss">data</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="3236272755-112">%{</span><span class="ss">name</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;play&quot;</span><span class="p">,</span><span class="w"> </span><span class="ss">options</span><span class="p">:</span><span class="w"> </span><span class="n">options</span><span class="p" data-group-id="3236272755-112">}</span><span class="p" data-group-id="3236272755-111">}</span><span class="p" data-group-id="3236272755-110">)</span><span class="w"> </span><span class="k" data-group-id="3236272755-113">do</span><span class="w">
    </span><span class="k">if</span><span class="w"> </span><span class="nc">Voice</span><span class="o">.</span><span class="n">ready?</span><span class="p" data-group-id="3236272755-114">(</span><span class="n">guild_id</span><span class="p" data-group-id="3236272755-114">)</span><span class="w"> </span><span class="k" data-group-id="3236272755-115">do</span><span class="w">
      </span><span class="k">case</span><span class="w"> </span><span class="n">options</span><span class="w"> </span><span class="k" data-group-id="3236272755-116">do</span><span class="w">
        </span><span class="p" data-group-id="3236272755-117">[</span><span class="p" data-group-id="3236272755-118">%{</span><span class="ss">name</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;song&quot;</span><span class="p" data-group-id="3236272755-118">}</span><span class="p" data-group-id="3236272755-117">]</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="nc">Voice</span><span class="o">.</span><span class="n">play</span><span class="p" data-group-id="3236272755-119">(</span><span class="n">guild_id</span><span class="p">,</span><span class="w"> </span><span class="na">@soundcloud_url</span><span class="p">,</span><span class="w"> </span><span class="ss">:ytdl</span><span class="p" data-group-id="3236272755-119">)</span><span class="w">
        </span><span class="p" data-group-id="3236272755-120">[</span><span class="p" data-group-id="3236272755-121">%{</span><span class="ss">name</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;nut&quot;</span><span class="p" data-group-id="3236272755-121">}</span><span class="p" data-group-id="3236272755-120">]</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="nc">Voice</span><span class="o">.</span><span class="n">play</span><span class="p" data-group-id="3236272755-122">(</span><span class="n">guild_id</span><span class="p">,</span><span class="w"> </span><span class="na">@nut_file_url</span><span class="p">,</span><span class="w"> </span><span class="ss">:url</span><span class="p" data-group-id="3236272755-122">)</span><span class="w">
        </span><span class="p" data-group-id="3236272755-123">[</span><span class="p" data-group-id="3236272755-124">%{</span><span class="ss">name</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;file&quot;</span><span class="p">,</span><span class="w"> </span><span class="ss">options</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="3236272755-125">[</span><span class="p" data-group-id="3236272755-126">%{</span><span class="ss">value</span><span class="p">:</span><span class="w"> </span><span class="n">url</span><span class="p" data-group-id="3236272755-126">}</span><span class="p" data-group-id="3236272755-125">]</span><span class="p" data-group-id="3236272755-124">}</span><span class="p" data-group-id="3236272755-123">]</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="nc">Voice</span><span class="o">.</span><span class="n">play</span><span class="p" data-group-id="3236272755-127">(</span><span class="n">guild_id</span><span class="p">,</span><span class="w"> </span><span class="n">url</span><span class="p">,</span><span class="w"> </span><span class="ss">:url</span><span class="p" data-group-id="3236272755-127">)</span><span class="w">
        </span><span class="p" data-group-id="3236272755-128">[</span><span class="p" data-group-id="3236272755-129">%{</span><span class="ss">name</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;url&quot;</span><span class="p">,</span><span class="w"> </span><span class="ss">options</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="3236272755-130">[</span><span class="p" data-group-id="3236272755-131">%{</span><span class="ss">value</span><span class="p">:</span><span class="w"> </span><span class="n">url</span><span class="p" data-group-id="3236272755-131">}</span><span class="p" data-group-id="3236272755-130">]</span><span class="p" data-group-id="3236272755-129">}</span><span class="p" data-group-id="3236272755-128">]</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="nc">Voice</span><span class="o">.</span><span class="n">play</span><span class="p" data-group-id="3236272755-132">(</span><span class="n">guild_id</span><span class="p">,</span><span class="w"> </span><span class="n">url</span><span class="p">,</span><span class="w"> </span><span class="ss">:ytdl</span><span class="p" data-group-id="3236272755-132">)</span><span class="w">
      </span><span class="k" data-group-id="3236272755-116">end</span><span class="w">
    </span><span class="k" data-group-id="3236272755-115">else</span><span class="w">
      </span><span class="p" data-group-id="3236272755-133">{</span><span class="ss">:msg</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;I must be in a voice channel before playing audio&quot;</span><span class="p" data-group-id="3236272755-133">}</span><span class="w">
    </span><span class="k" data-group-id="3236272755-115">end</span><span class="w">
  </span><span class="k" data-group-id="3236272755-113">end</span><span class="w">
</span><span class="k" data-group-id="3236272755-14">end</span><span class="w">
</span></code></pre>
    </section>

</div>

  <section id="summary" class="details-list">
    <h1 class="section-heading">
      <a class="hover-link" href="#summary">
        <i class="ri-link-m" aria-hidden="true"></i>
      </a>
      <span class="text">Summary</span>
    </h1>
<div class="summary-types summary">
  <h2>
    <a href="#types">Types</a>
  </h2>

    <div class="summary-row">
      <div class="summary-signature">
        <a href="#t:opus_packet/0" data-no-tooltip="" translate="no">opus_packet()</a>

      </div>

        <div class="summary-synopsis"><p>Opus packet</p></div>

    </div>

    <div class="summary-row">
      <div class="summary-signature">
        <a href="#t:play_input/0" data-no-tooltip="" translate="no">play_input()</a>

      </div>

        <div class="summary-synopsis"><p>The play input</p></div>

    </div>

    <div class="summary-row">
      <div class="summary-signature">
        <a href="#t:play_type/0" data-no-tooltip="" translate="no">play_type()</a>

      </div>

        <div class="summary-synopsis"><p>The type of play input</p></div>

    </div>

    <div class="summary-row">
      <div class="summary-signature">
        <a href="#t:rtp_opus/0" data-no-tooltip="" translate="no">rtp_opus()</a>

      </div>

        <div class="summary-synopsis"><p>Tuple with RTP header elements and opus packet</p></div>

    </div>

    <div class="summary-row">
      <div class="summary-signature">
        <a href="#t:rtp_sequence/0" data-no-tooltip="" translate="no">rtp_sequence()</a>

      </div>

        <div class="summary-synopsis"><p>RTP sequence</p></div>

    </div>

    <div class="summary-row">
      <div class="summary-signature">
        <a href="#t:rtp_ssrc/0" data-no-tooltip="" translate="no">rtp_ssrc()</a>

      </div>

        <div class="summary-synopsis"><p>RTP SSRC</p></div>

    </div>

    <div class="summary-row">
      <div class="summary-signature">
        <a href="#t:rtp_timestamp/0" data-no-tooltip="" translate="no">rtp_timestamp()</a>

      </div>

        <div class="summary-synopsis"><p>RTP timestamp</p></div>

    </div>

</div>
<div class="summary-functions summary">
  <h2>
    <a href="#functions">Functions</a>
  </h2>

    <div class="summary-row">
      <div class="summary-signature">
        <a href="#child_spec/1" data-no-tooltip="" translate="no">child_spec(init_arg)</a>

      </div>

        <div class="summary-synopsis"><p>Returns a specification to start this module under a supervisor.</p></div>

    </div>

    <div class="summary-row">
      <div class="summary-signature">
        <a href="#connect_to_gateway/1" data-no-tooltip="" translate="no">connect_to_gateway(guild_id)</a>

      </div>

        <div class="summary-synopsis"><p>Low-level. Manually connect to voice websockets gateway.</p></div>

    </div>

    <div class="summary-row">
      <div class="summary-signature">
        <a href="#create_ogg_bitstream/1" data-no-tooltip="" translate="no">create_ogg_bitstream(opus_packets)</a>

      </div>

        <div class="summary-synopsis"><p>Create a complete Ogg logical bitstream from a list of Opus packets.</p></div>

    </div>

    <div class="summary-row">
      <div class="summary-signature">
        <a href="#extract_opus_packet/1" data-no-tooltip="" translate="no">extract_opus_packet(packet)</a>

      </div>

        <div class="summary-synopsis"><p>Extract the opus packet from the RTP packet received from Discord.</p></div>

    </div>

    <div class="summary-row">
      <div class="summary-signature">
        <a href="#get_channel_id/1" data-no-tooltip="" translate="no">get_channel_id(guild_id)</a>

      </div>

        <div class="summary-synopsis"><p>Gets the id of the voice channel that the bot is connected to.</p></div>

    </div>

    <div class="summary-row">
      <div class="summary-signature">
        <a href="#get_current_url/1" data-no-tooltip="" translate="no">get_current_url(guild_id)</a>

      </div>

        <div class="summary-synopsis"><p>Gets the current URL being played.</p></div>

    </div>

    <div class="summary-row">
      <div class="summary-signature">
        <a href="#get_ssrc_map/1" data-no-tooltip="" translate="no">get_ssrc_map(guild_id)</a>

      </div>

        <div class="summary-synopsis"><p>Gets a map of RTP SSRC to user id.</p></div>

    </div>

    <div class="summary-row">
      <div class="summary-signature">
        <a href="#join_channel/5" data-no-tooltip="" translate="no">join_channel(guild_id, channel_id, self_mute \\ false, self_deaf \\ false, persist \\ true)</a>

      </div>

        <div class="summary-synopsis"><p>Joins or moves the bot to a voice channel.</p></div>

    </div>

    <div class="summary-row">
      <div class="summary-signature">
        <a href="#leave_channel/1" data-no-tooltip="" translate="no">leave_channel(guild_id)</a>

      </div>

        <div class="summary-synopsis"><p>Leaves the voice channel of the given guild id.</p></div>

    </div>

    <div class="summary-row">
      <div class="summary-signature">
        <a href="#listen/3" data-no-tooltip="" translate="no">listen(guild_id, num_packets, raw_rtp \\ false)</a>

      </div>

        <div class="summary-synopsis"><p>Listen for incoming voice RTP packets.</p></div>

    </div>

    <div class="summary-row">
      <div class="summary-signature">
        <a href="#pad_opus/1" data-no-tooltip="" translate="no">pad_opus(packets)</a>

      </div>

        <div class="summary-synopsis"><p>Pad discontinuous chunks of opus audio with silence.</p></div>

    </div>

    <div class="summary-row">
      <div class="summary-signature">
        <a href="#pause/1" data-no-tooltip="" translate="no">pause(guild_id)</a>

      </div>

        <div class="summary-synopsis"><p>Pauses the current sound being played in a voice channel.</p></div>

    </div>

    <div class="summary-row">
      <div class="summary-signature">
        <a href="#play/4" data-no-tooltip="" translate="no">play(guild_id, input, type \\ :url, options \\ [])</a>

      </div>

        <div class="summary-synopsis"><p>Plays sound in the voice channel the bot is in.</p></div>

    </div>

    <div class="summary-row">
      <div class="summary-signature">
        <a href="#playing?/1" data-no-tooltip="" translate="no">playing?(guild_id)</a>

      </div>

        <div class="summary-synopsis"><p>Checks if the bot is playing sound in a voice channel.</p></div>

    </div>

    <div class="summary-row">
      <div class="summary-signature">
        <a href="#ready?/1" data-no-tooltip="" translate="no">ready?(guild_id)</a>

      </div>

        <div class="summary-synopsis"><p>Checks if the connection is up and ready to play audio.</p></div>

    </div>

    <div class="summary-row">
      <div class="summary-signature">
        <a href="#resume/1" data-no-tooltip="" translate="no">resume(guild_id)</a>

      </div>

        <div class="summary-synopsis"><p>Resumes playing the current paused sound in a voice channel.</p></div>

    </div>

    <div class="summary-row">
      <div class="summary-signature">
        <a href="#send_frames/2" data-no-tooltip="" translate="no">send_frames(guild_id, frames)</a>

      </div>

        <div class="summary-synopsis"><p>Low-level. Send pre-encoded audio packets directly.</p></div>

    </div>

    <div class="summary-row">
      <div class="summary-signature">
        <a href="#set_is_speaking/2" data-no-tooltip="" translate="no">set_is_speaking(guild_id, speaking)</a>

      </div>

        <div class="summary-synopsis"><p>Low-level. Set speaking flag in voice channel.</p></div>

    </div>

    <div class="summary-row">
      <div class="summary-signature">
        <a href="#start_listen_async/1" data-no-tooltip="" translate="no">start_listen_async(guild_id)</a>

      </div>

        <div class="summary-synopsis"><p>Start asynchronously receiving events for incoming RTP packets for an active voice session.</p></div>

    </div>

    <div class="summary-row">
      <div class="summary-signature">
        <a href="#stop/1" data-no-tooltip="" translate="no">stop(guild_id)</a>

      </div>

        <div class="summary-synopsis"><p>Stops the current sound being played in a voice channel.</p></div>

    </div>

    <div class="summary-row">
      <div class="summary-signature">
        <a href="#stop_listen_async/1" data-no-tooltip="" translate="no">stop_listen_async(guild_id)</a>

      </div>

        <div class="summary-synopsis"><p>Stop asynchronously receiving events for incoming RTP packets for an active voice session.</p></div>

    </div>

</div>

  </section>


  <section id="types" class="details-list">
    <h1 class="section-heading">
      <a class="hover-link" href="#types">
        <i class="ri-link-m" aria-hidden="true"></i>
      </a>
      <span class="text">Types</span>
    </h1>
    <div class="types-list">
<section class="detail" id="t:opus_packet/0">

  <div class="detail-header">
    <a href="#t:opus_packet/0" class="detail-link" data-no-tooltip="" aria-label="Link to this type">
      <i class="ri-link-m" aria-hidden="true"></i>
    </a>
    <div class="heading-with-actions">
      <h1 class="signature" translate="no">opus_packet()</h1>

        <span class="note">(since 0.6.0)</span>


        <a href="https://github.com/Kraigie/nostrum/blob/master/lib/nostrum/voice.ex#L83" class="icon-action" rel="help" aria-label="View Source">
          <i class="ri-code-s-slash-line" aria-hidden="true"></i>
        </a>

    </div>
  </div>

  <section class="docstring">

      <div class="specs">

          <pre translate="no"><span class="attribute">@type</span> opus_packet() :: <a href="https://hexdocs.pm/elixir/typespecs.html#built-in-types">binary</a>()</pre>

      </div>

<p>Opus packet</p>
  </section>
</section>
<section class="detail" id="t:play_input/0">

  <div class="detail-header">
    <a href="#t:play_input/0" class="detail-link" data-no-tooltip="" aria-label="Link to this type">
      <i class="ri-link-m" aria-hidden="true"></i>
    </a>
    <div class="heading-with-actions">
      <h1 class="signature" translate="no">play_input()</h1>

        <span class="note">(since 0.6.0)</span>


        <a href="https://github.com/Kraigie/nostrum/blob/master/lib/nostrum/voice.ex#L107" class="icon-action" rel="help" aria-label="View Source">
          <i class="ri-code-s-slash-line" aria-hidden="true"></i>
        </a>

    </div>
  </div>

  <section class="docstring">

      <div class="specs">

          <pre translate="no"><span class="attribute">@type</span> play_input() :: <a href="https://hexdocs.pm/elixir/String.html#t:t/0">String.t</a>() | <a href="https://hexdocs.pm/elixir/typespecs.html#built-in-types">binary</a>() | <a href="https://hexdocs.pm/elixir/Enum.html#t:t/0">Enum.t</a>()</pre>

      </div>

<p>The play input</p><p>The input given to <a href="#play/4"><code class="inline">play/4</code></a>, either a compatible URL or binary audio data.
See <a href="#play/4"><code class="inline">play/4</code></a> for more information.</p>
  </section>
</section>
<section class="detail" id="t:play_type/0">

  <div class="detail-header">
    <a href="#t:play_type/0" class="detail-link" data-no-tooltip="" aria-label="Link to this type">
      <i class="ri-link-m" aria-hidden="true"></i>
    </a>
    <div class="heading-with-actions">
      <h1 class="signature" translate="no">play_type()</h1>

        <span class="note">(since 0.6.0)</span>


        <a href="https://github.com/Kraigie/nostrum/blob/master/lib/nostrum/voice.ex#L98" class="icon-action" rel="help" aria-label="View Source">
          <i class="ri-code-s-slash-line" aria-hidden="true"></i>
        </a>

    </div>
  </div>

  <section class="docstring">

      <div class="specs">

          <pre translate="no"><span class="attribute">@type</span> play_type() :: :url | :pipe | :ytdl | :stream | :raw | :raw_s</pre>

      </div>

<p>The type of play input</p><p>The type given to <a href="#play/4"><code class="inline">play/4</code></a> determines how the input parameter is interpreted.
See <a href="#play/4"><code class="inline">play/4</code></a> for more information.</p>
  </section>
</section>
<section class="detail" id="t:rtp_opus/0">

  <div class="detail-header">
    <a href="#t:rtp_opus/0" class="detail-link" data-no-tooltip="" aria-label="Link to this type">
      <i class="ri-link-m" aria-hidden="true"></i>
    </a>
    <div class="heading-with-actions">
      <h1 class="signature" translate="no">rtp_opus()</h1>

        <span class="note">(since 0.6.0)</span>


        <a href="https://github.com/Kraigie/nostrum/blob/master/lib/nostrum/voice.ex#L89" class="icon-action" rel="help" aria-label="View Source">
          <i class="ri-code-s-slash-line" aria-hidden="true"></i>
        </a>

    </div>
  </div>

  <section class="docstring">

      <div class="specs">

          <pre translate="no"><span class="attribute">@type</span> rtp_opus() :: {{<a href="#t:rtp_sequence/0">rtp_sequence</a>(), <a href="#t:rtp_timestamp/0">rtp_timestamp</a>(), <a href="#t:rtp_ssrc/0">rtp_ssrc</a>()}, <a href="#t:opus_packet/0">opus_packet</a>()}</pre>

      </div>

<p>Tuple with RTP header elements and opus packet</p>
  </section>
</section>
<section class="detail" id="t:rtp_sequence/0">

  <div class="detail-header">
    <a href="#t:rtp_sequence/0" class="detail-link" data-no-tooltip="" aria-label="Link to this type">
      <i class="ri-link-m" aria-hidden="true"></i>
    </a>
    <div class="heading-with-actions">
      <h1 class="signature" translate="no">rtp_sequence()</h1>

        <span class="note">(since 0.6.0)</span>


        <a href="https://github.com/Kraigie/nostrum/blob/master/lib/nostrum/voice.ex#L65" class="icon-action" rel="help" aria-label="View Source">
          <i class="ri-code-s-slash-line" aria-hidden="true"></i>
        </a>

    </div>
  </div>

  <section class="docstring">

      <div class="specs">

          <pre translate="no"><span class="attribute">@type</span> rtp_sequence() :: <a href="https://hexdocs.pm/elixir/typespecs.html#basic-types">non_neg_integer</a>()</pre>

      </div>

<p>RTP sequence</p>
  </section>
</section>
<section class="detail" id="t:rtp_ssrc/0">

  <div class="detail-header">
    <a href="#t:rtp_ssrc/0" class="detail-link" data-no-tooltip="" aria-label="Link to this type">
      <i class="ri-link-m" aria-hidden="true"></i>
    </a>
    <div class="heading-with-actions">
      <h1 class="signature" translate="no">rtp_ssrc()</h1>

        <span class="note">(since 0.6.0)</span>


        <a href="https://github.com/Kraigie/nostrum/blob/master/lib/nostrum/voice.ex#L77" class="icon-action" rel="help" aria-label="View Source">
          <i class="ri-code-s-slash-line" aria-hidden="true"></i>
        </a>

    </div>
  </div>

  <section class="docstring">

      <div class="specs">

          <pre translate="no"><span class="attribute">@type</span> rtp_ssrc() :: <a href="https://hexdocs.pm/elixir/typespecs.html#basic-types">non_neg_integer</a>()</pre>

      </div>

<p>RTP SSRC</p>
  </section>
</section>
<section class="detail" id="t:rtp_timestamp/0">

  <div class="detail-header">
    <a href="#t:rtp_timestamp/0" class="detail-link" data-no-tooltip="" aria-label="Link to this type">
      <i class="ri-link-m" aria-hidden="true"></i>
    </a>
    <div class="heading-with-actions">
      <h1 class="signature" translate="no">rtp_timestamp()</h1>

        <span class="note">(since 0.6.0)</span>


        <a href="https://github.com/Kraigie/nostrum/blob/master/lib/nostrum/voice.ex#L71" class="icon-action" rel="help" aria-label="View Source">
          <i class="ri-code-s-slash-line" aria-hidden="true"></i>
        </a>

    </div>
  </div>

  <section class="docstring">

      <div class="specs">

          <pre translate="no"><span class="attribute">@type</span> rtp_timestamp() :: <a href="https://hexdocs.pm/elixir/typespecs.html#basic-types">non_neg_integer</a>()</pre>

      </div>

<p>RTP timestamp</p>
  </section>
</section>

    </div>
  </section>

  <section id="functions" class="details-list">
    <h1 class="section-heading">
      <a class="hover-link" href="#functions">
        <i class="ri-link-m" aria-hidden="true"></i>
      </a>
      <span class="text">Functions</span>
    </h1>
    <div class="functions-list">
<section class="detail" id="child_spec/1">

  <div class="detail-header">
    <a href="#child_spec/1" class="detail-link" data-no-tooltip="" aria-label="Link to this function">
      <i class="ri-link-m" aria-hidden="true"></i>
    </a>
    <div class="heading-with-actions">
      <h1 class="signature" translate="no">child_spec(init_arg)</h1>


        <a href="https://github.com/Kraigie/nostrum/blob/master/lib/nostrum/voice.ex#L59" class="icon-action" rel="help" aria-label="View Source">
          <i class="ri-code-s-slash-line" aria-hidden="true"></i>
        </a>

    </div>
  </div>

  <section class="docstring">

<p>Returns a specification to start this module under a supervisor.</p><p>See <a href="https://hexdocs.pm/elixir/Supervisor.html"><code class="inline">Supervisor</code></a>.</p>
  </section>
</section>
<section class="detail" id="connect_to_gateway/1">

  <div class="detail-header">
    <a href="#connect_to_gateway/1" class="detail-link" data-no-tooltip="" aria-label="Link to this function">
      <i class="ri-link-m" aria-hidden="true"></i>
    </a>
    <div class="heading-with-actions">
      <h1 class="signature" translate="no">connect_to_gateway(guild_id)</h1>

        <span class="note">(since 0.5.0)</span>


        <a href="https://github.com/Kraigie/nostrum/blob/master/lib/nostrum/voice.ex#L598" class="icon-action" rel="help" aria-label="View Source">
          <i class="ri-code-s-slash-line" aria-hidden="true"></i>
        </a>

    </div>
  </div>

  <section class="docstring">

      <div class="specs">

          <pre translate="no"><span class="attribute">@spec</span> connect_to_gateway(<a href="Nostrum.Struct.Guild.html#t:id/0">Nostrum.Struct.Guild.id</a>()) :: :ok | {:error, <a href="https://hexdocs.pm/elixir/String.html#t:t/0">String.t</a>()}</pre>

      </div>

<p>Low-level. Manually connect to voice websockets gateway.</p><p>This function should only be called if config option <code class="inline">:voice_auto_connect</code> is set to <code class="inline">false</code>.
By default Nostrum will automatically create a voice gateway when joining a channel.</p>
  </section>
</section>
<section class="detail" id="create_ogg_bitstream/1">

  <div class="detail-header">
    <a href="#create_ogg_bitstream/1" class="detail-link" data-no-tooltip="" aria-label="Link to this function">
      <i class="ri-link-m" aria-hidden="true"></i>
    </a>
    <div class="heading-with-actions">
      <h1 class="signature" translate="no">create_ogg_bitstream(opus_packets)</h1>

        <span class="note">(since 0.5.1)</span>


        <a href="https://github.com/Kraigie/nostrum/blob/master/lib/nostrum/voice.ex#L740" class="icon-action" rel="help" aria-label="View Source">
          <i class="ri-code-s-slash-line" aria-hidden="true"></i>
        </a>

    </div>
  </div>

  <section class="docstring">

      <div class="specs">

          <pre translate="no"><span class="attribute">@spec</span> create_ogg_bitstream([<a href="#t:opus_packet/0">opus_packet</a>()]) :: [<a href="https://hexdocs.pm/elixir/typespecs.html#built-in-types">binary</a>()]</pre>

      </div>

<p>Create a complete Ogg logical bitstream from a list of Opus packets.</p><p>This function takes a list of opus packets and returns a list of Ogg
encapsulated Opus pages for a single Ogg logical bitstream.</p><p>It is highly recommended to learn about the Ogg container format to
understand how to use the data.</p><p>To get started, assuming you have a list of evenly temporally spaced
and consecutive opus packets from a single source that you want written
to a file, you can run the following:</p><pre><code class="makeup elixir" translate="no"><span class="n">bitstream</span><span class="w"> </span><span class="o">=</span><span class="w">
  </span><span class="n">opus_packets</span><span class="w">
  </span><span class="o">|&gt;</span><span class="w"> </span><span class="n">create_ogg_bitstream</span><span class="p" data-group-id="4945286190-1">(</span><span class="p" data-group-id="4945286190-1">)</span><span class="w">
  </span><span class="o">|&gt;</span><span class="w"> </span><span class="nc">:binary</span><span class="o">.</span><span class="n">list_to_bin</span><span class="p" data-group-id="4945286190-2">(</span><span class="p" data-group-id="4945286190-2">)</span><span class="w">

</span><span class="nc">File</span><span class="o">.</span><span class="n">write!</span><span class="p" data-group-id="4945286190-3">(</span><span class="s">&quot;my_recording.ogg&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">bitstream</span><span class="p" data-group-id="4945286190-3">)</span></code></pre><p>When creating a logical bitstream, ensure that the packets are all from a single SSRC.
When listening in a channel with multiple speakers, you should be storing the received
packets in unique buckets for each SSRC so that the multiple audio sources don't become
jumbled. A single logical bitstream should represent audio data from a single speaker.
An Ogg physical bitstream (e.g. a file) may be composed of multiple interleaved Ogg
logical bitstreams as each logical bitstream and its constituent pages contain a unique
and randomly generated bitstream serial number, but this is a story for another time.</p><p>Assuming you have a list of <a href="#t:rtp_opus/0"><code class="inline">rtp_opus/0</code></a> packets that are not separated by ssrc, you
may do the following:</p><pre><code class="makeup elixir" translate="no"><span class="n">jumbled_packets</span><span class="w">
</span><span class="o">|&gt;</span><span class="w"> </span><span class="nc">Stream</span><span class="o">.</span><span class="n">filter</span><span class="p" data-group-id="8724005837-1">(</span><span class="k" data-group-id="8724005837-2">fn</span><span class="w"> </span><span class="p" data-group-id="8724005837-3">{</span><span class="p" data-group-id="8724005837-4">{</span><span class="c">_seq</span><span class="p">,</span><span class="w"> </span><span class="c">_time</span><span class="p">,</span><span class="w"> </span><span class="n">ssrc</span><span class="p" data-group-id="8724005837-4">}</span><span class="p">,</span><span class="w"> </span><span class="c">_opus</span><span class="p" data-group-id="8724005837-3">}</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="n">ssrc</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="n">particular_ssrc</span><span class="w"> </span><span class="k" data-group-id="8724005837-2">end</span><span class="p" data-group-id="8724005837-1">)</span><span class="w">
</span><span class="o">|&gt;</span><span class="w"> </span><span class="nc">Enum</span><span class="o">.</span><span class="n">map</span><span class="p" data-group-id="8724005837-5">(</span><span class="k" data-group-id="8724005837-6">fn</span><span class="w"> </span><span class="p" data-group-id="8724005837-7">{</span><span class="p" data-group-id="8724005837-8">{</span><span class="c">_seq</span><span class="p">,</span><span class="w"> </span><span class="c">_time</span><span class="p">,</span><span class="w"> </span><span class="c">_ssrc</span><span class="p" data-group-id="8724005837-8">}</span><span class="p">,</span><span class="w"> </span><span class="n">opus</span><span class="p" data-group-id="8724005837-7">}</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="n">opus</span><span class="w"> </span><span class="k" data-group-id="8724005837-6">end</span><span class="p" data-group-id="8724005837-5">)</span><span class="w">
</span><span class="o">|&gt;</span><span class="w"> </span><span class="n">create_ogg_bitstream</span><span class="p" data-group-id="8724005837-9">(</span><span class="p" data-group-id="8724005837-9">)</span></code></pre>
  </section>
</section>
<section class="detail" id="extract_opus_packet/1">

  <div class="detail-header">
    <a href="#extract_opus_packet/1" class="detail-link" data-no-tooltip="" aria-label="Link to this function">
      <i class="ri-link-m" aria-hidden="true"></i>
    </a>
    <div class="heading-with-actions">
      <h1 class="signature" translate="no">extract_opus_packet(packet)</h1>

        <span class="note">(since 0.6.0)</span>


        <a href="https://github.com/Kraigie/nostrum/blob/master/lib/nostrum/voice.ex#L693" class="icon-action" rel="help" aria-label="View Source">
          <i class="ri-code-s-slash-line" aria-hidden="true"></i>
        </a>

    </div>
  </div>

  <section class="docstring">

      <div class="specs">

          <pre translate="no"><span class="attribute">@spec</span> extract_opus_packet(<a href="https://hexdocs.pm/elixir/typespecs.html#built-in-types">binary</a>()) :: <a href="#t:opus_packet/0">opus_packet</a>()</pre>

      </div>

<p>Extract the opus packet from the RTP packet received from Discord.</p><p>Incoming voice RTP packets contain a fixed length RTP header and an optional
RTP header extension, which must be stripped to retrieve the underlying opus packet.</p>
  </section>
</section>
<section class="detail" id="get_channel_id/1">

  <div class="detail-header">
    <a href="#get_channel_id/1" class="detail-link" data-no-tooltip="" aria-label="Link to this function">
      <i class="ri-link-m" aria-hidden="true"></i>
    </a>
    <div class="heading-with-actions">
      <h1 class="signature" translate="no">get_channel_id(guild_id)</h1>


        <a href="https://github.com/Kraigie/nostrum/blob/master/lib/nostrum/voice.ex#L507" class="icon-action" rel="help" aria-label="View Source">
          <i class="ri-code-s-slash-line" aria-hidden="true"></i>
        </a>

    </div>
  </div>

  <section class="docstring">

      <div class="specs">

          <pre translate="no"><span class="attribute">@spec</span> get_channel_id(<a href="Nostrum.Struct.Guild.html#t:id/0">Nostrum.Struct.Guild.id</a>()) :: <a href="Nostrum.Struct.Channel.html#t:id/0">Nostrum.Struct.Channel.id</a>()</pre>

      </div>

<p>Gets the id of the voice channel that the bot is connected to.</p><h2 id="get_channel_id/1-parameters" class="section-heading">
  <a href="#get_channel_id/1-parameters" class="hover-link">
    <i class="ri-link-m" aria-hidden="true"></i>
  </a>
  <span class="text">Parameters</span>
</h2>
<ul><li><code class="inline">guild_id</code> - ID of guild that the resultant channel belongs to.</li></ul><p>Returns the <code class="inline">channel_id</code> for the channel the bot is connected to, otherwise <code class="inline">nil</code>.</p><h2 id="get_channel_id/1-examples" class="section-heading">
  <a href="#get_channel_id/1-examples" class="hover-link">
    <i class="ri-link-m" aria-hidden="true"></i>
  </a>
  <span class="text">Examples</span>
</h2>
<pre><code class="makeup elixir" translate="no"><span class="gp unselectable">iex&gt; </span><span class="nc">Nostrum.Voice</span><span class="o">.</span><span class="n">join_channel</span><span class="p" data-group-id="6334951119-1">(</span><span class="mi">123456789</span><span class="p">,</span><span class="w"> </span><span class="mi">420691337</span><span class="p" data-group-id="6334951119-1">)</span><span class="w">

</span><span class="gp unselectable">iex&gt; </span><span class="nc">Nostrum.Voice</span><span class="o">.</span><span class="n">get_channel</span><span class="p" data-group-id="6334951119-2">(</span><span class="mi">123456789</span><span class="p" data-group-id="6334951119-2">)</span><span class="w">
</span><span class="mi">420691337</span><span class="w">

</span><span class="gp unselectable">iex&gt; </span><span class="nc">Nostrum.Voice</span><span class="o">.</span><span class="n">leave_channel</span><span class="p" data-group-id="6334951119-3">(</span><span class="mi">123456789</span><span class="p" data-group-id="6334951119-3">)</span><span class="w">

</span><span class="gp unselectable">iex&gt; </span><span class="nc">Nostrum.Voice</span><span class="o">.</span><span class="n">get_channel</span><span class="p" data-group-id="6334951119-4">(</span><span class="mi">123456789</span><span class="p" data-group-id="6334951119-4">)</span><span class="w">
</span><span class="no">nil</span></code></pre>
  </section>
</section>
<section class="detail" id="get_current_url/1">

  <div class="detail-header">
    <a href="#get_current_url/1" class="detail-link" data-no-tooltip="" aria-label="Link to this function">
      <i class="ri-link-m" aria-hidden="true"></i>
    </a>
    <div class="heading-with-actions">
      <h1 class="signature" translate="no">get_current_url(guild_id)</h1>

        <span class="note">(since 0.6.0)</span>


        <a href="https://github.com/Kraigie/nostrum/blob/master/lib/nostrum/voice.ex#L523" class="icon-action" rel="help" aria-label="View Source">
          <i class="ri-code-s-slash-line" aria-hidden="true"></i>
        </a>

    </div>
  </div>

  <section class="docstring">

      <div class="specs">

          <pre translate="no"><span class="attribute">@spec</span> get_current_url(<a href="Nostrum.Struct.Guild.html#t:id/0">Nostrum.Struct.Guild.id</a>()) :: <a href="https://hexdocs.pm/elixir/String.html#t:t/0">String.t</a>() | nil</pre>

      </div>

<p>Gets the current URL being played.</p><p>If <a href="#play/4"><code class="inline">play/4</code></a> was invoked with type <code class="inline">:url</code>, <code class="inline">:ytdl</code>, or <code class="inline">:stream</code>, this function will return
the URL given as input last time it was called.</p><p>If <a href="#play/4"><code class="inline">play/4</code></a> was invoked with type <code class="inline">:pipe</code>, <code class="inline">:raw</code>, or <code class="inline">:raw_s</code>, this will return <code class="inline">nil</code>
as the input is raw audio data, not be a readable URL string.</p>
  </section>
</section>
<section class="detail" id="get_ssrc_map/1">

  <div class="detail-header">
    <a href="#get_ssrc_map/1" class="detail-link" data-no-tooltip="" aria-label="Link to this function">
      <i class="ri-link-m" aria-hidden="true"></i>
    </a>
    <div class="heading-with-actions">
      <h1 class="signature" translate="no">get_ssrc_map(guild_id)</h1>

        <span class="note">(since 0.6.0)</span>


        <a href="https://github.com/Kraigie/nostrum/blob/master/lib/nostrum/voice.ex#L543" class="icon-action" rel="help" aria-label="View Source">
          <i class="ri-code-s-slash-line" aria-hidden="true"></i>
        </a>

    </div>
  </div>

  <section class="docstring">

      <div class="specs">

          <pre translate="no"><span class="attribute">@spec</span> get_ssrc_map(<a href="Nostrum.Struct.Guild.html#t:id/0">Nostrum.Struct.Guild.id</a>()) ::
  <a href="Nostrum.Struct.VoiceWSState.html#t:ssrc_map/0">Nostrum.Struct.VoiceWSState.ssrc_map</a>()</pre>

      </div>

<p>Gets a map of RTP SSRC to user id.</p><p>Within a voice channel, an SSRC (synchronization source) will uniquely map to a
user id of a user who is speaking.</p><p>If listening to incoming voice packets asynchronously, this function will not be
needed as the <a href="Nostrum.Struct.VoiceWSState.html#t:ssrc_map/0"><code class="inline">Nostrum.Struct.VoiceWSState.ssrc_map/0</code></a> will be available with every event.
If listening with <a href="#listen/3"><code class="inline">listen/3</code></a>, this function may be used. It is recommended to
cache the result of this function and only call it again when you encounter an
SSRC that is not present in the cached result. This is to reduce excess load on the
voice websocket and voice state processes.</p>
  </section>
</section>
<section class="detail" id="join_channel/5">

    <span id="join_channel/2"></span>

    <span id="join_channel/3"></span>

    <span id="join_channel/4"></span>

  <div class="detail-header">
    <a href="#join_channel/5" class="detail-link" data-no-tooltip="" aria-label="Link to this function">
      <i class="ri-link-m" aria-hidden="true"></i>
    </a>
    <div class="heading-with-actions">
      <h1 class="signature" translate="no">join_channel(guild_id, channel_id, self_mute \\ false, self_deaf \\ false, persist \\ true)</h1>


        <a href="https://github.com/Kraigie/nostrum/blob/master/lib/nostrum/voice.ex#L165" class="icon-action" rel="help" aria-label="View Source">
          <i class="ri-code-s-slash-line" aria-hidden="true"></i>
        </a>

    </div>
  </div>

  <section class="docstring">

      <div class="specs">

          <pre translate="no"><span class="attribute">@spec</span> join_channel(
  <a href="Nostrum.Struct.Guild.html#t:id/0">Nostrum.Struct.Guild.id</a>(),
  <a href="Nostrum.Struct.Channel.html#t:id/0">Nostrum.Struct.Channel.id</a>(),
  <a href="https://hexdocs.pm/elixir/typespecs.html#built-in-types">boolean</a>(),
  <a href="https://hexdocs.pm/elixir/typespecs.html#built-in-types">boolean</a>(),
  <a href="https://hexdocs.pm/elixir/typespecs.html#built-in-types">boolean</a>()
) :: <a href="https://hexdocs.pm/elixir/typespecs.html#built-in-types">no_return</a>() | :ok</pre>

      </div>

<p>Joins or moves the bot to a voice channel.</p><p>This function calls <a href="Nostrum.Api.html#update_voice_state/4"><code class="inline">Nostrum.Api.update_voice_state/4</code></a>.</p><p>The fifth argument <code class="inline">persist</code> defaults to <code class="inline">true</code>. When true, if calling <a href="#join_channel/5"><code class="inline">join_channel/5</code></a>
while already in a different channel in the same guild, the audio source will be persisted
in the new channel. If the audio is actively playing at the time of changing channels,
it will resume playing automatically upon joining. If there is an active audio source
that has been paused before changing channels, the audio will be able to be resumed manually if
<a href="#resume/1"><code class="inline">resume/1</code></a> is called.</p><p>If <code class="inline">persist</code> is set to false, the audio source will be destroyed before changing channels.
The same effect is achieved by calling <a href="#stop/1"><code class="inline">stop/1</code></a> or <a href="#leave_channel/1"><code class="inline">leave_channel/1</code></a> before <a href="#join_channel/5"><code class="inline">join_channel/5</code></a></p>
  </section>
</section>
<section class="detail" id="leave_channel/1">

  <div class="detail-header">
    <a href="#leave_channel/1" class="detail-link" data-no-tooltip="" aria-label="Link to this function">
      <i class="ri-link-m" aria-hidden="true"></i>
    </a>
    <div class="heading-with-actions">
      <h1 class="signature" translate="no">leave_channel(guild_id)</h1>


        <a href="https://github.com/Kraigie/nostrum/blob/master/lib/nostrum/voice.ex#L188" class="icon-action" rel="help" aria-label="View Source">
          <i class="ri-code-s-slash-line" aria-hidden="true"></i>
        </a>

    </div>
  </div>

  <section class="docstring">

      <div class="specs">

          <pre translate="no"><span class="attribute">@spec</span> leave_channel(<a href="Nostrum.Struct.Guild.html#t:id/0">Nostrum.Struct.Guild.id</a>()) :: <a href="https://hexdocs.pm/elixir/typespecs.html#built-in-types">no_return</a>() | :ok</pre>

      </div>

<p>Leaves the voice channel of the given guild id.</p><p>This function is equivalent to calling <code class="inline">Nostrum.Api.Self.update_voice_state(guild_id, nil)</code>.</p>
  </section>
</section>
<section class="detail" id="listen/3">

    <span id="listen/2"></span>

  <div class="detail-header">
    <a href="#listen/3" class="detail-link" data-no-tooltip="" aria-label="Link to this function">
      <i class="ri-link-m" aria-hidden="true"></i>
    </a>
    <div class="heading-with-actions">
      <h1 class="signature" translate="no">listen(guild_id, num_packets, raw_rtp \\ false)</h1>

        <span class="note">(since 0.6.0)</span>


        <a href="https://github.com/Kraigie/nostrum/blob/master/lib/nostrum/voice.ex#L637" class="icon-action" rel="help" aria-label="View Source">
          <i class="ri-code-s-slash-line" aria-hidden="true"></i>
        </a>

    </div>
  </div>

  <section class="docstring">

      <div class="specs">

          <pre translate="no"><span class="attribute">@spec</span> listen(<a href="Nostrum.Struct.Guild.html#t:id/0">Nostrum.Struct.Guild.id</a>(), <a href="https://hexdocs.pm/elixir/typespecs.html#basic-types">pos_integer</a>(), raw_rtp :: false) ::
  [<a href="#t:rtp_opus/0">rtp_opus</a>()] | {:error, <a href="https://hexdocs.pm/elixir/String.html#t:t/0">String.t</a>()}</pre>

          <pre translate="no"><span class="attribute">@spec</span> listen(<a href="Nostrum.Struct.Guild.html#t:id/0">Nostrum.Struct.Guild.id</a>(), <a href="https://hexdocs.pm/elixir/typespecs.html#basic-types">pos_integer</a>(), raw_rtp :: true) ::
  [<a href="https://hexdocs.pm/elixir/typespecs.html#built-in-types">binary</a>()] | {:error, <a href="https://hexdocs.pm/elixir/String.html#t:t/0">String.t</a>()}</pre>

      </div>

<p>Listen for incoming voice RTP packets.</p><h2 id="listen/3-parameters" class="section-heading">
  <a href="#listen/3-parameters" class="hover-link">
    <i class="ri-link-m" aria-hidden="true"></i>
  </a>
  <span class="text">Parameters</span>
</h2>
<ul><li><code class="inline">guild_id</code> - ID of guild that the bot is listening to.</li><li><code class="inline">num_packets</code> - Number of packets to wait for.</li><li><code class="inline">raw_rtp</code> - Whether to return raw RTP packets. Defaults to <code class="inline">false</code>.</li></ul><p>Returns a list of tuples of type <a href="#t:rtp_opus/0"><code class="inline">rtp_opus/0</code></a>.</p><p>The inner tuple contains fields from the RTP header and can be matched against
to retrieve information about the packet such as the SSRC, which identifies the source.
Note that RTP timestamps are completely unrelated to Unix timestamps.</p><p>If <code class="inline">raw_rtp</code> is set to <code class="inline">true</code>, a list of raw RTP packets is returned instead.
To extract an opus packet from an RTP packet, see <a href="#extract_opus_packet/1"><code class="inline">extract_opus_packet/1</code></a>.</p><p>This function will block until the specified number of packets is received.</p>
  </section>
</section>
<section class="detail" id="pad_opus/1">

  <div class="detail-header">
    <a href="#pad_opus/1" class="detail-link" data-no-tooltip="" aria-label="Link to this function">
      <i class="ri-link-m" aria-hidden="true"></i>
    </a>
    <div class="heading-with-actions">
      <h1 class="signature" translate="no">pad_opus(packets)</h1>

        <span class="note">(since 0.6.0)</span>


        <a href="https://github.com/Kraigie/nostrum/blob/master/lib/nostrum/voice.ex#L772" class="icon-action" rel="help" aria-label="View Source">
          <i class="ri-code-s-slash-line" aria-hidden="true"></i>
        </a>

    </div>
  </div>

  <section class="docstring">

      <div class="specs">

          <pre translate="no"><span class="attribute">@spec</span> pad_opus([<a href="#t:rtp_opus/0">rtp_opus</a>(), ...]) :: [<a href="#t:opus_packet/0">opus_packet</a>()]</pre>

      </div>

<p>Pad discontinuous chunks of opus audio with silence.</p><p>This function takes a list of <a href="#t:rtp_opus/0"><code class="inline">rtp_opus/0</code></a>, which is a tuple containing RTP bits and
opus audio data. It returns a list of opus audio packets. The reason the input has to be in
the <a href="#t:rtp_opus/0"><code class="inline">rtp_opus/0</code></a> tuple format returned by <a href="#listen/3"><code class="inline">listen/3</code></a> and async listen events is that the
RTP packet header contains info on the relative timestamps of incoming packets; the opus
packets themselves don't contain information relating to timing.</p><p>The Discord client will continue to internally increment the <code class="inline">t:rtp_timestamp()</code> when the
user is not speaking such that the duration of pauses can be determined from the RTP packets.
Bots will typically not behave this way, so if you call this function on audio produced by
a bot it is very likely that no silence will be inserted.</p><p>The use case of this function is as follows:
Consider a user speaks for two seconds, pauses for ten seconds, then speaks for another two
seconds. During the pause, no RTP packets will be received, so if you create a bitstream from
it, the resulting audio will be both two-second speaking segments consecutively without the
long pause in the middle. If you wish to preserve the timing of the speaking and include the
pause, calling this function will interleave the appropriate amount of opus silence packets
to maintain temporal fidelity.</p><p>Note that the Discord client currently sends about 10 silence packets (200 ms) each time it
detects end of speech, so creating a bitstream without first padding your audio with this
function will maintain short silences between speech segments.</p><p><em>This function should only be called on a collection of RTP packets from a single SSRC</em></p>
  </section>
</section>
<section class="detail" id="pause/1">

  <div class="detail-header">
    <a href="#pause/1" class="detail-link" data-no-tooltip="" aria-label="Link to this function">
      <i class="ri-link-m" aria-hidden="true"></i>
    </a>
    <div class="heading-with-actions">
      <h1 class="signature" translate="no">pause(guild_id)</h1>


        <a href="https://github.com/Kraigie/nostrum/blob/master/lib/nostrum/voice.ex#L364" class="icon-action" rel="help" aria-label="View Source">
          <i class="ri-code-s-slash-line" aria-hidden="true"></i>
        </a>

    </div>
  </div>

  <section class="docstring">

      <div class="specs">

          <pre translate="no"><span class="attribute">@spec</span> pause(<a href="Nostrum.Struct.Guild.html#t:id/0">Nostrum.Struct.Guild.id</a>()) :: :ok | {:error, <a href="https://hexdocs.pm/elixir/String.html#t:t/0">String.t</a>()}</pre>

      </div>

<p>Pauses the current sound being played in a voice channel.</p><p>The bot must be connected to a voice channel in the guild specified.</p><h2 id="pause/1-parameters" class="section-heading">
  <a href="#pause/1-parameters" class="hover-link">
    <i class="ri-link-m" aria-hidden="true"></i>
  </a>
  <span class="text">Parameters</span>
</h2>
<ul><li><code class="inline">guild_id</code> - ID of guild whose voice channel the sound will be paused in.</li></ul><p>Returns <code class="inline">{:error, reason}</code> if unable to pause or no sound is playing, else <code class="inline">:ok</code>.</p><p>This function is similar to <a href="#stop/1"><code class="inline">stop/1</code></a>, except that the sound may be
resumed after being paused.</p><h2 id="pause/1-examples" class="section-heading">
  <a href="#pause/1-examples" class="hover-link">
    <i class="ri-link-m" aria-hidden="true"></i>
  </a>
  <span class="text">Examples</span>
</h2>
<pre><code class="makeup elixir" translate="no"><span class="gp unselectable">iex&gt; </span><span class="nc">Nostrum.Voice</span><span class="o">.</span><span class="n">join_channel</span><span class="p" data-group-id="7963918182-1">(</span><span class="mi">123456789</span><span class="p">,</span><span class="w"> </span><span class="mi">420691337</span><span class="p" data-group-id="7963918182-1">)</span><span class="w">

</span><span class="gp unselectable">iex&gt; </span><span class="nc">Nostrum.Voice</span><span class="o">.</span><span class="n">play</span><span class="p" data-group-id="7963918182-2">(</span><span class="mi">123456789</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;~/files/twelve_hour_loop_of_waterfall_sounds.mp3&quot;</span><span class="p" data-group-id="7963918182-2">)</span><span class="w">

</span><span class="gp unselectable">iex&gt; </span><span class="nc">Nostrum.Voice</span><span class="o">.</span><span class="n">pause</span><span class="p" data-group-id="7963918182-3">(</span><span class="mi">123456789</span><span class="p" data-group-id="7963918182-3">)</span></code></pre>
  </section>
</section>
<section class="detail" id="play/4">

    <span id="play/2"></span>

    <span id="play/3"></span>

  <div class="detail-header">
    <a href="#play/4" class="detail-link" data-no-tooltip="" aria-label="Link to this function">
      <i class="ri-link-m" aria-hidden="true"></i>
    </a>
    <div class="heading-with-actions">
      <h1 class="signature" translate="no">play(guild_id, input, type \\ :url, options \\ [])</h1>


        <a href="https://github.com/Kraigie/nostrum/blob/master/lib/nostrum/voice.ex#L269" class="icon-action" rel="help" aria-label="View Source">
          <i class="ri-code-s-slash-line" aria-hidden="true"></i>
        </a>

    </div>
  </div>

  <section class="docstring">

      <div class="specs">

          <pre translate="no"><span class="attribute">@spec</span> play(<a href="Nostrum.Struct.Guild.html#t:id/0">Nostrum.Struct.Guild.id</a>(), <a href="#t:play_input/0">play_input</a>(), <a href="#t:play_type/0">play_type</a>(), <a href="https://hexdocs.pm/elixir/typespecs.html#built-in-types">keyword</a>()) ::
  :ok | {:error, <a href="https://hexdocs.pm/elixir/String.html#t:t/0">String.t</a>()}</pre>

      </div>

<p>Plays sound in the voice channel the bot is in.</p><p>The bot must be connected to a voice channel in the guild specified.</p><h2 id="play/4-parameters" class="section-heading">
  <a href="#play/4-parameters" class="hover-link">
    <i class="ri-link-m" aria-hidden="true"></i>
  </a>
  <span class="text">Parameters</span>
</h2>
<ul><li><code class="inline">guild_id</code> - ID of guild whose voice channel the sound will be played in.</li><li><code class="inline">input</code> - Audio to be played, <a href="#t:play_input/0"><code class="inline">play_input/0</code></a>. Input type determined by <code class="inline">type</code> parameter.</li><li><code class="inline">type</code> - Type of input, <a href="#t:play_type/0"><code class="inline">play_type/0</code></a> (defaults to <code class="inline">:url</code>).<ul><li><code class="inline">:url</code> Input will be <a href="https://www.ffmpeg.org/ffmpeg-protocols.html">any url that <code class="inline">ffmpeg</code> can read</a>.</li><li><code class="inline">:pipe</code> Input will be data that is piped to stdin of <code class="inline">ffmpeg</code>.</li><li><code class="inline">:ytdl</code> Input will be url for <code class="inline">youtube-dl</code>, which gets automatically piped to <code class="inline">ffmpeg</code>.</li><li><code class="inline">:stream</code> Input will be livestream url for <code class="inline">streamlink</code>, which gets automatically piped to <code class="inline">ffmpeg</code>.</li><li><code class="inline">:raw</code> Input will be an enumerable of raw opus packets. This bypasses <code class="inline">ffmpeg</code> and all options.</li><li><code class="inline">:raw_s</code> Same as <code class="inline">:raw</code> but input must be stateful, i.e. calling <a href="https://hexdocs.pm/elixir/Enum.html#take/2"><code class="inline">Enum.take/2</code></a> on <code class="inline">input</code> is not idempotent.</li></ul></li><li><code class="inline">options</code> - See options section below.</li></ul><p>Returns <code class="inline">{:error, reason}</code> if unable to play or a sound is playing, else <code class="inline">:ok</code>.</p><h2 id="play/4-options" class="section-heading">
  <a href="#play/4-options" class="hover-link">
    <i class="ri-link-m" aria-hidden="true"></i>
  </a>
  <span class="text">Options</span>
</h2>
<ul><li><code class="inline">:start_pos</code> (string) - The start position of the audio to be played. Defaults to beginning.</li><li><code class="inline">:duration</code> (string) - The duration to of the audio to be played. Defaults to entire duration.</li><li><code class="inline">:realtime</code> (boolean) - Make ffmpeg process the input in realtime instead of as fast as possible. Defaults to true.</li><li><code class="inline">:volume</code> (number) - The output volume of the audio. Default volume is 1.0.</li><li><code class="inline">:filter</code> (string) - Filter(s) to be applied to the audio. No filters applied by default.</li></ul><p>  The values of <code class="inline">:start_pos</code> and <code class="inline">:duration</code> can be <a href="https://ffmpeg.org/ffmpeg-utils.html#Time-duration">any time duration that ffmpeg can read</a>.
  The <code class="inline">:filter</code> can be used multiple times in a single call (see examples).
  The values of <code class="inline">:filter</code> can be <a href="https://ffmpeg.org/ffmpeg-filters.html#Audio-Filters">any audio filters that ffmpeg can read</a>.
  Filters will be applied in order and can be as complex as you want. The world is your oyster!</p><p>  Note that using the <code class="inline">:volume</code> option is shortcut for the &quot;volume&quot; filter, and will be added to the end of the filter chain, acting as a master volume.
  Volume values between <code class="inline">0.0</code> and <code class="inline">1.0</code> act as standard operating range where <code class="inline">0</code> is off and <code class="inline">1</code> is max.
  Values greater than <code class="inline">1.0</code> will add saturation and distortion to the audio.
  Negative values act the same as their position but reverse the polarity of the waveform.</p><p>  Having all the ffmpeg audio filters available is <em>extremely powerful</em> so it may be worth learning some of them for your use cases.
  If you use any filters to <em>increase</em> the playback speed of your audio, it's recommended to set the <code class="inline">:realtime</code> option to <code class="inline">false</code>
  because realtime processing is relative to the original playback speed.</p><h2 id="play/4-examples" class="section-heading">
  <a href="#play/4-examples" class="hover-link">
    <i class="ri-link-m" aria-hidden="true"></i>
  </a>
  <span class="text">Examples</span>
</h2>
<pre><code class="makeup elixir" translate="no"><span class="gp unselectable">iex&gt; </span><span class="nc">Nostrum.Voice</span><span class="o">.</span><span class="n">join_channel</span><span class="p" data-group-id="1841840788-1">(</span><span class="mi">123456789</span><span class="p">,</span><span class="w"> </span><span class="mi">420691337</span><span class="p" data-group-id="1841840788-1">)</span><span class="w">

</span><span class="gp unselectable">iex&gt; </span><span class="nc">Nostrum.Voice</span><span class="o">.</span><span class="n">play</span><span class="p" data-group-id="1841840788-2">(</span><span class="mi">123456789</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;~/music/FavoriteSong.mp3&quot;</span><span class="p">,</span><span class="w"> </span><span class="ss">:url</span><span class="p" data-group-id="1841840788-2">)</span><span class="w">

</span><span class="gp unselectable">iex&gt; </span><span class="nc">Nostrum.Voice</span><span class="o">.</span><span class="n">play</span><span class="p" data-group-id="1841840788-3">(</span><span class="mi">123456789</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;~/music/NotFavoriteButStillGoodSong.mp3&quot;</span><span class="p">,</span><span class="w"> </span><span class="ss">:url</span><span class="p">,</span><span class="w"> </span><span class="ss">volume</span><span class="p">:</span><span class="w"> </span><span class="mf">0.5</span><span class="p" data-group-id="1841840788-3">)</span><span class="w">

</span><span class="gp unselectable">iex&gt; </span><span class="nc">Nostrum.Voice</span><span class="o">.</span><span class="n">play</span><span class="p" data-group-id="1841840788-4">(</span><span class="mi">123456789</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;~/music/ThisWillBeHeavilyDistorted.mp3&quot;</span><span class="p">,</span><span class="w"> </span><span class="ss">:url</span><span class="p">,</span><span class="w"> </span><span class="ss">volume</span><span class="p">:</span><span class="w"> </span><span class="mi">1000</span><span class="p" data-group-id="1841840788-4">)</span></code></pre><pre><code class="makeup elixir" translate="no"><span class="gp unselectable">iex&gt; </span><span class="nc">Nostrum.Voice</span><span class="o">.</span><span class="n">join_channel</span><span class="p" data-group-id="2533778404-1">(</span><span class="mi">123456789</span><span class="p">,</span><span class="w"> </span><span class="mi">420691337</span><span class="p" data-group-id="2533778404-1">)</span><span class="w">

</span><span class="gp unselectable">iex&gt; </span><span class="n">raw_data</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nc">File</span><span class="o">.</span><span class="n">read!</span><span class="p" data-group-id="2533778404-2">(</span><span class="s">&quot;~/music/sound_effect.wav&quot;</span><span class="p" data-group-id="2533778404-2">)</span><span class="w">

</span><span class="gp unselectable">iex&gt; </span><span class="nc">Nostrum.Voice</span><span class="o">.</span><span class="n">play</span><span class="p" data-group-id="2533778404-3">(</span><span class="mi">123456789</span><span class="p">,</span><span class="w"> </span><span class="n">raw_data</span><span class="p">,</span><span class="w"> </span><span class="ss">:pipe</span><span class="p" data-group-id="2533778404-3">)</span></code></pre><pre><code class="makeup elixir" translate="no"><span class="gp unselectable">iex&gt; </span><span class="nc">Nostrum.Voice</span><span class="o">.</span><span class="n">join_channel</span><span class="p" data-group-id="1431083258-1">(</span><span class="mi">123456789</span><span class="p">,</span><span class="w"> </span><span class="mi">420691337</span><span class="p" data-group-id="1431083258-1">)</span><span class="w">

</span><span class="gp unselectable">iex&gt; </span><span class="nc">Nostrum.Voice</span><span class="o">.</span><span class="n">play</span><span class="p" data-group-id="1431083258-2">(</span><span class="mi">123456789</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;https://www.youtube.com/watch?v=b4RJ-QGOtw4&quot;</span><span class="p">,</span><span class="w"> </span><span class="ss">:ytdl</span><span class="p">,</span><span class="w">
</span><span class="gp unselectable">...&gt; </span><span class="w">  </span><span class="ss">realtime</span><span class="p">:</span><span class="w"> </span><span class="no">true</span><span class="p">,</span><span class="w"> </span><span class="ss">start_pos</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;0:17&quot;</span><span class="p">,</span><span class="w"> </span><span class="ss">duration</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;30&quot;</span><span class="p" data-group-id="1431083258-2">)</span><span class="w">

</span><span class="gp unselectable">iex&gt; </span><span class="nc">Nostrum.Voice</span><span class="o">.</span><span class="n">play</span><span class="p" data-group-id="1431083258-3">(</span><span class="mi">123456789</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;https://www.youtube.com/watch?v=0ngcL_5ekXo&quot;</span><span class="p">,</span><span class="w"> </span><span class="ss">:ytdl</span><span class="p">,</span><span class="w">
</span><span class="gp unselectable">...&gt; </span><span class="w">  </span><span class="ss">filter</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;lowpass=f=1200&quot;</span><span class="p">,</span><span class="w"> </span><span class="ss">filter</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;highpass=f=300&quot;</span><span class="p">,</span><span class="w"> </span><span class="ss">filter</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;asetrate=44100*0.5&quot;</span><span class="p" data-group-id="1431083258-3">)</span></code></pre><pre><code class="makeup elixir" translate="no"><span class="gp unselectable">iex&gt; </span><span class="nc">Nostrum.Voice</span><span class="o">.</span><span class="n">join_channel</span><span class="p" data-group-id="3051758964-1">(</span><span class="mi">123456789</span><span class="p">,</span><span class="w"> </span><span class="mi">420691337</span><span class="p" data-group-id="3051758964-1">)</span><span class="w">

</span><span class="gp unselectable">iex&gt; </span><span class="nc">Nostrum.Voice</span><span class="o">.</span><span class="n">play</span><span class="p" data-group-id="3051758964-2">(</span><span class="mi">123456789</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;https://www.twitch.tv/pestily&quot;</span><span class="p">,</span><span class="w"> </span><span class="ss">:stream</span><span class="p" data-group-id="3051758964-2">)</span><span class="w">

</span><span class="gp unselectable">iex&gt; </span><span class="nc">Nostrum.Voice</span><span class="o">.</span><span class="n">play</span><span class="p" data-group-id="3051758964-3">(</span><span class="mi">123456789</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;https://youtu.be/LN4r-K8ZP5Q&quot;</span><span class="p">,</span><span class="w"> </span><span class="ss">:stream</span><span class="p" data-group-id="3051758964-3">)</span></code></pre>
  </section>
</section>
<section class="detail" id="playing?/1">

  <div class="detail-header">
    <a href="#playing?/1" class="detail-link" data-no-tooltip="" aria-label="Link to this function">
      <i class="ri-link-m" aria-hidden="true"></i>
    </a>
    <div class="heading-with-actions">
      <h1 class="signature" translate="no">playing?(guild_id)</h1>


        <a href="https://github.com/Kraigie/nostrum/blob/master/lib/nostrum/voice.ex#L451" class="icon-action" rel="help" aria-label="View Source">
          <i class="ri-code-s-slash-line" aria-hidden="true"></i>
        </a>

    </div>
  </div>

  <section class="docstring">

      <div class="specs">

          <pre translate="no"><span class="attribute">@spec</span> playing?(<a href="Nostrum.Struct.Guild.html#t:id/0">Nostrum.Struct.Guild.id</a>()) :: <a href="https://hexdocs.pm/elixir/typespecs.html#built-in-types">boolean</a>()</pre>

      </div>

<p>Checks if the bot is playing sound in a voice channel.</p><h2 id="playing?/1-parameters" class="section-heading">
  <a href="#playing?/1-parameters" class="hover-link">
    <i class="ri-link-m" aria-hidden="true"></i>
  </a>
  <span class="text">Parameters</span>
</h2>
<ul><li><code class="inline">guild_id</code> - ID of guild to check if audio being played.</li></ul><p>Returns <code class="inline">true</code> if the bot is currently being played in a voice channel, otherwise <code class="inline">false</code>.</p><h2 id="playing?/1-examples" class="section-heading">
  <a href="#playing?/1-examples" class="hover-link">
    <i class="ri-link-m" aria-hidden="true"></i>
  </a>
  <span class="text">Examples</span>
</h2>
<pre><code class="makeup elixir" translate="no"><span class="gp unselectable">iex&gt; </span><span class="nc">Nostrum.Voice</span><span class="o">.</span><span class="n">join_channel</span><span class="p" data-group-id="4311347691-1">(</span><span class="mi">123456789</span><span class="p">,</span><span class="w"> </span><span class="mi">420691337</span><span class="p" data-group-id="4311347691-1">)</span><span class="w">

</span><span class="gp unselectable">iex&gt; </span><span class="nc">Nostrum.Voice</span><span class="o">.</span><span class="n">play</span><span class="p" data-group-id="4311347691-2">(</span><span class="mi">123456789</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;https://a-real-site.biz/RickRoll.m4a&quot;</span><span class="p" data-group-id="4311347691-2">)</span><span class="w">

</span><span class="gp unselectable">iex&gt; </span><span class="nc">Nostrum.Voice</span><span class="o">.</span><span class="n">playing?</span><span class="p" data-group-id="4311347691-3">(</span><span class="mi">123456789</span><span class="p" data-group-id="4311347691-3">)</span><span class="w">
</span><span class="no">true</span><span class="w">

</span><span class="gp unselectable">iex&gt; </span><span class="nc">Nostrum.Voice</span><span class="o">.</span><span class="n">pause</span><span class="p" data-group-id="4311347691-4">(</span><span class="mi">123456789</span><span class="p" data-group-id="4311347691-4">)</span><span class="w">

</span><span class="gp unselectable">iex&gt; </span><span class="nc">Nostrum.Voice</span><span class="o">.</span><span class="n">playing?</span><span class="p" data-group-id="4311347691-5">(</span><span class="mi">123456789</span><span class="p" data-group-id="4311347691-5">)</span><span class="w">
</span><span class="no">false</span></code></pre>
  </section>
</section>
<section class="detail" id="ready?/1">

  <div class="detail-header">
    <a href="#ready?/1" class="detail-link" data-no-tooltip="" aria-label="Link to this function">
      <i class="ri-link-m" aria-hidden="true"></i>
    </a>
    <div class="heading-with-actions">
      <h1 class="signature" translate="no">ready?(guild_id)</h1>


        <a href="https://github.com/Kraigie/nostrum/blob/master/lib/nostrum/voice.ex#L480" class="icon-action" rel="help" aria-label="View Source">
          <i class="ri-code-s-slash-line" aria-hidden="true"></i>
        </a>

    </div>
  </div>

  <section class="docstring">

      <div class="specs">

          <pre translate="no"><span class="attribute">@spec</span> ready?(<a href="Nostrum.Struct.Guild.html#t:id/0">Nostrum.Struct.Guild.id</a>()) :: <a href="https://hexdocs.pm/elixir/typespecs.html#built-in-types">boolean</a>()</pre>

      </div>

<p>Checks if the connection is up and ready to play audio.</p><h2 id="ready?/1-parameters" class="section-heading">
  <a href="#ready?/1-parameters" class="hover-link">
    <i class="ri-link-m" aria-hidden="true"></i>
  </a>
  <span class="text">Parameters</span>
</h2>
<ul><li><code class="inline">guild_id</code> - ID of guild to check if voice connection is up.</li></ul><p>Returns <code class="inline">true</code> if the bot is connected to a voice channel, otherwise <code class="inline">false</code>.</p><p>This function does not check if audio is already playing. For that, use <a href="#playing?/1"><code class="inline">playing?/1</code></a>.</p><h2 id="ready?/1-examples" class="section-heading">
  <a href="#ready?/1-examples" class="hover-link">
    <i class="ri-link-m" aria-hidden="true"></i>
  </a>
  <span class="text">Examples</span>
</h2>
<pre><code class="makeup elixir" translate="no"><span class="gp unselectable">iex&gt; </span><span class="nc">Nostrum.Voice</span><span class="o">.</span><span class="n">join_channel</span><span class="p" data-group-id="5742803084-1">(</span><span class="mi">123456789</span><span class="p">,</span><span class="w"> </span><span class="mi">420691337</span><span class="p" data-group-id="5742803084-1">)</span><span class="w">

</span><span class="gp unselectable">iex&gt; </span><span class="nc">Nostrum.Voice</span><span class="o">.</span><span class="n">ready?</span><span class="p" data-group-id="5742803084-2">(</span><span class="mi">123456789</span><span class="p" data-group-id="5742803084-2">)</span><span class="w">
</span><span class="no">true</span><span class="w">

</span><span class="gp unselectable">iex&gt; </span><span class="nc">Nostrum.Voice</span><span class="o">.</span><span class="n">leave_channel</span><span class="p" data-group-id="5742803084-3">(</span><span class="mi">123456789</span><span class="p" data-group-id="5742803084-3">)</span><span class="w">

</span><span class="gp unselectable">iex&gt; </span><span class="nc">Nostrum.Voice</span><span class="o">.</span><span class="n">ready?</span><span class="p" data-group-id="5742803084-4">(</span><span class="mi">123456789</span><span class="p" data-group-id="5742803084-4">)</span><span class="w">
</span><span class="no">false</span></code></pre>
  </section>
</section>
<section class="detail" id="resume/1">

  <div class="detail-header">
    <a href="#resume/1" class="detail-link" data-no-tooltip="" aria-label="Link to this function">
      <i class="ri-link-m" aria-hidden="true"></i>
    </a>
    <div class="heading-with-actions">
      <h1 class="signature" translate="no">resume(guild_id)</h1>


        <a href="https://github.com/Kraigie/nostrum/blob/master/lib/nostrum/voice.ex#L406" class="icon-action" rel="help" aria-label="View Source">
          <i class="ri-code-s-slash-line" aria-hidden="true"></i>
        </a>

    </div>
  </div>

  <section class="docstring">

      <div class="specs">

          <pre translate="no"><span class="attribute">@spec</span> resume(<a href="Nostrum.Struct.Guild.html#t:id/0">Nostrum.Struct.Guild.id</a>()) :: :ok | {:error, <a href="https://hexdocs.pm/elixir/String.html#t:t/0">String.t</a>()}</pre>

      </div>

<p>Resumes playing the current paused sound in a voice channel.</p><p>The bot must be connected to a voice channel in the guild specified.</p><h2 id="resume/1-parameters" class="section-heading">
  <a href="#resume/1-parameters" class="hover-link">
    <i class="ri-link-m" aria-hidden="true"></i>
  </a>
  <span class="text">Parameters</span>
</h2>
<ul><li><code class="inline">guild_id</code> - ID of guild whose voice channel the sound will be resumed in.</li></ul><p>Returns <code class="inline">{:error, reason}</code> if unable to resume or no sound has been paused, otherwise returns <code class="inline">:ok</code>.</p><p>This function is used to resume a sound that had previously been paused.</p><h2 id="resume/1-examples" class="section-heading">
  <a href="#resume/1-examples" class="hover-link">
    <i class="ri-link-m" aria-hidden="true"></i>
  </a>
  <span class="text">Examples</span>
</h2>
<pre><code class="makeup elixir" translate="no"><span class="gp unselectable">iex&gt; </span><span class="nc">Nostrum.Voice</span><span class="o">.</span><span class="n">join_channel</span><span class="p" data-group-id="3044453490-1">(</span><span class="mi">123456789</span><span class="p">,</span><span class="w"> </span><span class="mi">420691337</span><span class="p" data-group-id="3044453490-1">)</span><span class="w">

</span><span class="gp unselectable">iex&gt; </span><span class="nc">Nostrum.Voice</span><span class="o">.</span><span class="n">play</span><span class="p" data-group-id="3044453490-2">(</span><span class="mi">123456789</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;~/stuff/Toto - Africa (Bass Boosted)&quot;</span><span class="p" data-group-id="3044453490-2">)</span><span class="w">

</span><span class="gp unselectable">iex&gt; </span><span class="nc">Nostrum.Voice</span><span class="o">.</span><span class="n">pause</span><span class="p" data-group-id="3044453490-3">(</span><span class="mi">123456789</span><span class="p" data-group-id="3044453490-3">)</span><span class="w">

</span><span class="gp unselectable">iex&gt; </span><span class="nc">Nostrum.Voice</span><span class="o">.</span><span class="n">resume</span><span class="p" data-group-id="3044453490-4">(</span><span class="mi">123456789</span><span class="p" data-group-id="3044453490-4">)</span></code></pre>
  </section>
</section>
<section class="detail" id="send_frames/2">

  <div class="detail-header">
    <a href="#send_frames/2" class="detail-link" data-no-tooltip="" aria-label="Link to this function">
      <i class="ri-link-m" aria-hidden="true"></i>
    </a>
    <div class="heading-with-actions">
      <h1 class="signature" translate="no">send_frames(guild_id, frames)</h1>

        <span class="note">(since 0.5.0)</span>


        <a href="https://github.com/Kraigie/nostrum/blob/master/lib/nostrum/voice.ex#L579" class="icon-action" rel="help" aria-label="View Source">
          <i class="ri-code-s-slash-line" aria-hidden="true"></i>
        </a>

    </div>
  </div>

  <section class="docstring">

      <div class="specs">

          <pre translate="no"><span class="attribute">@spec</span> send_frames(<a href="Nostrum.Struct.Guild.html#t:id/0">Nostrum.Struct.Guild.id</a>(), [<a href="#t:opus_packet/0">opus_packet</a>()]) ::
  :ok | {:error, <a href="https://hexdocs.pm/elixir/String.html#t:t/0">String.t</a>()}</pre>

      </div>

<p>Low-level. Send pre-encoded audio packets directly.</p><p>Speaking should be set to true via <a href="#set_is_speaking/2"><code class="inline">Nostrum.Voice.set_is_speaking/2</code></a> before sending frames.</p><p>Opus frames will be encrypted and prefixed with the appropriate RTP header and sent immediately.
The length of <code class="inline">frames</code> depends on how often you wish to send a sequence of frames.
A single frame contains 20ms of audio. Sending more than 50 frames (1 second of audio)
in a single function call may result in inconsistent playback rates.</p><p><a href="#playing?/1"><code class="inline">Nostrum.Voice.playing?/1</code></a> will not return accurate values when using <a href="#send_frames/2"><code class="inline">send_frames/2</code></a>
instead of <a href="#play/4"><code class="inline">Nostrum.Voice.play/4</code></a></p>
  </section>
</section>
<section class="detail" id="set_is_speaking/2">

  <div class="detail-header">
    <a href="#set_is_speaking/2" class="detail-link" data-no-tooltip="" aria-label="Link to this function">
      <i class="ri-link-m" aria-hidden="true"></i>
    </a>
    <div class="heading-with-actions">
      <h1 class="signature" translate="no">set_is_speaking(guild_id, speaking)</h1>

        <span class="note">(since 0.5.0)</span>


        <a href="https://github.com/Kraigie/nostrum/blob/master/lib/nostrum/voice.ex#L562" class="icon-action" rel="help" aria-label="View Source">
          <i class="ri-code-s-slash-line" aria-hidden="true"></i>
        </a>

    </div>
  </div>

  <section class="docstring">

      <div class="specs">

          <pre translate="no"><span class="attribute">@spec</span> set_is_speaking(<a href="Nostrum.Struct.Guild.html#t:id/0">Nostrum.Struct.Guild.id</a>(), <a href="https://hexdocs.pm/elixir/typespecs.html#built-in-types">boolean</a>()) :: :ok</pre>

      </div>

<p>Low-level. Set speaking flag in voice channel.</p><p>This function does not need to be called unless you are sending audio frames
directly using <a href="#send_frames/2"><code class="inline">Nostrum.Voice.send_frames/2</code></a>.</p>
  </section>
</section>
<section class="detail" id="start_listen_async/1">

  <div class="detail-header">
    <a href="#start_listen_async/1" class="detail-link" data-no-tooltip="" aria-label="Link to this function">
      <i class="ri-link-m" aria-hidden="true"></i>
    </a>
    <div class="heading-with-actions">
      <h1 class="signature" translate="no">start_listen_async(guild_id)</h1>

        <span class="note">(since 0.6.0)</span>


        <a href="https://github.com/Kraigie/nostrum/blob/master/lib/nostrum/voice.ex#L666" class="icon-action" rel="help" aria-label="View Source">
          <i class="ri-code-s-slash-line" aria-hidden="true"></i>
        </a>

    </div>
  </div>

  <section class="docstring">

      <div class="specs">

          <pre translate="no"><span class="attribute">@spec</span> start_listen_async(<a href="Nostrum.Struct.Guild.html#t:id/0">Nostrum.Struct.Guild.id</a>()) :: :ok | {:error, <a href="https://hexdocs.pm/elixir/typespecs.html#built-in-types">term</a>()}</pre>

      </div>

<p>Start asynchronously receiving events for incoming RTP packets for an active voice session.</p><p>This is an alternative to the blocking <a href="#listen/3"><code class="inline">listen/3</code></a>. Events will be generated asynchronously
when a user is speaking. See <a href="Nostrum.Consumer.html#t:voice_incoming_packet/0"><code class="inline">Nostrum.Consumer.voice_incoming_packet/0</code></a> for more info.</p>
  </section>
</section>
<section class="detail" id="stop/1">

  <div class="detail-header">
    <a href="#stop/1" class="detail-link" data-no-tooltip="" aria-label="Link to this function">
      <i class="ri-link-m" aria-hidden="true"></i>
    </a>
    <div class="heading-with-actions">
      <h1 class="signature" translate="no">stop(guild_id)</h1>


        <a href="https://github.com/Kraigie/nostrum/blob/master/lib/nostrum/voice.ex#L322" class="icon-action" rel="help" aria-label="View Source">
          <i class="ri-code-s-slash-line" aria-hidden="true"></i>
        </a>

    </div>
  </div>

  <section class="docstring">

      <div class="specs">

          <pre translate="no"><span class="attribute">@spec</span> stop(<a href="Nostrum.Struct.Guild.html#t:id/0">Nostrum.Struct.Guild.id</a>()) :: :ok | {:error, <a href="https://hexdocs.pm/elixir/String.html#t:t/0">String.t</a>()}</pre>

      </div>

<p>Stops the current sound being played in a voice channel.</p><p>The bot must be connected to a voice channel in the guild specified.</p><h2 id="stop/1-parameters" class="section-heading">
  <a href="#stop/1-parameters" class="hover-link">
    <i class="ri-link-m" aria-hidden="true"></i>
  </a>
  <span class="text">Parameters</span>
</h2>
<ul><li><code class="inline">guild_id</code> - ID of guild whose voice channel the sound will be stopped in.</li></ul><p>Returns <code class="inline">{:error, reason}</code> if unable to stop or no sound is playing, else <code class="inline">:ok</code>.</p><p>If a sound has finished playing, this function does not need to be called to start
playing another sound.</p><h2 id="stop/1-examples" class="section-heading">
  <a href="#stop/1-examples" class="hover-link">
    <i class="ri-link-m" aria-hidden="true"></i>
  </a>
  <span class="text">Examples</span>
</h2>
<pre><code class="makeup elixir" translate="no"><span class="gp unselectable">iex&gt; </span><span class="nc">Nostrum.Voice</span><span class="o">.</span><span class="n">join_channel</span><span class="p" data-group-id="3476091248-1">(</span><span class="mi">123456789</span><span class="p">,</span><span class="w"> </span><span class="mi">420691337</span><span class="p" data-group-id="3476091248-1">)</span><span class="w">

</span><span class="gp unselectable">iex&gt; </span><span class="nc">Nostrum.Voice</span><span class="o">.</span><span class="n">play</span><span class="p" data-group-id="3476091248-2">(</span><span class="mi">123456789</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;http://brandthill.com/files/weird_dubstep_noises.mp3&quot;</span><span class="p" data-group-id="3476091248-2">)</span><span class="w">

</span><span class="gp unselectable">iex&gt; </span><span class="nc">Nostrum.Voice</span><span class="o">.</span><span class="n">stop</span><span class="p" data-group-id="3476091248-3">(</span><span class="mi">123456789</span><span class="p" data-group-id="3476091248-3">)</span></code></pre>
  </section>
</section>
<section class="detail" id="stop_listen_async/1">

  <div class="detail-header">
    <a href="#stop_listen_async/1" class="detail-link" data-no-tooltip="" aria-label="Link to this function">
      <i class="ri-link-m" aria-hidden="true"></i>
    </a>
    <div class="heading-with-actions">
      <h1 class="signature" translate="no">stop_listen_async(guild_id)</h1>

        <span class="note">(since 0.6.0)</span>


        <a href="https://github.com/Kraigie/nostrum/blob/master/lib/nostrum/voice.ex#L673" class="icon-action" rel="help" aria-label="View Source">
          <i class="ri-code-s-slash-line" aria-hidden="true"></i>
        </a>

    </div>
  </div>

  <section class="docstring">

      <div class="specs">

          <pre translate="no"><span class="attribute">@spec</span> stop_listen_async(<a href="Nostrum.Struct.Guild.html#t:id/0">Nostrum.Struct.Guild.id</a>()) :: :ok | {:error, <a href="https://hexdocs.pm/elixir/typespecs.html#built-in-types">term</a>()}</pre>

      </div>

<p>Stop asynchronously receiving events for incoming RTP packets for an active voice session.</p>
  </section>
</section>

    </div>
  </section>

    <footer class="footer">
      <p>

          <span class="line">
            <a href="https://hex.pm/packages/nostrum/0.11.0-dev" class="footer-hex-package">Hex Package</a>

            <a href="https://preview.hex.pm/preview/nostrum/0.11.0-dev">Hex Preview</a>

          </span>

        <span class="line">
          <button class="a-main footer-button display-quick-switch" title="Search HexDocs packages">
            Search HexDocs
          </button>

            <a href="nostrum.epub" title="ePub version">
              Download ePub version
            </a>

        </span>
      </p>

      <p class="built-using">
        Built using
        <a href="https://github.com/elixir-lang/ex_doc" title="ExDoc" target="_blank" rel="help noopener" translate="no">ExDoc</a> (v0.37.0) for the

          <a href="https://elixir-lang.org" title="Elixir" target="_blank" translate="no">Elixir programming language</a>

      </p>

    </footer>
  </div>
</main>
</div>

  </body>
</html>
