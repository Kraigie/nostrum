<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="generator" content="ExDoc v0.28.0">
    <meta name="project" content="Nostrum v0.5.0">

    <title>Nostrum.Util â€” Nostrum v0.5.0</title>
    <link rel="stylesheet" href="dist/elixir-a816d167216329cc463d.css" />

    <script src="dist/sidebar_items-8a4734f7ca.js"></script>

      <script src="docs_config.js"></script>

    <script async src="dist/app-80aa23c1d96b6dc3c064.js"></script>


  </head>
  <body data-type="modules">
    <script>

      try {
        if (localStorage.getItem('night-mode') === 'true') {
          document.body.classList.add('night-mode');
        }
      } catch (error) { }
    </script>

<div class="main">


<section class="sidebar">
  <button class="sidebar-button sidebar-toggle">
    <i class="ri-menu-line ri-lg" title="Collapse/expand sidebar"></i>
  </button>

  <form class="sidebar-search" action="search.html">
    <button type="submit" class="search-button" aria-label="Submit Search">
      <i class="ri-search-2-line" aria-hidden="true" title="Submit search"></i>
    </button>
    <button type="button" tabindex="-1" class="search-close-button" aria-label="Cancel Search">
      <i class="ri-close-line ri-lg" aria-hidden="true" title="Cancel search"></i>
    </button>
    <label class="search-label">
      <input name="q" type="text" class="search-input" placeholder="Search..." aria-label="Input your search terms" autocomplete="off" />
    </label>
  </form>

  <div class="autocomplete">
    <div class="autocomplete-results">
    </div>
  </div>

  <div class="sidebar-header">

    <div class="sidebar-projectDetails">
      <a href="https://github.com/Kraigie/nostrum" class="sidebar-projectName" translate="no">
Nostrum
      </a>
      <strong class="sidebar-projectVersion" translate="no">
        v0.5.0
      </strong>
    </div>
    <ul class="sidebar-listNav">
      <li><a id="extras-list-link" href="#full-list">Pages</a></li>

        <li><a id="modules-list-link" href="#full-list">Modules</a></li>


        <li><a id="tasks-list-link" href="#full-list"><span translate="no">Mix</span> Tasks</a></li>

    </ul>
  </div>

  <div class="gradient"></div>
  <ul id="full-list" class="sidebar-fullList"></ul>
</section>

<section class="content">
  <div class="content-outer">
    <div id="content" class="content-inner">

<h1>
<button class="settings display-settings">
  <i class="ri-settings-3-line"></i>
  <span class="sr-only">Settings</span>
</button>


    <a href="https://github.com/Kraigie/nostrum/blob/master/lib/nostrum/util.ex#L1" title="View Source" class="view-source" rel="help">
      <i class="ri-code-s-slash-line" aria-hidden="true"></i>
      <span class="sr-only">View Source</span>
    </a>

  <span translate="no">Nostrum.Util</span> 
  <small class="app-vsn" translate="no">(Nostrum v0.5.0)</small>

</h1>


  <section id="moduledoc">
<p>Utility functions</p>
  </section>


  <section id="summary" class="details-list">
    <h1 class="section-heading">
      <a class="hover-link" href="#summary">
        <i class="ri-link-m" aria-hidden="true"></i>
        <span class="sr-only">Link to this section</span>
      </a>
      Summary
    </h1>

  <div class="summary-functions summary">
    <h2>
      <a href="#functions">Functions</a>
    </h2>

      <div class="summary-row">
        <div class="summary-signature">
          <a href="#enum_to_struct/2" translate="no">enum_to_struct(enum, struct)</a>

        </div>

      </div>

      <div class="summary-row">
        <div class="summary-signature">
          <a href="#gateway/0" translate="no">gateway()</a>

        </div>

          <div class="summary-synopsis"><p>Returns the gateway url and shard count for current websocket connections.</p></div>

      </div>

      <div class="summary-row">
        <div class="summary-signature">
          <a href="#get_all_shard_latencies/0" translate="no">get_all_shard_latencies()</a>

        </div>

          <div class="summary-synopsis"><p>Gets the latencies of all shard connections.</p></div>

      </div>

      <div class="summary-row">
        <div class="summary-signature">
          <a href="#get_shard_latency/1" translate="no">get_shard_latency(state)</a>

        </div>

          <div class="summary-synopsis"><p>Gets the latency of the shard connection from a <code class="inline">Nostrum.Struct.WSState.t()</code> struct.</p></div>

      </div>

      <div class="summary-row">
        <div class="summary-signature">
          <a href="#maybe_to_atom/1" translate="no">maybe_to_atom(token)</a>

        </div>

          <div class="summary-synopsis"><p>Attempts to convert a string to an atom.</p></div>

      </div>

      <div class="summary-row">
        <div class="summary-signature">
          <a href="#maybe_to_datetime/1" translate="no">maybe_to_datetime(stamp)</a>

        </div>

          <div class="summary-synopsis"><p>Converts possibly nil ISO8601 timestamp to a <a href="https://hexdocs.pm/elixir/DateTime.html"><code class="inline">DateTime</code></a></p></div>

      </div>

      <div class="summary-row">
        <div class="summary-signature">
          <a href="#now/0" translate="no">now()</a>

        </div>

          <div class="summary-synopsis"><p>Returns the number of milliseconds since unix epoch.</p></div>

      </div>

      <div class="summary-row">
        <div class="summary-signature">
          <a href="#now_iso/0" translate="no">now_iso()</a>

        </div>

          <div class="summary-synopsis"><p>Returns the current date as an ISO formatted string.</p></div>

      </div>

      <div class="summary-row">
        <div class="summary-signature">
          <a href="#num_shards/0" translate="no">num_shards()</a>

        </div>

          <div class="summary-synopsis"><p>Returns the number of shards.</p></div>

      </div>

      <div class="summary-row">
        <div class="summary-signature">
          <a href="#safe_atom_map/1" translate="no">safe_atom_map(term)</a>

        </div>

          <div class="summary-synopsis"><p>Converts a map into an atom-keyed map.</p></div>

      </div>

      <div class="summary-row">
        <div class="summary-signature">
          <a href="#unused_atoms/0" translate="no">unused_atoms()</a>

        </div>

          <div class="summary-synopsis"><p>Since we're being sacrilegious and converting strings to atoms from the WS, there will be some
atoms that we see that aren't defined in any Discord structs. This method mainly serves as a
means to define those atoms once so the user isn't warned about them in the
<a href="#maybe_to_atom/1"><code class="inline">Nostrum.Util.maybe_to_atom/1</code></a> function when they are in fact harmless.</p></div>

      </div>

      <div class="summary-row">
        <div class="summary-signature">
          <a href="#usec_now/0" translate="no">usec_now()</a>

        </div>

          <div class="summary-synopsis"><p>Returns the number of microseconds since unix epoch.</p></div>

      </div>

  </div>

  </section>


  <section id="functions" class="details-list">
    <h1 class="section-heading">
      <a class="hover-link" href="#functions">
        <i class="ri-link-m" aria-hidden="true"></i>
        <span class="sr-only">Link to this section</span>
      </a>
Functions
    </h1>
    <div class="functions-list">
<section class="detail" id="enum_to_struct/2">

  <div class="detail-header">
    <a href="#enum_to_struct/2" class="detail-link" title="Link to this function">
      <i class="ri-link-m" aria-hidden="true"></i>
      <span class="sr-only">Link to this function</span>
    </a>
    <h1 class="signature" translate="no">enum_to_struct(enum, struct)</h1>

      <a href="https://github.com/Kraigie/nostrum/blob/master/lib/nostrum/util.ex#L44" class="view-source" rel="help" title="View Source">
       <i class="ri-code-s-slash-line" aria-hidden="true"></i>
       <span class="sr-only">View Source</span>
     </a>


  </div>

  <section class="docstring">


  </section>
</section>
<section class="detail" id="gateway/0">

  <div class="detail-header">
    <a href="#gateway/0" class="detail-link" title="Link to this function">
      <i class="ri-link-m" aria-hidden="true"></i>
      <span class="sr-only">Link to this function</span>
    </a>
    <h1 class="signature" translate="no">gateway()</h1>

      <a href="https://github.com/Kraigie/nostrum/blob/master/lib/nostrum/util.ex#L90" class="view-source" rel="help" title="View Source">
       <i class="ri-code-s-slash-line" aria-hidden="true"></i>
       <span class="sr-only">View Source</span>
     </a>


  </div>

  <section class="docstring">

      <h2>Specs</h2>
      <div class="specs">

          <pre translate="no">gateway() :: {<a href="https://hexdocs.pm/elixir/String.html#t:t/0">String.t</a>(), <a href="https://hexdocs.pm/elixir/typespecs.html#basic-types">integer</a>()}</pre>

      </div>

<p>Returns the gateway url and shard count for current websocket connections.</p><p>If by chance no gateway connection has been made, will fetch the url to use and store it
for future use.</p>
  </section>
</section>
<section class="detail" id="get_all_shard_latencies/0">

  <div class="detail-header">
    <a href="#get_all_shard_latencies/0" class="detail-link" title="Link to this function">
      <i class="ri-link-m" aria-hidden="true"></i>
      <span class="sr-only">Link to this function</span>
    </a>
    <h1 class="signature" translate="no">get_all_shard_latencies()</h1>

      <a href="https://github.com/Kraigie/nostrum/blob/master/lib/nostrum/util.ex#L248" class="view-source" rel="help" title="View Source">
       <i class="ri-code-s-slash-line" aria-hidden="true"></i>
       <span class="sr-only">View Source</span>
     </a>


  </div>

  <section class="docstring">

      <h2>Specs</h2>
      <div class="specs">

          <pre translate="no">get_all_shard_latencies() :: %{
  required(<a href="Nostrum.Struct.WSState.html#t:shard_num/0">Nostrum.Struct.WSState.shard_num</a>()) =&gt; <a href="https://hexdocs.pm/elixir/typespecs.html#basic-types">non_neg_integer</a>() | nil
}</pre>

      </div>

<p>Gets the latencies of all shard connections.</p><p>Calls <a href="#get_shard_latency/1"><code class="inline">get_shard_latency/1</code></a> on all shards and returns a map whose keys are
shard nums and whose values are latencies in milliseconds.</p>
  </section>
</section>
<section class="detail" id="get_shard_latency/1">

  <div class="detail-header">
    <a href="#get_shard_latency/1" class="detail-link" title="Link to this function">
      <i class="ri-link-m" aria-hidden="true"></i>
      <span class="sr-only">Link to this function</span>
    </a>
    <h1 class="signature" translate="no">get_shard_latency(state)</h1>

      <a href="https://github.com/Kraigie/nostrum/blob/master/lib/nostrum/util.ex#L232" class="view-source" rel="help" title="View Source">
       <i class="ri-code-s-slash-line" aria-hidden="true"></i>
       <span class="sr-only">View Source</span>
     </a>


  </div>

  <section class="docstring">

      <h2>Specs</h2>
      <div class="specs">

          <pre translate="no">get_shard_latency(<a href="Nostrum.Struct.WSState.html#t:t/0">Nostrum.Struct.WSState.t</a>()) :: <a href="https://hexdocs.pm/elixir/typespecs.html#basic-types">non_neg_integer</a>() | nil</pre>

      </div>

<p>Gets the latency of the shard connection from a <code class="inline">Nostrum.Struct.WSState.t()</code> struct.</p><p>Returns the latency in milliseconds as an integer, returning nil if unknown.</p>
  </section>
</section>
<section class="detail" id="maybe_to_atom/1">

  <div class="detail-header">
    <a href="#maybe_to_atom/1" class="detail-link" title="Link to this function">
      <i class="ri-link-m" aria-hidden="true"></i>
      <span class="sr-only">Link to this function</span>
    </a>
    <h1 class="signature" translate="no">maybe_to_atom(token)</h1>

      <a href="https://github.com/Kraigie/nostrum/blob/master/lib/nostrum/util.ex#L151" class="view-source" rel="help" title="View Source">
       <i class="ri-code-s-slash-line" aria-hidden="true"></i>
       <span class="sr-only">View Source</span>
     </a>


  </div>

  <section class="docstring">

      <h2>Specs</h2>
      <div class="specs">

          <pre translate="no">maybe_to_atom(<a href="https://hexdocs.pm/elixir/typespecs.html#basic-types">atom</a>() | <a href="https://hexdocs.pm/elixir/String.html#t:t/0">String.t</a>()) :: <a href="https://hexdocs.pm/elixir/typespecs.html#basic-types">atom</a>() | <a href="https://hexdocs.pm/elixir/typespecs.html#basic-types">integer</a>()</pre>

      </div>

<p>Attempts to convert a string to an atom.</p><p>Binary <code class="inline">token</code>s that consist of digits are assumed to be snowflakes, and will
be parsed as such.</p><p>If atom does not currently exist, will warn that we're doing an unsafe conversion.</p>
  </section>
</section>
<section class="detail" id="maybe_to_datetime/1">

  <div class="detail-header">
    <a href="#maybe_to_datetime/1" class="detail-link" title="Link to this function">
      <i class="ri-link-m" aria-hidden="true"></i>
      <span class="sr-only">Link to this function</span>
    </a>
    <h1 class="signature" translate="no">maybe_to_datetime(stamp)</h1>

      <a href="https://github.com/Kraigie/nostrum/blob/master/lib/nostrum/util.ex#L175" class="view-source" rel="help" title="View Source">
       <i class="ri-code-s-slash-line" aria-hidden="true"></i>
       <span class="sr-only">View Source</span>
     </a>


  </div>

  <section class="docstring">

      <h2>Specs</h2>
      <div class="specs">

          <pre translate="no">maybe_to_datetime(<a href="https://hexdocs.pm/elixir/String.html#t:t/0">String.t</a>() | nil) :: <a href="https://hexdocs.pm/elixir/DateTime.html#t:t/0">DateTime.t</a>() | nil</pre>

      </div>

<p>Converts possibly nil ISO8601 timestamp to a <a href="https://hexdocs.pm/elixir/DateTime.html"><code class="inline">DateTime</code></a></p>
  </section>
</section>
<section class="detail" id="now/0">

  <div class="detail-header">
    <a href="#now/0" class="detail-link" title="Link to this function">
      <i class="ri-link-m" aria-hidden="true"></i>
      <span class="sr-only">Link to this function</span>
    </a>
    <h1 class="signature" translate="no">now()</h1>

      <a href="https://github.com/Kraigie/nostrum/blob/master/lib/nostrum/util.ex#L16" class="view-source" rel="help" title="View Source">
       <i class="ri-code-s-slash-line" aria-hidden="true"></i>
       <span class="sr-only">View Source</span>
     </a>


  </div>

  <section class="docstring">

      <h2>Specs</h2>
      <div class="specs">

          <pre translate="no">now() :: <a href="https://hexdocs.pm/elixir/typespecs.html#basic-types">integer</a>()</pre>

      </div>

<p>Returns the number of milliseconds since unix epoch.</p>
  </section>
</section>
<section class="detail" id="now_iso/0">

  <div class="detail-header">
    <a href="#now_iso/0" class="detail-link" title="Link to this function">
      <i class="ri-link-m" aria-hidden="true"></i>
      <span class="sr-only">Link to this function</span>
    </a>
    <h1 class="signature" translate="no">now_iso()</h1>

      <a href="https://github.com/Kraigie/nostrum/blob/master/lib/nostrum/util.ex#L34" class="view-source" rel="help" title="View Source">
       <i class="ri-code-s-slash-line" aria-hidden="true"></i>
       <span class="sr-only">View Source</span>
     </a>


  </div>

  <section class="docstring">

      <h2>Specs</h2>
      <div class="specs">

          <pre translate="no">now_iso() :: <a href="https://hexdocs.pm/elixir/String.html#t:t/0">String.t</a>()</pre>

      </div>

<p>Returns the current date as an ISO formatted string.</p>
  </section>
</section>
<section class="detail" id="num_shards/0">

  <div class="detail-header">
    <a href="#num_shards/0" class="detail-link" title="Link to this function">
      <i class="ri-link-m" aria-hidden="true"></i>
      <span class="sr-only">Link to this function</span>
    </a>
    <h1 class="signature" translate="no">num_shards()</h1>

      <a href="https://github.com/Kraigie/nostrum/blob/master/lib/nostrum/util.ex#L60" class="view-source" rel="help" title="View Source">
       <i class="ri-code-s-slash-line" aria-hidden="true"></i>
       <span class="sr-only">View Source</span>
     </a>


  </div>

  <section class="docstring">

      <h2>Specs</h2>
      <div class="specs">

          <pre translate="no">num_shards() :: <a href="https://hexdocs.pm/elixir/typespecs.html#basic-types">integer</a>()</pre>

      </div>

<p>Returns the number of shards.</p><p>This is not the number of currently active shards, but the number of shards specified
in your config.</p>
  </section>
</section>
<section class="detail" id="safe_atom_map/1">

  <div class="detail-header">
    <a href="#safe_atom_map/1" class="detail-link" title="Link to this function">
      <i class="ri-link-m" aria-hidden="true"></i>
      <span class="sr-only">Link to this function</span>
    </a>
    <h1 class="signature" translate="no">safe_atom_map(term)</h1>

      <a href="https://github.com/Kraigie/nostrum/blob/master/lib/nostrum/util.ex#L129" class="view-source" rel="help" title="View Source">
       <i class="ri-code-s-slash-line" aria-hidden="true"></i>
       <span class="sr-only">View Source</span>
     </a>


  </div>

  <section class="docstring">

      <h2>Specs</h2>
      <div class="specs">

          <pre translate="no">safe_atom_map(<a href="https://hexdocs.pm/elixir/typespecs.html#basic-types">map</a>()) :: <a href="https://hexdocs.pm/elixir/typespecs.html#basic-types">map</a>()</pre>

      </div>

<p>Converts a map into an atom-keyed map.</p><p>Given a map with variable type keys, returns the same map with all keys as <code class="inline">atoms</code>.
To support maps keyed with integers (such as in Discord's interaction data),
binaries that appear to be integers will be parsed as such.</p><p>This function will attempt to convert keys to an existing atom, and if that fails will default to
creating a new atom while displaying a warning. The idea here is that we should be able to see
if any results from Discord are giving variable keys. Since we <em>will</em> define all
types of objects returned by Discord, the amount of new atoms created <em>SHOULD</em> be 0. ðŸ‘€</p>
  </section>
</section>
<section class="detail" id="unused_atoms/0">

  <div class="detail-header">
    <a href="#unused_atoms/0" class="detail-link" title="Link to this function">
      <i class="ri-link-m" aria-hidden="true"></i>
      <span class="sr-only">Link to this function</span>
    </a>
    <h1 class="signature" translate="no">unused_atoms()</h1>

      <a href="https://github.com/Kraigie/nostrum/blob/master/lib/nostrum/util.ex#L264" class="view-source" rel="help" title="View Source">
       <i class="ri-code-s-slash-line" aria-hidden="true"></i>
       <span class="sr-only">View Source</span>
     </a>


  </div>

  <section class="docstring">

<p>Since we're being sacrilegious and converting strings to atoms from the WS, there will be some
atoms that we see that aren't defined in any Discord structs. This method mainly serves as a
means to define those atoms once so the user isn't warned about them in the
<a href="#maybe_to_atom/1"><code class="inline">Nostrum.Util.maybe_to_atom/1</code></a> function when they are in fact harmless.</p>
  </section>
</section>
<section class="detail" id="usec_now/0">

  <div class="detail-header">
    <a href="#usec_now/0" class="detail-link" title="Link to this function">
      <i class="ri-link-m" aria-hidden="true"></i>
      <span class="sr-only">Link to this function</span>
    </a>
    <h1 class="signature" translate="no">usec_now()</h1>

      <a href="https://github.com/Kraigie/nostrum/blob/master/lib/nostrum/util.ex#L25" class="view-source" rel="help" title="View Source">
       <i class="ri-code-s-slash-line" aria-hidden="true"></i>
       <span class="sr-only">View Source</span>
     </a>


  </div>

  <section class="docstring">

      <h2>Specs</h2>
      <div class="specs">

          <pre translate="no">usec_now() :: <a href="https://hexdocs.pm/elixir/typespecs.html#basic-types">integer</a>()</pre>

      </div>

<p>Returns the number of microseconds since unix epoch.</p>
  </section>
</section>

    </div>
  </section>

      <footer class="footer">

          <p>
            On Hex.pm:

            <span class="line">
              <a href="https://hex.pm/packages/nostrum/0.5.0" class="line footer-hex-package">Package</a>
              <a href="https://preview.hex.pm/preview/nostrum/0.5.0" class="line">Preview</a>

                <a href="https://preview.hex.pm/preview/nostrum/0.5.0/show/lib/nostrum/util.ex">(current file)</a>

            </span>

            <button class="line footer-button display-quick-switch">
              Search
            </button>
          </p>

        <p>
          Built using
          <a href="https://github.com/elixir-lang/ex_doc" title="ExDoc" target="_blank" rel="help noopener" translate="no">ExDoc</a> (v0.28.0) for the
          <a href="https://elixir-lang.org" title="Elixir" target="_blank" translate="no">Elixir programming language</a>
        </p>
      </footer>
    </div>
  </div>
</section>
</div>


  </body>
</html>
