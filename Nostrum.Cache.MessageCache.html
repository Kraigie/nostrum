<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="generator" content="ExDoc v0.32.1">
    <meta name="project" content="Nostrum v0.10.0">


    <title>Nostrum.Cache.MessageCache â€” Nostrum v0.10.0</title>
    <link rel="stylesheet" href="dist/html-elixir-2C5PUTIB.css" />


    <script src="dist/handlebars.runtime-NWIB6V2M.js"></script>
    <script src="dist/handlebars.templates-IHH6HKET.js"></script>
    <script src="dist/sidebar_items-9312FB79.js"></script>
    <script src="docs_config.js"></script>
    <script async src="dist/html-GXQ6W6IF.js"></script>


  </head>
  <body data-type="modules" class="page-behaviour">
    <script>

      try {
        var settings = JSON.parse(localStorage.getItem('ex_doc:settings') || '{}');

        if (settings.theme === 'dark' ||
           ((settings.theme === 'system' || settings.theme == null) &&
             window.matchMedia('(prefers-color-scheme: dark)').matches)
           ) {
          document.body.classList.add('dark')
        }
      } catch (error) { }
    </script>

<div class="body-wrapper">

<button id="sidebar-menu" class="sidebar-button sidebar-toggle" aria-label="toggle sidebar" aria-controls="sidebar">
  <i class="ri-menu-line ri-lg" title="Collapse/expand sidebar"></i>
</button>

<nav id="sidebar" class="sidebar">

  <div class="sidebar-header">
    <div class="sidebar-projectInfo">

        <a href="https://github.com/Kraigie/nostrum" class="sidebar-projectImage">
          <img src="assets/logo.png" alt="Nostrum" />
        </a>

      <div>
        <a href="https://github.com/Kraigie/nostrum" class="sidebar-projectName" translate="no">
Nostrum
        </a>
        <div class="sidebar-projectVersion" translate="no">
          v0.10.0
        </div>
      </div>
    </div>
    <ul id="sidebar-listNav" class="sidebar-listNav" role="tablist">
      <li>
        <button id="extras-list-tab-button" role="tab" data-type="extras" aria-controls="extras-tab-panel" aria-selected="true" tabindex="0">
Pages
        </button>
      </li>

        <li>
          <button id="modules-list-tab-button" role="tab" data-type="modules" aria-controls="modules-tab-panel" aria-selected="false" tabindex="-1">
            Modules
          </button>
        </li>


        <li>
          <button id="tasks-list-tab-button" role="tab" data-type="tasks" aria-controls="tasks-tab-panel" aria-selected="false" tabindex="-1">
            <span translate="no">Mix</span> Tasks
          </button>
        </li>

    </ul>
  </div>

  <div id="extras-tab-panel" class="sidebar-tabpanel" role="tabpanel" aria-labelledby="extras-list-tab-button">
    <ul id="extras-full-list" class="full-list"></ul>
  </div>

    <div id="modules-tab-panel" class="sidebar-tabpanel" role="tabpanel" aria-labelledby="modules-list-tab-button" hidden>
      <ul id="modules-full-list" class="full-list"></ul>
    </div>


    <div id="tasks-tab-panel" class="sidebar-tabpanel" role="tabpanel" aria-labelledby="tasks-list-tab-button" hidden>
      <ul id="tasks-full-list" class="full-list"></ul>
    </div>

</nav>

<main class="content">
  <output role="status" id="toast"></output>

  <div id="content" class="content-inner">
    <div class="top-search">
      <div class="search-settings">
        <form class="search-bar" action="search.html">
          <label class="search-label">
            <span class="sr-only">Search documentation of Nostrum</span>
            <input name="q" type="text" class="search-input" placeholder="Press / to search" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" />
          </label>
          <button type="submit" class="search-button" aria-label="Submit Search">
            <i class="ri-search-2-line ri-lg" aria-hidden="true" title="Submit search"></i>
          </button>
          <button type="button" tabindex="-1" class="search-close-button" aria-hidden="true">
            <i class="ri-close-line ri-lg" title="Cancel search"></i>
          </button>
        </form>
        <div class="autocomplete">
        </div>
        <button class="icon-settings display-settings">
          <i class="ri-settings-3-line"></i>
          <span class="sr-only">Settings</span>
        </button>
      </div>
    </div>

<div id="top-content">
  <h1>

      <a href="https://github.com/Kraigie/nostrum/blob/master/lib/nostrum/cache/message_cache.ex#L1" title="View Source" class="icon-action" rel="help">
        <i class="ri-code-s-slash-line" aria-hidden="true"></i>
        <span class="sr-only">View Source</span>
      </a>

    <span translate="no">Nostrum.Cache.MessageCache</span> <small>behaviour</small>
    <small class="app-vsn" translate="no">(Nostrum v0.10.0)</small>

  </h1>


    <section id="moduledoc">
<p>Cache behaviour &amp; dispatcher for Discord messages.</p><p>By default, Elixir.Nostrum.Cache.MessageCache.Noop will be used for caching
messages. You can override this in the <code class="inline">:caches</code> option of the <code class="inline">nostrum</code>
application by setting the <code class="inline">:messages</code> field to a different module, or
to the tuple <code class="inline">{module, config}</code> where <code class="inline">module</code> is the module to use and
<code class="inline">config</code> is any compile-time configuration to pass to the module.</p><p>Unlike the other caches, the default is a no-op cache, as messages take
up a lot of memory and most bots do not need messages to be cached.
If you would like to cache messages, you can change the cache implementation
to one of the provided modules under <a href="Nostrum.Cache.MessageCache.html#content"><code class="inline">Nostrum.Cache.MessageCache</code></a>
or write your own.</p><h2 id="module-writing-your-own-message-cache" class="section-heading">
  <a href="#module-writing-your-own-message-cache" class="hover-link">
    <i class="ri-link-m" aria-hidden="true"></i>
  </a>
  <span class="text">Writing your own message cache</span>
</h2>
<p>As with the other caches, the message cache API consists of two parts:</p><ul><li><p>The functions that nostrum calls, such as <a href="#c:create/1"><code class="inline">create/1</code></a> or <a href="#c:update/1"><code class="inline">update/1</code></a>.
These <strong>do not create any objects in the Discord API</strong>, they are purely
created to update the cached data from data that Discord sends us. If you
want to create objects on Discord, use the functions exposed by <a href="Nostrum.Api.html"><code class="inline">Nostrum.Api</code></a> instead.</p></li><li><p>the <a href="#c:child_spec/1"><code class="inline">child_spec/1</code></a> callback for starting the cache under a supervisor.</p></li></ul><p>You need to implement both of them for nostrum to work with your custom
cache.</p>
    </section>

</div>

  <section id="summary" class="details-list">
    <h1 class="section-heading">
      <a class="hover-link" href="#summary">
        <i class="ri-link-m" aria-hidden="true"></i>
      </a>
      <span class="text">Summary</span>
    </h1>
<div class="summary-types summary">
  <h2>
    <a href="#types">Types</a>
  </h2>

    <div class="summary-row">
      <div class="summary-signature">
        <a href="#t:timestamp_like/0" translate="no">timestamp_like()</a>

      </div>

        <div class="summary-synopsis"><p>Used to constrain the return values of functions that can return
a list of messages from the cache.</p></div>

    </div>

</div>
<div class="summary-callbacks summary">
  <h2>
    <a href="#callbacks">Callbacks</a>
  </h2>

    <div class="summary-row">
      <div class="summary-signature">
        <a href="#c:bulk_delete/2" translate="no">bulk_delete(id, list)</a>

      </div>

        <div class="summary-synopsis"><p>Deletes multiple messages from the cache, any message IDs given
will always be for the same channel.</p></div>

    </div>

    <div class="summary-row">
      <div class="summary-signature">
        <a href="#c:channel_delete/1" translate="no">channel_delete(id)</a>

      </div>

        <div class="summary-synopsis"><p>Called when a channel is deleted.</p></div>

    </div>

    <div class="summary-row">
      <div class="summary-signature">
        <a href="#c:child_spec/1" translate="no">child_spec(term)</a>

      </div>

        <div class="summary-synopsis"><p>Retrieve the child spec for starting the cache under a supervisor.</p></div>

    </div>

    <div class="summary-row">
      <div class="summary-signature">
        <a href="#c:create/1" translate="no">create(map)</a>

      </div>

        <div class="summary-synopsis"><p>Creates a message in the cache.</p></div>

    </div>

    <div class="summary-row">
      <div class="summary-signature">
        <a href="#c:delete/2" translate="no">delete(id, id)</a>

      </div>

        <div class="summary-synopsis"><p>Deletes a message from the cache.</p></div>

    </div>

    <div class="summary-row">
      <div class="summary-signature">
        <a href="#c:get/1" translate="no">get(id)</a>

      </div>

        <div class="summary-synopsis"><p>Retrieve a single <a href="Nostrum.Struct.Message.html"><code class="inline">Nostrum.Struct.Message</code></a> from the cache by its ID.</p></div>

    </div>

    <div class="summary-row">
      <div class="summary-signature">
        <a href="#c:query_handle/0" translate="no">query_handle()</a>

      </div>

        <div class="summary-synopsis"><p>Return a QLC query handle for the cache for read operations.</p></div>

    </div>

    <div class="summary-row">
      <div class="summary-signature">
        <a href="#c:update/1" translate="no">update(map)</a>

      </div>

        <div class="summary-synopsis"><p>Updates a message in the cache.</p></div>

    </div>

    <div class="summary-row">
      <div class="summary-signature">
        <a href="#c:wrap_qlc/1" translate="no">wrap_qlc(function)</a>

      </div>

        <div class="summary-synopsis"><p>A function that should wrap any <code class="inline">:qlc</code> operations.</p></div>

    </div>

</div>
<div class="summary-functions summary">
  <h2>
    <a href="#functions">Functions</a>
  </h2>

    <div class="summary-row">
      <div class="summary-signature">
        <a href="#get/1" translate="no">get(message_id)</a>

      </div>

        <div class="summary-synopsis"><p>Retrieve a message from the cache by channel and message id.</p></div>

    </div>

    <div class="summary-row">
      <div class="summary-signature">
        <a href="#get_by_author/4" translate="no">get_by_author(author_id, after_timestamp \\ 0, before_timestamp \\ :infinity, cache \\ Nostrum.Cache.MessageCache.Noop)</a>

      </div>

        <div class="summary-synopsis"><p>Retrieve a list of messages from the cache with a given author ID,
optionally after a given date, and before a given date.</p></div>

    </div>

    <div class="summary-row">
      <div class="summary-signature">
        <a href="#get_by_channel/4" translate="no">get_by_channel(channel_id, after_timestamp \\ 0, before_timestamp \\ :infinity, cache \\ Nostrum.Cache.MessageCache.Noop)</a>

      </div>

        <div class="summary-synopsis"><p>Retrieve a list of messages from the cache with a given channel ID,
after a given date, and before a given date.</p></div>

    </div>

    <div class="summary-row">
      <div class="summary-signature">
        <a href="#get_by_channel_and_author/5" translate="no">get_by_channel_and_author(channel_id, author_id, after_timestamp \\ 0, before_timestamp \\ :infinity, cache \\ Nostrum.Cache.MessageCache.Noop)</a>

      </div>

        <div class="summary-synopsis"><p>Retrieve a list of messages from the cache with a given channel ID and author ID,
optionally after a given date, and before a given date.</p></div>

    </div>

    <div class="summary-row">
      <div class="summary-signature">
        <a href="#query_handle/0" translate="no">query_handle()</a>

      </div>

        <div class="summary-synopsis"><p>Return the QLC handle of the configured cache.</p></div>

    </div>

    <div class="summary-row">
      <div class="summary-signature">
        <a href="#wrap_qlc/2" translate="no">wrap_qlc(cache \\ Nostrum.Cache.MessageCache.Noop, fun)</a>

      </div>

        <div class="summary-synopsis"><p>Call <a href="#c:wrap_qlc/1"><code class="inline">wrap_qlc/1</code></a> on the given cache, if implemented.</p></div>

    </div>

</div>

  </section>


  <section id="types" class="details-list">
    <h1 class="section-heading">
      <a class="hover-link" href="#types">
        <i class="ri-link-m" aria-hidden="true"></i>
      </a>
      <span class="text">Types</span>
    </h1>
    <div class="types-list">
<section class="detail" id="t:timestamp_like/0">

  <div class="detail-header">
    <a href="#t:timestamp_like/0" class="detail-link" title="Link to this type">
      <i class="ri-link-m" aria-hidden="true"></i>
      <span class="sr-only">Link to this type</span>
    </a>
    <h1 class="signature" translate="no">timestamp_like()</h1>

      <a href="https://github.com/Kraigie/nostrum/blob/master/lib/nostrum/cache/message_cache.ex#L133" class="icon-action" rel="help" title="View Source">
       <i class="ri-code-s-slash-line" aria-hidden="true"></i>
       <span class="sr-only">View Source</span>
     </a>


      <span class="note">(since 0.10.0)</span>

  </div>

  <section class="docstring">

      <div class="specs">

          <pre translate="no"><span class="attribute">@type</span> timestamp_like() :: <a href="Nostrum.Snowflake.html#t:t/0">Nostrum.Snowflake.t</a>() | <a href="https://hexdocs.pm/elixir/DateTime.html#t:t/0">DateTime.t</a>()</pre>

      </div>

<p>Used to constrain the return values of functions that can return
a list of messages from the cache.</p>
  </section>
</section>

    </div>
  </section>

  <section id="callbacks" class="details-list">
    <h1 class="section-heading">
      <a class="hover-link" href="#callbacks">
        <i class="ri-link-m" aria-hidden="true"></i>
      </a>
      <span class="text">Callbacks</span>
    </h1>
    <div class="callbacks-list">
<section class="detail" id="c:bulk_delete/2">

  <div class="detail-header">
    <a href="#c:bulk_delete/2" class="detail-link" title="Link to this callback">
      <i class="ri-link-m" aria-hidden="true"></i>
      <span class="sr-only">Link to this callback</span>
    </a>
    <h1 class="signature" translate="no">bulk_delete(id, list)</h1>

      <a href="https://github.com/Kraigie/nostrum/blob/master/lib/nostrum/cache/message_cache.ex#L78" class="icon-action" rel="help" title="View Source">
       <i class="ri-code-s-slash-line" aria-hidden="true"></i>
       <span class="sr-only">View Source</span>
     </a>


      <span class="note">(since 0.10.0)</span>

  </div>

  <section class="docstring">

      <div class="specs">

          <pre translate="no"><span class="attribute">@callback</span> bulk_delete(<a href="Nostrum.Struct.Channel.html#t:id/0">Nostrum.Struct.Channel.id</a>(), [<a href="Nostrum.Struct.Message.html#t:id/0">Nostrum.Struct.Message.id</a>()]) :: [
  <a href="Nostrum.Struct.Message.html#t:t/0">Nostrum.Struct.Message.t</a>()
]</pre>

      </div>

<p>Deletes multiple messages from the cache, any message IDs given
will always be for the same channel.</p><p>Returns a list of the deleted messages.
Note that if a message was not found in the cache, it will
not be included in the returned list.</p>
  </section>
</section>
<section class="detail" id="c:channel_delete/1">

  <div class="detail-header">
    <a href="#c:channel_delete/1" class="detail-link" title="Link to this callback">
      <i class="ri-link-m" aria-hidden="true"></i>
      <span class="sr-only">Link to this callback</span>
    </a>
    <h1 class="signature" translate="no">channel_delete(id)</h1>

      <a href="https://github.com/Kraigie/nostrum/blob/master/lib/nostrum/cache/message_cache.ex#L85" class="icon-action" rel="help" title="View Source">
       <i class="ri-code-s-slash-line" aria-hidden="true"></i>
       <span class="sr-only">View Source</span>
     </a>


      <span class="note">(since 0.10.0)</span>

  </div>

  <section class="docstring">

      <div class="specs">

          <pre translate="no"><span class="attribute">@callback</span> channel_delete(<a href="Nostrum.Struct.Channel.html#t:id/0">Nostrum.Struct.Channel.id</a>()) :: :ok</pre>

      </div>

<p>Called when a channel is deleted.</p><p>Any messages in the cache for the channel should be removed.</p>
  </section>
</section>
<section class="detail" id="c:child_spec/1">

  <div class="detail-header">
    <a href="#c:child_spec/1" class="detail-link" title="Link to this callback">
      <i class="ri-link-m" aria-hidden="true"></i>
      <span class="sr-only">Link to this callback</span>
    </a>
    <h1 class="signature" translate="no">child_spec(term)</h1>

      <a href="https://github.com/Kraigie/nostrum/blob/master/lib/nostrum/cache/message_cache.ex#L114" class="icon-action" rel="help" title="View Source">
       <i class="ri-code-s-slash-line" aria-hidden="true"></i>
       <span class="sr-only">View Source</span>
     </a>


      <span class="note">(since 0.10.0)</span>

  </div>

  <section class="docstring">

      <div class="specs">

          <pre translate="no"><span class="attribute">@callback</span> child_spec(<a href="https://hexdocs.pm/elixir/typespecs.html#built-in-types">term</a>()) :: <a href="https://hexdocs.pm/elixir/Supervisor.html#t:child_spec/0">Supervisor.child_spec</a>()</pre>

      </div>

<p>Retrieve the child spec for starting the cache under a supervisor.</p><p>This callback is optional, and if not implemented, the cache will not be
started under a supervisor.</p>
  </section>
</section>
<section class="detail" id="c:create/1">

  <div class="detail-header">
    <a href="#c:create/1" class="detail-link" title="Link to this callback">
      <i class="ri-link-m" aria-hidden="true"></i>
      <span class="sr-only">Link to this callback</span>
    </a>
    <h1 class="signature" translate="no">create(map)</h1>

      <a href="https://github.com/Kraigie/nostrum/blob/master/lib/nostrum/cache/message_cache.ex#L52" class="icon-action" rel="help" title="View Source">
       <i class="ri-code-s-slash-line" aria-hidden="true"></i>
       <span class="sr-only">View Source</span>
     </a>


      <span class="note">(since 0.10.0)</span>

  </div>

  <section class="docstring">

      <div class="specs">

          <pre translate="no"><span class="attribute">@callback</span> create(<a href="https://hexdocs.pm/elixir/typespecs.html#basic-types">map</a>()) :: <a href="Nostrum.Struct.Message.html#t:t/0">Nostrum.Struct.Message.t</a>()</pre>

      </div>

<p>Creates a message in the cache.</p><p>The argument given is the raw message payload from Discord's gateway.</p>
  </section>
</section>
<section class="detail" id="c:delete/2">

  <div class="detail-header">
    <a href="#c:delete/2" class="detail-link" title="Link to this callback">
      <i class="ri-link-m" aria-hidden="true"></i>
      <span class="sr-only">Link to this callback</span>
    </a>
    <h1 class="signature" translate="no">delete(id, id)</h1>

      <a href="https://github.com/Kraigie/nostrum/blob/master/lib/nostrum/cache/message_cache.ex#L68" class="icon-action" rel="help" title="View Source">
       <i class="ri-code-s-slash-line" aria-hidden="true"></i>
       <span class="sr-only">View Source</span>
     </a>


      <span class="note">(since 0.10.0)</span>

  </div>

  <section class="docstring">

      <div class="specs">

          <pre translate="no"><span class="attribute">@callback</span> delete(<a href="Nostrum.Struct.Channel.html#t:id/0">Nostrum.Struct.Channel.id</a>(), <a href="Nostrum.Struct.Message.html#t:id/0">Nostrum.Struct.Message.id</a>()) ::
  <a href="Nostrum.Struct.Message.html#t:t/0">Nostrum.Struct.Message.t</a>() | nil</pre>

      </div>

<p>Deletes a message from the cache.</p><p>Expects the deleted message to be returned if it was found.</p>
  </section>
</section>
<section class="detail" id="c:get/1">

  <div class="detail-header">
    <a href="#c:get/1" class="detail-link" title="Link to this callback">
      <i class="ri-link-m" aria-hidden="true"></i>
      <span class="sr-only">Link to this callback</span>
    </a>
    <h1 class="signature" translate="no">get(id)</h1>

      <a href="https://github.com/Kraigie/nostrum/blob/master/lib/nostrum/cache/message_cache.ex#L45" class="icon-action" rel="help" title="View Source">
       <i class="ri-code-s-slash-line" aria-hidden="true"></i>
       <span class="sr-only">View Source</span>
     </a>


      <span class="note">(since 0.10.0)</span>

  </div>

  <section class="docstring">

      <div class="specs">

          <pre translate="no"><span class="attribute">@callback</span> get(<a href="Nostrum.Struct.Message.html#t:id/0">Nostrum.Struct.Message.id</a>()) ::
  {:ok, <a href="Nostrum.Struct.Message.html#t:t/0">Nostrum.Struct.Message.t</a>()} | {:error, :not_found}</pre>

      </div>

<p>Retrieve a single <a href="Nostrum.Struct.Message.html"><code class="inline">Nostrum.Struct.Message</code></a> from the cache by its ID.</p>
  </section>
</section>
<section class="detail" id="c:query_handle/0">

  <div class="detail-header">
    <a href="#c:query_handle/0" class="detail-link" title="Link to this callback">
      <i class="ri-link-m" aria-hidden="true"></i>
      <span class="sr-only">Link to this callback</span>
    </a>
    <h1 class="signature" translate="no">query_handle()</h1>

      <a href="https://github.com/Kraigie/nostrum/blob/master/lib/nostrum/cache/message_cache.ex#L106" class="icon-action" rel="help" title="View Source">
       <i class="ri-code-s-slash-line" aria-hidden="true"></i>
       <span class="sr-only">View Source</span>
     </a>


      <span class="note">(since 0.10.0)</span>

  </div>

  <section class="docstring">

      <div class="specs">

          <pre translate="no"><span class="attribute">@callback</span> query_handle() :: <a href="https://www.erlang.org/doc/man/qlc.html#type-query_handle">:qlc.query_handle</a>()</pre>

      </div>

<p>Return a QLC query handle for the cache for read operations.</p><p>This is used by nostrum to provide any read operations on the cache. Write
operations still need to be implemented separately.</p><p>The Erlang manual on <a href="https://www.erlang.org/doc/man/qlc.html#implementing_a_qlc_table">Implementing a QLC
Table</a>
contains examples for implementation. To prevent full table scans, accept
match specifications in your <code class="inline">TraverseFun</code> and implement a <code class="inline">LookupFun</code> as
documented.</p><p>The query handle must return items in the form <code class="inline">{message_id, message}</code>, where:</p><ul><li><code class="inline">message_id</code> is a <a href="Nostrum.Struct.Message.html#t:id/0"><code class="inline">Nostrum.Struct.Message.id/0</code></a></li><li><code class="inline">message</code> is a <a href="Nostrum.Struct.Message.html#t:t/0"><code class="inline">Nostrum.Struct.Message.t/0</code></a></li></ul><p>If your cache needs some form of setup or teardown for QLC queries (such as
opening connections), see <a href="#c:wrap_qlc/1"><code class="inline">wrap_qlc/1</code></a>.</p>
  </section>
</section>
<section class="detail" id="c:update/1">

  <div class="detail-header">
    <a href="#c:update/1" class="detail-link" title="Link to this callback">
      <i class="ri-link-m" aria-hidden="true"></i>
      <span class="sr-only">Link to this callback</span>
    </a>
    <h1 class="signature" translate="no">update(map)</h1>

      <a href="https://github.com/Kraigie/nostrum/blob/master/lib/nostrum/cache/message_cache.ex#L61" class="icon-action" rel="help" title="View Source">
       <i class="ri-code-s-slash-line" aria-hidden="true"></i>
       <span class="sr-only">View Source</span>
     </a>


      <span class="note">(since 0.10.0)</span>

  </div>

  <section class="docstring">

      <div class="specs">

          <pre translate="no"><span class="attribute">@callback</span> update(<a href="https://hexdocs.pm/elixir/typespecs.html#basic-types">map</a>()) ::
  {old_message :: <a href="Nostrum.Struct.Message.html#t:t/0">Nostrum.Struct.Message.t</a>() | nil,
   updated_message :: <a href="Nostrum.Struct.Message.html#t:t/0">Nostrum.Struct.Message.t</a>()}</pre>

      </div>

<p>Updates a message in the cache.</p><p>The argument given is the raw message payload from Discord's gateway,
and the return value is a tuple of the updated message and the old message if
it was found in the cache, otherwise <code class="inline">nil</code>.</p>
  </section>
</section>
<section class="detail" id="c:wrap_qlc/1">

  <div class="detail-header">
    <a href="#c:wrap_qlc/1" class="detail-link" title="Link to this callback">
      <i class="ri-link-m" aria-hidden="true"></i>
      <span class="sr-only">Link to this callback</span>
    </a>
    <h1 class="signature" translate="no">wrap_qlc(function)</h1>

      <a href="https://github.com/Kraigie/nostrum/blob/master/lib/nostrum/cache/message_cache.ex#L126" class="icon-action" rel="help" title="View Source">
       <i class="ri-code-s-slash-line" aria-hidden="true"></i>
       <span class="sr-only">View Source</span>
     </a>


      <span class="note">(optional)</span>

      <span class="note">(since 0.10.0)</span>

  </div>

  <section class="docstring">

      <div class="specs">

          <pre translate="no"><span class="attribute">@callback</span> wrap_qlc((-&gt; result)) :: result when result: <a href="https://hexdocs.pm/elixir/typespecs.html#built-in-types">term</a>()</pre>

      </div>

<p>A function that should wrap any <code class="inline">:qlc</code> operations.</p><p>If you implement a cache that is backed by a database and want to perform
cleanup and teardown actions such as opening and closing connections,
managing transactions and so on, you want to implement this function. nostrum
will then effectively call <code class="inline">wrap_qlc(fn -&gt; :qlc.e(...) end)</code>.</p><p>If your cache does not need any wrapping, you can omit this.</p>
  </section>
</section>

    </div>
  </section>

  <section id="functions" class="details-list">
    <h1 class="section-heading">
      <a class="hover-link" href="#functions">
        <i class="ri-link-m" aria-hidden="true"></i>
      </a>
      <span class="text">Functions</span>
    </h1>
    <div class="functions-list">
<section class="detail" id="get/1">

  <div class="detail-header">
    <a href="#get/1" class="detail-link" title="Link to this function">
      <i class="ri-link-m" aria-hidden="true"></i>
      <span class="sr-only">Link to this function</span>
    </a>
    <h1 class="signature" translate="no">get(message_id)</h1>

      <a href="https://github.com/Kraigie/nostrum/blob/master/lib/nostrum/cache/message_cache.ex#L140" class="icon-action" rel="help" title="View Source">
       <i class="ri-code-s-slash-line" aria-hidden="true"></i>
       <span class="sr-only">View Source</span>
     </a>


      <span class="note">(since 0.10.0)</span>

  </div>

  <section class="docstring">

<p>Retrieve a message from the cache by channel and message id.</p>
  </section>
</section>
<section class="detail" id="get_by_author/4">

    <span id="get_by_author/1"></span>

    <span id="get_by_author/2"></span>

    <span id="get_by_author/3"></span>

  <div class="detail-header">
    <a href="#get_by_author/4" class="detail-link" title="Link to this function">
      <i class="ri-link-m" aria-hidden="true"></i>
      <span class="sr-only">Link to this function</span>
    </a>
    <h1 class="signature" translate="no">get_by_author(author_id, after_timestamp \\ 0, before_timestamp \\ :infinity, cache \\ Nostrum.Cache.MessageCache.Noop)</h1>

      <a href="https://github.com/Kraigie/nostrum/blob/master/lib/nostrum/cache/message_cache.ex#L185" class="icon-action" rel="help" title="View Source">
       <i class="ri-code-s-slash-line" aria-hidden="true"></i>
       <span class="sr-only">View Source</span>
     </a>


      <span class="note">(since 0.10.0)</span>

  </div>

  <section class="docstring">

<p>Retrieve a list of messages from the cache with a given author ID,
optionally after a given date, and before a given date.</p><p>Integers are treated as snowflakes, and the atom <code class="inline">:infinity</code> when given
as a before date will be treated as the maximum possible date.</p>
  </section>
</section>
<section class="detail" id="get_by_channel/4">

    <span id="get_by_channel/1"></span>

    <span id="get_by_channel/2"></span>

    <span id="get_by_channel/3"></span>

  <div class="detail-header">
    <a href="#get_by_channel/4" class="detail-link" title="Link to this function">
      <i class="ri-link-m" aria-hidden="true"></i>
      <span class="sr-only">Link to this function</span>
    </a>
    <h1 class="signature" translate="no">get_by_channel(channel_id, after_timestamp \\ 0, before_timestamp \\ :infinity, cache \\ Nostrum.Cache.MessageCache.Noop)</h1>

      <a href="https://github.com/Kraigie/nostrum/blob/master/lib/nostrum/cache/message_cache.ex#L152" class="icon-action" rel="help" title="View Source">
       <i class="ri-code-s-slash-line" aria-hidden="true"></i>
       <span class="sr-only">View Source</span>
     </a>


      <span class="note">(since 0.10.0)</span>

  </div>

  <section class="docstring">

<p>Retrieve a list of messages from the cache with a given channel ID,
after a given date, and before a given date.</p><p>Integers are treated as snowflakes, and the atom <code class="inline">:infinity</code> when given
as a before date will be treated as the maximum possible date.</p>
  </section>
</section>
<section class="detail" id="get_by_channel_and_author/5">

    <span id="get_by_channel_and_author/2"></span>

    <span id="get_by_channel_and_author/3"></span>

    <span id="get_by_channel_and_author/4"></span>

  <div class="detail-header">
    <a href="#get_by_channel_and_author/5" class="detail-link" title="Link to this function">
      <i class="ri-link-m" aria-hidden="true"></i>
      <span class="sr-only">Link to this function</span>
    </a>
    <h1 class="signature" translate="no">get_by_channel_and_author(channel_id, author_id, after_timestamp \\ 0, before_timestamp \\ :infinity, cache \\ Nostrum.Cache.MessageCache.Noop)</h1>

      <a href="https://github.com/Kraigie/nostrum/blob/master/lib/nostrum/cache/message_cache.ex#L220" class="icon-action" rel="help" title="View Source">
       <i class="ri-code-s-slash-line" aria-hidden="true"></i>
       <span class="sr-only">View Source</span>
     </a>


      <span class="note">(since 0.10.0)</span>

  </div>

  <section class="docstring">

<p>Retrieve a list of messages from the cache with a given channel ID and author ID,
optionally after a given date, and before a given date.</p>
  </section>
</section>
<section class="detail" id="query_handle/0">

  <div class="detail-header">
    <a href="#query_handle/0" class="detail-link" title="Link to this function">
      <i class="ri-link-m" aria-hidden="true"></i>
      <span class="sr-only">Link to this function</span>
    </a>
    <h1 class="signature" translate="no">query_handle()</h1>

      <a href="https://github.com/Kraigie/nostrum/blob/master/lib/nostrum/cache/message_cache.ex#L276" class="icon-action" rel="help" title="View Source">
       <i class="ri-code-s-slash-line" aria-hidden="true"></i>
       <span class="sr-only">View Source</span>
     </a>


      <span class="note">(since 0.10.0)</span>

  </div>

  <section class="docstring">

<p>Return the QLC handle of the configured cache.</p>
  </section>
</section>
<section class="detail" id="wrap_qlc/2">

    <span id="wrap_qlc/1"></span>

  <div class="detail-header">
    <a href="#wrap_qlc/2" class="detail-link" title="Link to this function">
      <i class="ri-link-m" aria-hidden="true"></i>
      <span class="sr-only">Link to this function</span>
    </a>
    <h1 class="signature" translate="no">wrap_qlc(cache \\ Nostrum.Cache.MessageCache.Noop, fun)</h1>

      <a href="https://github.com/Kraigie/nostrum/blob/master/lib/nostrum/cache/message_cache.ex#L252" class="icon-action" rel="help" title="View Source">
       <i class="ri-code-s-slash-line" aria-hidden="true"></i>
       <span class="sr-only">View Source</span>
     </a>


      <span class="note">(since 0.10.0)</span>

  </div>

  <section class="docstring">

      <div class="specs">

          <pre translate="no"><span class="attribute">@spec</span> wrap_qlc(<a href="https://hexdocs.pm/elixir/typespecs.html#built-in-types">module</a>(), (-&gt; result)) :: result when result: <a href="https://hexdocs.pm/elixir/typespecs.html#built-in-types">term</a>()</pre>

      </div>

<p>Call <a href="#c:wrap_qlc/1"><code class="inline">wrap_qlc/1</code></a> on the given cache, if implemented.</p><p>If no cache is given, calls out to the default cache.</p>
  </section>
</section>

    </div>
  </section>

    <footer class="footer">
      <p>

          <span class="line">
            <a href="https://hex.pm/packages/nostrum/0.10.0" class="footer-hex-package">Hex Package</a>

            <a href="https://preview.hex.pm/preview/nostrum/0.10.0">Hex Preview</a>

          </span>

        <span class="line">
          <button class="a-main footer-button display-quick-switch" title="Search HexDocs packages">
            Search HexDocs
          </button>

            <a href="Nostrum.epub" title="ePub version">
              Download ePub version
            </a>

        </span>
      </p>

      <p class="built-using">
        Built using
        <a href="https://github.com/elixir-lang/ex_doc" title="ExDoc" target="_blank" rel="help noopener" translate="no">ExDoc</a> (v0.32.1) for the

          <a href="https://elixir-lang.org" title="Elixir" target="_blank" translate="no">Elixir programming language</a>

      </p>

    </footer>
  </div>
</main>
</div>


  </body>
</html>
